# í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì‹œìŠ¤í…œ êµ¬ì¶• ì‘ì—… ë‚´ì—­

ì‘ì—… ë‚ ì§œ: 2026-01-30

## ğŸ“‹ ëª©ì°¨
- [ì™„ë£Œëœ ì‘ì—…](#ì™„ë£Œëœ-ì‘ì—…)
- [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)
- [í•´ì•¼ í•  ì¼](#í•´ì•¼-í• -ì¼)
- [ì¤‘ìš” ì°¸ê³ ì‚¬í•­](#ì¤‘ìš”-ì°¸ê³ ì‚¬í•­)

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1ë‹¨ê³„: ë°±ì—”ë“œ í”„ë¡¬í”„íŠ¸ ê°€ì´ë“œë¼ì¸ì„ ì„¤ì •ìœ¼ë¡œ ì´ë™

#### ë¬¸ì œì 
- í”„ë¡¬í”„íŠ¸ ê°€ì´ë“œë¼ì¸ì´ ë°±ì—”ë“œ ì½”ë“œì— í•˜ë“œì½”ë”©ë¨
- `functions/src/reviewUtils.js`ì˜ `buildPromptFromSettings` í•¨ìˆ˜ì— 8000ì ë¶„ëŸ‰ì˜ ê°€ì´ë“œë¼ì¸ì´ ì§ì ‘ ì‘ì„±ë¨
- ê´€ë¦¬ì UIì—ì„œ ìˆ˜ì • ë¶ˆê°€ëŠ¥

#### í•´ê²° ë°©ë²•
ë°±ì—”ë“œ í•˜ë“œì½”ë”©ì„ ì œê±°í•˜ê³  Firestore ì„¤ì •ìœ¼ë¡œ ì´ë™

#### ë³€ê²½ëœ íŒŒì¼

**1. `web/types/settings.ts`**
```typescript
// PromptSettings íƒ€ì…ì— additionalGuidelines í•„ë“œ ì¶”ê°€
export type PromptSettings = {
  systemPrompt: string;
  reviewTemplate: string;
  additionalGuidelines: string; // â† ìƒˆë¡œ ì¶”ê°€
  minLength: number;
  maxLength: number;
  toneScoreThreshold: number;
};

// ê¸°ë³¸ê°’ ì¶”ê°€
export const DEFAULT_ADDITIONAL_GUIDELINES = `
**ì¤‘ìš”: ë°˜ë“œì‹œ {minLength}ì ì´ìƒ {maxLength}ì ì´í•˜ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.**

ë¦¬ë·° ì‘ì„± ê°€ì´ë“œ:
1. ìƒí’ˆì„ ì‹¤ì œë¡œ ì‚¬ìš©í•œ ê²½í—˜ì²˜ëŸ¼ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±
...
`;
```

**2. `web/stores/settingsStore.ts`**
```typescript
// additionalGuidelines setter ì¶”ê°€
setAdditionalGuidelines: (guidelines: string) => void;
```

**3. `web/components/admin/settings/PromptSettings.tsx`**
- "ìƒì„¸ ê°€ì´ë“œë¼ì¸" í¸ì§‘ ì˜ì—­ ì¶”ê°€ (textarea)
- ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™” ë²„íŠ¼ ì¶”ê°€

**4. `functions/src/reviewUtils.js`**
```javascript
// BEFORE: í•˜ë“œì½”ë”©
const lengthRequirement = `
ë¦¬ë·° ì‘ì„± ê°€ì´ë“œ:
1. ...
`;

// AFTER: ì„¤ì •ì—ì„œ ê°€ì ¸ì˜¤ê¸°
export function buildPromptFromSettings(product, promptSettings) {
  const { reviewTemplate, additionalGuidelines, minLength, maxLength } = promptSettings;

  const guidelines = additionalGuidelines
    ? additionalGuidelines
        .replace(/{minLength}/g, String(minLength))
        .replace(/{maxLength}/g, String(maxLength))
    : "";

  return basePrompt + (guidelines ? "\n\n" + guidelines : "");
}
```

**5. ë°°í¬**
```bash
firebase deploy --only functions:generateReview,functions:manualGenerateReview
```

#### ê²°ê³¼
âœ… ê´€ë¦¬ì UIì—ì„œ ìƒì„¸ ê°€ì´ë“œë¼ì¸ í¸ì§‘ ê°€ëŠ¥
âœ… ë°±ì—”ë“œ ì½”ë“œ ìˆ˜ì • ì—†ì´ í”„ë¡¬í”„íŠ¸ ë³€ê²½ ê°€ëŠ¥

---

### 2ë‹¨ê³„: í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì‹œìŠ¤í…œ êµ¬ì¶•

#### ëª©í‘œ
ì—¬ëŸ¬ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì„ ì €ì¥í•˜ê³  ìƒí™©ì— ë§ê²Œ ì „í™˜ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œ

#### êµ¬í˜„ ë‚´ìš©

**1. íƒ€ì… ì •ì˜**

`web/types/promptTemplate.ts` ìƒì„±
```typescript
export type PromptTemplate = {
  id: string;
  name: string; // "ê¸°ë³¸ ë¦¬ë·°", "ì‹¬ì¸µ ë¦¬ë·°", "ê°„ë‹¨ ë¦¬ë·°"
  description?: string;
  systemPrompt: string;
  reviewTemplate: string;
  additionalGuidelines: string;
  minLength: number;
  maxLength: number;
  toneScoreThreshold: number;
  isDefault: boolean; // ê¸°ë³¸ í…œí”Œë¦¿ ì—¬ë¶€
  categories?: string[]; // ì¹´í…Œê³ ë¦¬ ID ëª©ë¡
  createdAt: string;
  updatedAt: string;
};

// ê¸°ë³¸ í…œí”Œë¦¿ 3ê°œ ì •ì˜
export const DEFAULT_TEMPLATES = [
  {
    name: "ê¸°ë³¸ ë¦¬ë·°",
    description: "ê· í˜•ì¡íŒ ë¸”ë¡œê·¸ ë¦¬ë·° (800-1500ì)",
    minLength: 800,
    maxLength: 1500,
    isDefault: true,
    ...
  },
  {
    name: "ì‹¬ì¸µ ë¦¬ë·°",
    description: "ìƒì„¸í•œ ë¶„ì„ (1500-3000ì)",
    minLength: 1500,
    maxLength: 3000,
    ...
  },
  {
    name: "ê°„ë‹¨ ë¦¬ë·°",
    description: "í•µì‹¬ë§Œ ë‹´ì€ ë¦¬ë·° (500-800ì)",
    minLength: 500,
    maxLength: 800,
    ...
  }
];
```

**2. Firestore CRUD í•¨ìˆ˜**

`web/lib/firestore.ts`ì— ì¶”ê°€:
- `getPromptTemplates()` - ëª¨ë“  í…œí”Œë¦¿ ì¡°íšŒ
- `getPromptTemplate(id)` - íŠ¹ì • í…œí”Œë¦¿ ì¡°íšŒ
- `getDefaultPromptTemplate()` - ê¸°ë³¸ í…œí”Œë¦¿ ì¡°íšŒ
- `createPromptTemplate(input)` - í…œí”Œë¦¿ ìƒì„±
- `updatePromptTemplate(id, input)` - í…œí”Œë¦¿ ìˆ˜ì •
- `deletePromptTemplate(id)` - í…œí”Œë¦¿ ì‚­ì œ

**3. API ë¼ìš°íŠ¸**

`web/app/api/settings/prompt-templates/route.ts`
- GET `/api/settings/prompt-templates` - í…œí”Œë¦¿ ëª©ë¡
- POST `/api/settings/prompt-templates` - í…œí”Œë¦¿ ìƒì„±
- PUT `/api/settings/prompt-templates?id=xxx` - í…œí”Œë¦¿ ìˆ˜ì •
- DELETE `/api/settings/prompt-templates?id=xxx` - í…œí”Œë¦¿ ì‚­ì œ

`web/app/api/settings/init-templates/route.ts`
- POST `/api/settings/init-templates` - ê¸°ë³¸ í…œí”Œë¦¿ 3ê°œ ìƒì„±

`web/app/api/settings/sync-template/route.ts`
- POST `/api/settings/sync-template` - í…œí”Œë¦¿ì„ í”„ë¡¬í”„íŠ¸ ì„¤ì •ì— ë™ê¸°í™”

**4. UI ì»´í¬ë„ŒíŠ¸**

`web/components/admin/settings/PromptTemplates.tsx`
- í…œí”Œë¦¿ ëª©ë¡ í‘œì‹œ
- ìƒˆ í…œí”Œë¦¿ ìƒì„±
- í…œí”Œë¦¿ í¸ì§‘/ì‚­ì œ
- ê¸°ë³¸ê°’ ì„¤ì •
- ê¸°ë³¸ í…œí”Œë¦¿ 3ê°œ ìë™ ìƒì„± ë²„íŠ¼

`web/components/admin/settings/TemplateEditor.tsx`
- í…œí”Œë¦¿ ìƒì„±/ìˆ˜ì • í¼
- ëª¨ë“  í•„ë“œ í¸ì§‘ ê°€ëŠ¥
- ì¹´í…Œê³ ë¦¬ í• ë‹¹ (ì²´í¬ë°•ìŠ¤)

**5. ì„¤ì • í˜ì´ì§€ í†µí•©**

`web/components/admin/settings/SettingsView.tsx`
- ~~"í”„ë¡¬í”„íŠ¸" íƒ­ ì œê±°~~ (ì¤‘ë³µì´ë¯€ë¡œ ì‚­ì œ)
- "í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿" íƒ­ ì¶”ê°€
- í…œí”Œë¦¿ ê´€ë¦¬ UI í‘œì‹œ

#### ì‘ë™ ë°©ì‹

```
1. ì‚¬ìš©ìê°€ "í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿" íƒ­ ì§„ì…
2. "ê¸°ë³¸ í…œí”Œë¦¿ 3ê°œ ìƒì„±" ë²„íŠ¼ í´ë¦­
3. Firestoreì— 3ê°œ í…œí”Œë¦¿ ì €ì¥ (ê¸°ë³¸ ë¦¬ë·°ê°€ isDefault=true)
4. ê¸°ë³¸ í…œí”Œë¦¿ì˜ ë‚´ìš©ì´ system_settings/globalì˜ prompt í•„ë“œì— ìë™ ë™ê¸°í™”
5. ë¦¬ë·° ìƒì„± ì‹œ system_settings/globalì˜ prompt ì‚¬ìš©
```

```
í…œí”Œë¦¿ ì „í™˜:
1. ë‹¤ë¥¸ í…œí”Œë¦¿ì—ì„œ "ê¸°ë³¸ê°’ ì„¤ì •" í´ë¦­
2. í•´ë‹¹ í…œí”Œë¦¿ì´ isDefault=trueë¡œ ë³€ê²½
3. ê¸°ì¡´ ê¸°ë³¸ í…œí”Œë¦¿ì€ isDefault=false
4. system_settings/globalì˜ promptê°€ ìƒˆ í…œí”Œë¦¿ ë‚´ìš©ìœ¼ë¡œ ì—…ë°ì´íŠ¸
5. ì´í›„ ìƒì„±ë˜ëŠ” ëª¨ë“  ë¦¬ë·°ê°€ ìƒˆ í…œí”Œë¦¿ ì‚¬ìš©
```

#### ê²°ê³¼
âœ… ì—¬ëŸ¬ í”„ë¡¬í”„íŠ¸ ì„¸íŠ¸ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬
âœ… í´ë¦­ í•œ ë²ˆìœ¼ë¡œ í”„ë¡¬í”„íŠ¸ ì „í™˜
âœ… ì¹´í…Œê³ ë¦¬ë³„ í…œí”Œë¦¿ ì§€ì • ì¤€ë¹„ (UI ì™„ë£Œ, ë°±ì—”ë“œ ì—°ë™ í–¥í›„ ì¶”ê°€)

---

## ğŸ“– ì‚¬ìš© ë°©ë²•

### ì²˜ìŒ ì„¤ì •

1. **ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì†**
   ```
   http://localhost:3002/admin/settings
   ```

2. **"í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿" íƒ­ í´ë¦­**

3. **ê¸°ë³¸ í…œí”Œë¦¿ ìƒì„±**
   - "ê¸°ë³¸ í…œí”Œë¦¿ 3ê°œ ìƒì„±" ë²„íŠ¼ í´ë¦­
   - ìë™ìœ¼ë¡œ 3ê°œ í…œí”Œë¦¿ ìƒì„±ë¨:
     - ê¸°ë³¸ ë¦¬ë·° (800-1500ì) â† ê¸°ë³¸ê°’
     - ì‹¬ì¸µ ë¦¬ë·° (1500-3000ì)
     - ê°„ë‹¨ ë¦¬ë·° (500-800ì)

### í…œí”Œë¦¿ í¸ì§‘

1. í¸ì§‘í•˜ê³  ì‹¶ì€ í…œí”Œë¦¿ì—ì„œ **"í¸ì§‘"** ë²„íŠ¼ í´ë¦­
2. ì›í•˜ëŠ” ë‚´ìš© ìˆ˜ì •:
   - í…œí”Œë¦¿ ì´ë¦„
   - ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
   - ë¦¬ë·° í…œí”Œë¦¿
   - ìƒì„¸ ê°€ì´ë“œë¼ì¸
   - ê¸€ì ìˆ˜ ë²”ìœ„
   - í†¤ ì ìˆ˜ ì„ê³„ê°’
   - ì¹´í…Œê³ ë¦¬ í• ë‹¹
3. **"ì €ì¥"** ë²„íŠ¼ í´ë¦­

### í…œí”Œë¦¿ ì „í™˜

1. ì‚¬ìš©í•˜ê³  ì‹¶ì€ í…œí”Œë¦¿ì—ì„œ **"ê¸°ë³¸ê°’ ì„¤ì •"** ë²„íŠ¼ í´ë¦­
2. ìë™ìœ¼ë¡œ í•´ë‹¹ í…œí”Œë¦¿ì˜ í”„ë¡¬í”„íŠ¸ê°€ ì ìš©ë¨
3. ì´í›„ ìƒì„±ë˜ëŠ” ëª¨ë“  ë¦¬ë·°ê°€ ìƒˆ í…œí”Œë¦¿ ì‚¬ìš©

### ìƒˆ í…œí”Œë¦¿ ë§Œë“¤ê¸°

1. **"+ ìƒˆ í…œí”Œë¦¿"** ë²„íŠ¼ í´ë¦­
2. ëª¨ë“  í•„ë“œ ì…ë ¥
3. **"ì €ì¥"** ë²„íŠ¼ í´ë¦­

### í…œí”Œë¦¿ ì‚­ì œ

1. ì‚­ì œí•˜ê³  ì‹¶ì€ í…œí”Œë¦¿ì—ì„œ **"ì‚­ì œ"** ë²„íŠ¼ í´ë¦­
2. í™•ì¸ í›„ ì‚­ì œ
3. âš ï¸ ê¸°ë³¸ í…œí”Œë¦¿ì€ ì‚­ì œ ë¶ˆê°€

---

## ğŸ“ í•´ì•¼ í•  ì¼

### ìš°ì„ ìˆœìœ„: ë†’ìŒ

#### 1. ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì„¤ì •
**í˜„ì¬ ìƒíƒœ**: Firebase ê¸°ë³¸ ë„ë©”ì¸ ì‚¬ìš© ì¤‘
**ëª©í‘œ**: ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²°

**ì‘ì—… ë‚´ìš©**:
1. ë„ë©”ì¸ êµ¬ë§¤ (ê°€ë¹„ì•„, í›„ì´ì¦ˆ, Namecheap ë“±)
   - ë¹„ìš©: ì—°ê°„ 1-2ë§Œì›
2. Firebase Console > Hosting > ë„ë©”ì¸ ì¶”ê°€
3. DNS ì„¤ì •
   - A ë ˆì½”ë“œ ì¶”ê°€
   - TXT ë ˆì½”ë“œ ì¶”ê°€ (ì†Œìœ ê¶Œ í™•ì¸)
4. SSL ì¸ì¦ì„œ ìë™ ë°œê¸‰ í™•ì¸ (Firebase ìë™ ì²˜ë¦¬)
5. DNS ì „íŒŒ ëŒ€ê¸° (ìµœëŒ€ 24ì‹œê°„)

**ì°¸ê³ **: Task #6ìœ¼ë¡œ ë“±ë¡ë¨

#### 2. í”„ë¡¬í”„íŠ¸ ìµœì í™”
**í˜„ì¬ ìƒíƒœ**: ê¸°ë³¸ í…œí”Œë¦¿ 3ê°œ ìƒì„±ë¨
**ë¬¸ì œì **: SEO ìµœì í™” í”„ë¡¬í”„íŠ¸ë¡œ ê°œì„  í•„ìš”

**ì‘ì—… ë‚´ìš©**:
1. "ê¸°ë³¸ ë¦¬ë·°" í…œí”Œë¦¿ í¸ì§‘
2. ë‹¤ìŒ ë‚´ìš©ìœ¼ë¡œ ì—…ë°ì´íŠ¸:

```
ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸:
ë‹¹ì‹ ì€ ë„¤ì´ë²„, êµ¬ê¸€ ê²€ìƒ‰ ìƒìœ„ ë…¸ì¶œì„ ëª©í‘œë¡œ í•˜ëŠ” ì „ë¬¸ ë¸”ë¡œê·¸ ë¦¬ë·° ì‘ì„±ìì…ë‹ˆë‹¤.

ì‘ì„± ì›ì¹™:
- ì¹œê·¼í•˜ê³  í¸ì•ˆí•œ êµ¬ì–´ì²´ ì‚¬ìš© (~í–ˆì–´ìš”, ~ë”ë¼ê³ ìš”)
- ì‹¤ì œ ì‚¬ìš© ê²½í—˜ì²˜ëŸ¼ êµ¬ì²´ì ì´ê³  ìƒìƒí•˜ê²Œ ë¬˜ì‚¬
- ìì—°ìŠ¤ëŸ½ê²Œ í‚¤ì›Œë“œ ë°°ì¹˜ (ìƒí’ˆëª…, ì¹´í…Œê³ ë¦¬, ì£¼ìš” íŠ¹ì§•)
- ê²€ìƒ‰ ì˜ë„ì— ë§ëŠ” ì •ë³´ ì œê³µ (ìŠ¤í™, ê°€ê²©, ì‚¬ìš©ê°)
- ê´‘ê³ ì„± ê³¼ì¥ í‘œí˜„ ì§€ì–‘, ì†”ì§í•œ ì¥ë‹¨ì  ì–¸ê¸‰

SEO ê³ ë ¤ì‚¬í•­:
- í•µì‹¬ í‚¤ì›Œë“œë¥¼ ì œëª©ê³¼ ì´ˆë°˜ë¶€ì— ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨
- ë‹¨ë½ êµ¬ë¶„ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ
- êµ¬ì²´ì ì¸ ìˆ˜ì¹˜ì™€ ì‚¬ì‹¤ ì •ë³´ í¬í•¨
```

```
ë¦¬ë·° í…œí”Œë¦¿:
{productName} ì†”ì§ í›„ê¸°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. ({category} ì¹´í…Œê³ ë¦¬)

ë‹¤ìŒ êµ¬ì¡°ë¡œ ì‘ì„±:

**1. ë„ì… (2-3ë¬¸ì¥)**
- ìƒí’ˆì„ êµ¬ë§¤í•˜ê²Œ ëœ ê³„ê¸°ë‚˜ ìƒí™©
- ì²«ì¸ìƒ, íŒ¨í‚¤ì§• ìƒíƒœ

**2. ì£¼ìš” íŠ¹ì§• ë° ì‚¬ìš© ê²½í—˜ (4-6ë¬¸ì¥)**
- ì‹¤ì œ ì‚¬ìš©í•´ë³¸ ëŠë‚Œ, í’ˆì§ˆ, ì„±ëŠ¥
- ë””ìì¸, í¬ê¸°, ì†Œì¬ ë“± êµ¬ì²´ì  ì„¤ëª…
- ë‹¤ë¥¸ ì œí’ˆê³¼ì˜ ì°¨ë³„ì 

**3. ì¥ì  (2-3ê°€ì§€)**
- ë§Œì¡±ìŠ¤ëŸ¬ì› ë˜ ì ì„ êµ¬ì²´ì ìœ¼ë¡œ

**4. ì•„ì‰¬ìš´ ì  (1-2ê°€ì§€)**
- ê°œì„ ë˜ë©´ ì¢‹ì„ ì ì„ ì†”ì§í•˜ê²Œ

**5. ì´í‰ ë° ì¶”ì²œ (2-3ë¬¸ì¥)**
- ì „ë°˜ì ì¸ ë§Œì¡±ë„
- ì–´ë–¤ ì‚¬ëŒì—ê²Œ ì¶”ì²œí•˜ëŠ”ì§€

ê¸€ì ìˆ˜: {minLength}ì ì´ìƒ {maxLength}ì ì´í•˜
í†¤: ì¹œê·¼í•˜ê³  ìì—°ìŠ¤ëŸ¬ìš´ êµ¬ì–´ì²´
í‚¤ì›Œë“œ: {productName}, {category} ë“±ì„ ìì—°ìŠ¤ëŸ½ê²Œ 3-5íšŒ ì–¸ê¸‰
```

3. ê¸€ì ìˆ˜ ì„¤ì •
   - ìµœì†Œ: 800ì
   - ìµœëŒ€: 1500ì

4. "ê¸°ë³¸ê°’ ì„¤ì •" í´ë¦­í•˜ì—¬ ì ìš©

#### 3. AI ì„¤ì • ìµœì í™”
**í˜„ì¬ ìƒíƒœ**: ê¸°ë³¸ ì„¤ì • ì‚¬ìš© ì¤‘
**ê¶Œì¥ ì„¤ì •**:

**AI ì„¤ì • íƒ­ì—ì„œ ë³€ê²½**:
1. **maxTokens**: 2048 â†’ **8192**ë¡œ ì¦ê°€
   - ë¦¬ë·°ê°€ ì¤‘ê°„ì— ì˜ë¦¬ëŠ” í˜„ìƒ ë°©ì§€
2. **temperature**: 0.7 ìœ ì§€ (ì ì ˆí•¨)
3. **ê¸°ë³¸ ì œê³µì**: ë¹„ìš© ê³ ë ¤ ì‹œ **Gemini Flash** ê¶Œì¥
   - ì…ë ¥ í† í° ë¹„ìš©: GPT-4oì˜ 1/33
   - í’ˆì§ˆ: ì¶©ë¶„íˆ ì¢‹ìŒ

### ìš°ì„ ìˆœìœ„: ì¤‘ê°„

#### 4. ì¹´í…Œê³ ë¦¬ë³„ í…œí”Œë¦¿ ìë™ ì„ íƒ (í–¥í›„ ê°œì„ )
**í˜„ì¬**: ê¸°ë³¸ í…œí”Œë¦¿ë§Œ ì‚¬ìš©
**ëª©í‘œ**: ì¹´í…Œê³ ë¦¬ì— ë”°ë¼ ë‹¤ë¥¸ í…œí”Œë¦¿ ìë™ ì ìš©

**êµ¬í˜„ ë°©ë²•**:
1. `functions/src/generateReview.js` ìˆ˜ì •
2. ìƒí’ˆì˜ ì¹´í…Œê³ ë¦¬ í™•ì¸
3. í•´ë‹¹ ì¹´í…Œê³ ë¦¬ê°€ ì§€ì •ëœ í…œí”Œë¦¿ ì¡°íšŒ
4. ì—†ìœ¼ë©´ ê¸°ë³¸ í…œí”Œë¦¿ ì‚¬ìš©

**ì˜ˆì‹œ ë¡œì§**:
```javascript
async function getTemplateForProduct(product) {
  // ìƒí’ˆ ì¹´í…Œê³ ë¦¬ ID
  const categoryId = product.categoryId;

  // í•´ë‹¹ ì¹´í…Œê³ ë¦¬ê°€ í• ë‹¹ëœ í…œí”Œë¦¿ ì°¾ê¸°
  const templates = await getPromptTemplates();
  const categoryTemplate = templates.find(t =>
    t.categories?.includes(categoryId)
  );

  // ìˆìœ¼ë©´ í•´ë‹¹ í…œí”Œë¦¿, ì—†ìœ¼ë©´ ê¸°ë³¸ í…œí”Œë¦¿
  return categoryTemplate || getDefaultPromptTemplate();
}
```

#### 5. í…œí”Œë¦¿ ë³µì œ ê¸°ëŠ¥
**ëª©í‘œ**: ê¸°ì¡´ í…œí”Œë¦¿ì„ ë³µì‚¬í•´ì„œ ìƒˆ í…œí”Œë¦¿ ë§Œë“¤ê¸°

**êµ¬í˜„**:
- PromptTemplates.tsxì— "ë³µì œ" ë²„íŠ¼ ì¶”ê°€
- í´ë¦­ ì‹œ í•´ë‹¹ í…œí”Œë¦¿ ë‚´ìš©ì„ ë³µì‚¬í•œ ìƒˆ í…œí”Œë¦¿ ìƒì„± í¼ ì—´ê¸°

#### 6. í…œí”Œë¦¿ ë¯¸ë¦¬ë³´ê¸°
**ëª©í‘œ**: í…œí”Œë¦¿ ì ìš© ê²°ê³¼ë¥¼ ë¯¸ë¦¬ í™•ì¸

**êµ¬í˜„**:
- TemplateEditor.tsxì— "ë¯¸ë¦¬ë³´ê¸°" íƒ­ ì¶”ê°€
- ìƒ˜í”Œ ìƒí’ˆìœ¼ë¡œ í”„ë¡¬í”„íŠ¸ê°€ ì–´ë–»ê²Œ ìƒì„±ë˜ëŠ”ì§€ í‘œì‹œ

### ìš°ì„ ìˆœìœ„: ë‚®ìŒ

#### 7. í…œí”Œë¦¿ ê°€ì ¸ì˜¤ê¸°/ë‚´ë³´ë‚´ê¸°
**ëª©í‘œ**: í…œí”Œë¦¿ì„ JSON íŒŒì¼ë¡œ ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¤ê¸°

#### 8. í…œí”Œë¦¿ ë²„ì „ ê´€ë¦¬
**ëª©í‘œ**: í…œí”Œë¦¿ ìˆ˜ì • ì´ë ¥ ì¶”ì 

---

## âš ï¸ ì¤‘ìš” ì°¸ê³ ì‚¬í•­

### í† í° ë¹„ìš©ê³¼ í”„ë¡¬í”„íŠ¸ ê¸¸ì´

#### ì‘ë™ ë°©ì‹
ë¦¬ë·° 1ê°œ ìƒì„±í•  ë•Œë§ˆë‹¤ ë‹¤ìŒì´ AIì—ê²Œ ì „ì†¡ë¨:
```
systemPrompt (ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸)
+ reviewTemplate (ë¦¬ë·° í…œí”Œë¦¿)
+ additionalGuidelines (ìƒì„¸ ê°€ì´ë“œë¼ì¸)
+ ìƒí’ˆ ì •ë³´
= ì „ì²´ ì…ë ¥ í† í°
```

#### ë¹„ìš© ê³„ì‚° ì˜ˆì‹œ

**í”„ë¡¬í”„íŠ¸ ê¸¸ì´ë³„ í† í° ì‚¬ìš©ëŸ‰** (í•œê¸€ ê¸°ì¤€):
- 2,000ì: ì•½ 1,000 í† í°
- 5,000ì: ì•½ 2,500 í† í°
- 8,000ì: ì•½ 4,000 í† í°

**í•˜ë£¨ 100ê°œ ë¦¬ë·° ìƒì„± ì‹œ ì›”ê°„ ë¹„ìš©**:

| í”„ë¡¬í”„íŠ¸ ê¸¸ì´ | GPT-4o | Claude Sonnet | Gemini Flash |
|------------|--------|---------------|--------------|
| 2,000ì (1kí† í°) | $7.5/ì›” | $9/ì›” | $0.23/ì›” |
| 5,000ì (2.5kí† í°) | $18.75/ì›” | $22.5/ì›” | $0.56/ì›” |
| 8,000ì (4kí† í°) | $30/ì›” | $36/ì›” | $0.9/ì›” |

#### ê¶Œì¥ì‚¬í•­

1. **í”„ë¡¬í”„íŠ¸ ìµœì í™” (ìµœìš°ì„ )**
   - í•µì‹¬ë§Œ ë‚¨ê¸°ê³  ë¶ˆí•„ìš”í•œ ì„¤ëª… ì œê±°
   - 2,000-3,000ì ëª©í‘œ
   - ì˜ˆì‹œëŠ” ê°„ë‹¨í•˜ê²Œ

2. **Gemini Flash ì‚¬ìš© (ê°•ë ¥ ê¶Œì¥)**
   - ì…ë ¥ í† í° ë¹„ìš©ì´ ë§¤ìš° ì €ë ´
   - 8,000ì í”„ë¡¬í”„íŠ¸ ì¨ë„ ì›” $1
   - í’ˆì§ˆë„ ì¶©ë¶„íˆ ì¢‹ìŒ

3. **ëª¨ë¸ë³„ íŠ¹ì§•**
   - **GPT-4o**: í’ˆì§ˆ ìµœê³ , ë¹„ìš© ì¤‘ê°„
   - **Claude Sonnet**: í’ˆì§ˆ ìµœê³ , ë¹„ìš© ê°€ì¥ ë†’ìŒ
   - **Gemini Flash**: í’ˆì§ˆ ìš°ìˆ˜, ë¹„ìš© ìµœì € â­ï¸

### í…œí”Œë¦¿ ê´€ë¦¬ Best Practices

1. **ê¸°ë³¸ í…œí”Œë¦¿ì€ í•­ìƒ ìœ ì§€**
   - ì‚­ì œ ë¶ˆê°€ (ì‹œìŠ¤í…œì—ì„œ ë°©ì§€)
   - í•­ìƒ í•˜ë‚˜ì˜ ê¸°ë³¸ í…œí”Œë¦¿ í•„ìš”

2. **í…œí”Œë¦¿ ì´ë¦„ ê·œì¹™**
   - ëª…í™•í•˜ê³  ì„¤ëª…ì ìœ¼ë¡œ
   - ì˜ˆ: "ê¸°ë³¸ ë¦¬ë·°", "ê°€ì „ì œí’ˆ ì‹¬ì¸µ ë¦¬ë·°", "íŒ¨ì…˜ ê°„ë‹¨ ë¦¬ë·°"

3. **ì •ê¸°ì ì¸ ìµœì í™”**
   - ìƒì„±ëœ ë¦¬ë·° í’ˆì§ˆ ëª¨ë‹ˆí„°ë§
   - í”„ë¡¬í”„íŠ¸ ê°œì„ 
   - A/B í…ŒìŠ¤íŠ¸ (í…œí”Œë¦¿ ì—¬ëŸ¬ ê°œ ë§Œë“¤ì–´ì„œ ë¹„êµ)

4. **ë°±ì—…**
   - ì¤‘ìš”í•œ í…œí”Œë¦¿ì€ ë‚´ë³´ë‚´ê¸°ë¡œ ë°±ì—… (í–¥í›„ ê¸°ëŠ¥)
   - Firestore ì½˜ì†”ì—ì„œë„ í™•ì¸ ê°€ëŠ¥

### Firestore ë°ì´í„° êµ¬ì¡°

```
Firestore
â”œâ”€ system_settings
â”‚  â””â”€ global
â”‚     â””â”€ prompt
â”‚        â”œâ”€ systemPrompt (í˜„ì¬ ì‚¬ìš© ì¤‘)
â”‚        â”œâ”€ reviewTemplate (í˜„ì¬ ì‚¬ìš© ì¤‘)
â”‚        â”œâ”€ additionalGuidelines (í˜„ì¬ ì‚¬ìš© ì¤‘)
â”‚        â”œâ”€ minLength
â”‚        â”œâ”€ maxLength
â”‚        â””â”€ toneScoreThreshold
â”‚
â””â”€ prompt_templates (ì»¬ë ‰ì…˜)
   â”œâ”€ {templateId1}
   â”‚  â”œâ”€ name: "ê¸°ë³¸ ë¦¬ë·°"
   â”‚  â”œâ”€ isDefault: true
   â”‚  â”œâ”€ systemPrompt: "..."
   â”‚  â”œâ”€ reviewTemplate: "..."
   â”‚  â””â”€ ...
   â”œâ”€ {templateId2}
   â””â”€ {templateId3}
```

**ë™ê¸°í™” ë°©ì‹**:
- í…œí”Œë¦¿ì˜ `isDefault=true` ì„¤ì • ì‹œ
- í•´ë‹¹ í…œí”Œë¦¿ ë‚´ìš©ì´ `system_settings/global/prompt`ì— ë³µì‚¬ë¨
- ë¦¬ë·° ìƒì„± ì‹œ `system_settings/global/prompt` ì‚¬ìš©

### n8n Agent ì‹œìŠ¤í…œ ê´€ë ¨

**ì§ˆë¬¸**: n8nì—ì„œ Agentë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡¬í”„íŠ¸ë¥¼ ë§¤ë²ˆ ì•ˆ ë³´ë‚´ë„ ë˜ë‚˜?

**ë‹µë³€**: ì´ë¡ ìƒ ê°€ëŠ¥í•˜ì§€ë§Œ **ì‹¤ìš©ì„± ì—†ìŒ**

**ì´ìœ **:
1. **ë³µì¡ë„ í­ë°œ**
   - n8n ì„œë²„ 24/7 ìš´ì˜ í•„ìš”
   - Agent í”„ë ˆì„ì›Œí¬, ë©”ëª¨ë¦¬ ìŠ¤í† ì–´ ê´€ë¦¬
   - ë””ë²„ê¹… ì–´ë ¤ì›€

2. **ë¹„ìš© ëŒ€ë¹„ íš¨ê³¼**
   - ì ˆê° ë¹„ìš©: ì›” $30-40
   - ì¶”ê°€ ì¸í”„ë¼: n8n í˜¸ìŠ¤íŒ… $10-50/ì›”
   - ê°œë°œ/ìœ ì§€ë³´ìˆ˜ ì‹œê°„: ìˆ˜ì‹­ ì‹œê°„
   - **ê²°ë¡ : ì•ˆë§ìŒ**

3. **AgentëŠ” ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§**
   - í˜„ì¬ ì‘ì—…: ë‹¨ìˆœ í…œí”Œë¦¿ ê¸°ë°˜ ìƒì„±
   - Agent ì í•© ì‘ì—…: ë³µì¡í•œ ë‹¤ë‹¨ê³„ ì˜ì‚¬ê²°ì •
   - ì˜ˆì¸¡ ê°€ëŠ¥ì„± ì €í•˜

**ë” ë‚˜ì€ í•´ê²°ì±…**:
1. í”„ë¡¬í”„íŠ¸ 2,000-3,000ìë¡œ ìµœì í™”
2. Gemini Flash ì‚¬ìš© (ì›” $1 ì •ë„)
3. í˜„ì¬ êµ¬ì¡° ìœ ì§€ (ë‹¨ìˆœí•˜ê³  ì•ˆì •ì )

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Firebase Cloud Functions** (Node.js 20)
  - Region: us-central1, asia-northeast3
  - `generateReview` - ë¦¬ë·° ìë™ ìƒì„±
  - `manualGenerateReview` - ìˆ˜ë™ ë¦¬ë·° ìƒì„±

- **Firestore**
  - `system_settings/global` - í˜„ì¬ í”„ë¡¬í”„íŠ¸ ì„¤ì •
  - `prompt_templates` - í…œí”Œë¦¿ ì»¬ë ‰ì…˜
  - `reviews` - ìƒì„±ëœ ë¦¬ë·°
  - `products` - ìˆ˜ì§‘ëœ ìƒí’ˆ

### Frontend
- **Next.js 15** (App Router)
- **React 19**
- **TypeScript**
- **Zustand** - í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬
- **TailwindCSS** - ìŠ¤íƒ€ì¼ë§

### AI Providers
- OpenAI (GPT-4o, GPT-4o-mini)
- Anthropic (Claude Sonnet 3.5)
- Google (Gemini 1.5 Pro, Gemini 1.5 Flash, Gemini 2.0 Flash)

---

## ğŸ“ ì£¼ìš” íŒŒì¼ ëª©ë¡

### Backend (functions/)
```
functions/src/
â”œâ”€ reviewUtils.js              # í”„ë¡¬í”„íŠ¸ ë¹Œë“œ, ê²€ì¦ ë¡œì§
â”œâ”€ generateReview.js            # ë¦¬ë·° ìƒì„± í•¨ìˆ˜
â”œâ”€ aiProviders.js               # AI ì œê³µì í†µí•©
â””â”€ services/
   â””â”€ settingsService.js        # ì„¤ì • ì¡°íšŒ
```

### Frontend (web/)
```
web/
â”œâ”€ types/
â”‚  â”œâ”€ settings.ts               # ì„¤ì • íƒ€ì…, ê¸°ë³¸ê°’
â”‚  â””â”€ promptTemplate.ts         # í…œí”Œë¦¿ íƒ€ì…, ê¸°ë³¸ í…œí”Œë¦¿ 3ê°œ
â”‚
â”œâ”€ lib/
â”‚  â””â”€ firestore.ts              # Firestore CRUD í•¨ìˆ˜
â”‚
â”œâ”€ stores/
â”‚  â””â”€ settingsStore.ts          # Zustand ì„¤ì • ìŠ¤í† ì–´
â”‚
â”œâ”€ components/admin/settings/
â”‚  â”œâ”€ SettingsView.tsx          # ì„¤ì • í˜ì´ì§€ ë©”ì¸
â”‚  â”œâ”€ PromptTemplates.tsx       # í…œí”Œë¦¿ ëª©ë¡ ê´€ë¦¬
â”‚  â””â”€ TemplateEditor.tsx        # í…œí”Œë¦¿ í¸ì§‘ê¸°
â”‚
â””â”€ app/api/settings/
   â”œâ”€ prompt-templates/
   â”‚  â””â”€ route.ts                # í…œí”Œë¦¿ CRUD API
   â”œâ”€ init-templates/
   â”‚  â””â”€ route.ts                # ê¸°ë³¸ í…œí”Œë¦¿ ì´ˆê¸°í™” API
   â””â”€ sync-template/
      â””â”€ route.ts                # í…œí”Œë¦¿ ë™ê¸°í™” API
```

---

## ğŸš€ ë°°í¬ ë°©ë²•

### Backend ë°°í¬
```bash
cd "C:\Users\sakai\OneDrive\ë°”íƒ• í™”ë©´\Coupang partnner\coupang_auto_blog"
firebase deploy --only functions
```

íŠ¹ì • í•¨ìˆ˜ë§Œ ë°°í¬:
```bash
firebase deploy --only functions:generateReview,functions:manualGenerateReview
```

### Frontend ë°°í¬
```bash
cd web
npm run build
firebase deploy --only hosting
```

### ê°œë°œ ì„œë²„
```bash
cd web
npm run dev
# http://localhost:3000 (ë˜ëŠ” 3002)
```

---

## ğŸ“ ë¬¸ì œ í•´ê²°

### í…œí”Œë¦¿ì´ ë³´ì´ì§€ ì•Šì„ ë•Œ
1. Firestore ì½˜ì†” í™•ì¸
   - `prompt_templates` ì»¬ë ‰ì…˜ ì¡´ì¬ í™•ì¸
2. "ê¸°ë³¸ í…œí”Œë¦¿ 3ê°œ ìƒì„±" ì¬í´ë¦­
3. ë¸Œë¼ìš°ì € ì½˜ì†” ì—ëŸ¬ í™•ì¸

### ë¦¬ë·°ê°€ í…œí”Œë¦¿ì„ ë°˜ì˜í•˜ì§€ ì•Šì„ ë•Œ
1. í…œí”Œë¦¿ "ê¸°ë³¸ê°’ ì„¤ì •" ë²„íŠ¼ í´ë¦­í–ˆëŠ”ì§€ í™•ì¸
2. Firestore `system_settings/global/prompt` í™•ì¸
3. Functions ì¬ë°°í¬

### ë¦¬ë·°ê°€ ì¤‘ê°„ì— ì˜ë¦´ ë•Œ
1. AI ì„¤ì • > maxTokensë¥¼ 8192ë¡œ ì¦ê°€
2. í…œí”Œë¦¿ minLength, maxLength í™•ì¸
3. AI ëª¨ë¸ ë³€ê²½ (GeminiëŠ” ê¸´ ì¶œë ¥ ê°€ëŠ¥)

---

## ğŸ“š ì¶”ê°€ ìë£Œ

- [Firestore ë¬¸ì„œ](https://firebase.google.com/docs/firestore)
- [Next.js App Router](https://nextjs.org/docs/app)
- [Zustand ë¬¸ì„œ](https://github.com/pmndrs/zustand)
- [OpenAI API](https://platform.openai.com/docs)
- [Anthropic API](https://docs.anthropic.com)
- [Google AI Studio](https://ai.google.dev)

---

**ì‘ì—… ì™„ë£Œì¼**: 2026-01-30
**ë‹¤ìŒ ê²€í† ì¼**: í”„ë¡¬í”„íŠ¸ ìµœì í™” í›„
