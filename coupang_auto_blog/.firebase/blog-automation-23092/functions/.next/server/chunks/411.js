"use strict";exports.id=411,exports.ids=[411],exports.modules={20411:(a,b,c)=>{c.d(b,{D:()=>aS});var d=c(21124),e=c(38301),f=c(42378),g=c(60262),h=c(90642);let i=[{label:"이번주 커미션",value:"₩184,500",trend:"+12% WoW"},{label:"클릭 → 주문 전환율",value:"3.4%",trend:"+0.6pp"},{label:"금일 클릭 수",value:"1,248",trend:"-4% QoQ"}],j=[{id:"fallback-1",productId:"prod_fallback_1",product:"샤오미 무선 청소기 G11",author:"auto-bot-4",status:"needs_revision",updatedAt:"2024-07-14T08:42:00+09:00",createdAt:"2024-07-14T08:00:00+09:00",toneScore:.42,charCount:128,content:"먼지통 청소와 배터리 관리 팁을 추가하면 더 완성도 있는 리뷰가 될 것 같습니다."},{id:"fallback-2",productId:"prod_fallback_2",product:"삼성 비스포크 냉장고 700L",author:"auto-bot-2",status:"draft",updatedAt:"2024-07-14T08:10:00+09:00",createdAt:"2024-07-14T07:30:00+09:00",toneScore:.58,charCount:142,content:"용량 대비 전력 효율을 강조했고, 내부 수납 구성에 대한 한줄 요약까지 준비되어 있습니다."},{id:"fallback-3",productId:"prod_fallback_3",product:"필립스 에어프라이어 5.5L",author:"manager-jy",status:"approved",updatedAt:"2024-07-14T07:55:00+09:00",createdAt:"2024-07-14T07:10:00+09:00",toneScore:.76,charCount:151,content:"에어프라이어 기본 온도 세팅과 예열 팁을 담아 초보자도 이해하기 쉽게 정리했습니다."},{id:"fallback-4",productId:"prod_fallback_4",product:"로지텍 MX Keys S",author:"manager-hs",status:"published",updatedAt:"2024-07-14T07:10:00+09:00",createdAt:"2024-07-14T06:40:00+09:00",toneScore:.83,charCount:137,content:"스위치 감도와 백라이트 반응 속도를 비교해주어 구매 전 고민 포인트를 해소해줍니다."}],k=[{level:"info",message:"review_retry_queue 작업 처리 완료",createdAt:"2024-07-14 07:58",context:"productId=prod_7831, attempt=2"},{level:"warn",message:"톤 점수 0.38 → 재생성 큐 등록",createdAt:"2024-07-14 07:47",context:"productId=prod_5421"},{level:"error",message:"Slack Webhook 응답 지연으로 재시도",createdAt:"2024-07-14 07:40",context:"retryAttempt=1"}],l=["draft","needs_revision","approved","published"],m=["info","warn","error"];function n(a){return{id:a.id,level:a.level??"info",message:a.message??"",createdAt:a.createdAt??"",context:a.context??""}}let o={"24h":864e5,"7d":6048e5,"30d":2592e6};function p(a){return"all"===a?null:new Date(Date.now()-o[a])}function q(a,b){return a?b.filter(b=>a[b]??!1):[...b]}function r(a,b){return b.map(b=>`${b}:${+!!a?.[b]}`).join("|")}var s=c(11453),t=c(33699);let u={draft:!0,needs_revision:!0,approved:!0,published:!0},v={info:!0,warn:!0,error:!0},w=(0,s.v)((0,t.Zr)(a=>({reviewStatuses:u,reviewLimitFilter:12,reviewSearch:"",reviewDateFilter:"all",selectedReviewId:null,logLevels:v,logSearch:"",logDateFilter:"all",reviewPageIndex:0,logPageIndex:0,setReviewStatus:(b,c)=>a(a=>({reviewStatuses:{...a.reviewStatuses,[b]:c}})),setReviewStatuses:b=>a(()=>({reviewStatuses:b})),setReviewLimitFilter:b=>a(()=>({reviewLimitFilter:b})),setReviewSearch:b=>a(()=>({reviewSearch:b})),setReviewDateFilter:b=>a(()=>({reviewDateFilter:b})),setSelectedReview:b=>a(()=>({selectedReviewId:b})),setLogLevel:(b,c)=>a(a=>({logLevels:{...a.logLevels,[b]:c}})),setLogLevels:b=>a(()=>({logLevels:b})),setLogSearch:b=>a(()=>({logSearch:b})),setLogDateFilter:b=>a(()=>({logDateFilter:b})),setReviewPageIndex:b=>a(()=>({reviewPageIndex:b})),setLogPageIndex:b=>a(()=>({logPageIndex:b}))}),{name:"admin-dashboard-store",partialize:a=>({reviewStatuses:a.reviewStatuses,reviewLimitFilter:a.reviewLimitFilter,reviewSearch:a.reviewSearch,reviewDateFilter:a.reviewDateFilter,selectedReviewId:a.selectedReviewId,logLevels:a.logLevels,logSearch:a.logSearch,logDateFilter:a.logDateFilter,reviewPageIndex:a.reviewPageIndex,logPageIndex:a.logPageIndex})}));var x=c(21393),y=c(96610),z=c(72124);let A={all:["reviews"],lists:()=>[...A.all,"list"],list:a=>[...A.lists(),a],details:()=>[...A.all,"detail"],detail:a=>[...A.details(),a]};var B=c(69477),C=c(93165);async function D(a,b="reviews"){let{app:c}=await (0,C.w)(),d=(0,B.c7)(c),e=Date.now(),f=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),g=`${b}/${e}_${f}`,h=(0,B.KR)(d,g),i=await (0,B.D)(h,a);return{url:await (0,B.qk)(i.ref),path:g,name:a.name,type:a.type,size:a.size}}async function E(a){let{app:b}=await (0,C.w)(),c=(0,B.c7)(b),d=(0,B.KR)(c,a);await (0,B.XR)(d)}var F=c(53603),G=c(40727),H=c(8842),I=c(72576),J=c(76126),K=c(93130),L=c(61248),M=c(22509),N=c(31896),O=c(80950),P=c(55416),Q=c(26719);let R=N.XI.extend({addAttributes(){return{...this.parent?.(),style:{default:null,parseHTML:a=>a.getAttribute("style"),renderHTML:a=>a.style?{style:a.style}:{}},border:{default:null,parseHTML:a=>a.getAttribute("border"),renderHTML:a=>a.border?{border:a.border}:{}},cellpadding:{default:null,parseHTML:a=>a.getAttribute("cellpadding"),renderHTML:a=>a.cellpadding?{cellpadding:a.cellpadding}:{}},cellspacing:{default:null,parseHTML:a=>a.getAttribute("cellspacing"),renderHTML:a=>a.cellspacing?{cellspacing:a.cellspacing}:{}},width:{default:null,parseHTML:a=>a.getAttribute("width"),renderHTML:a=>a.width?{width:a.width}:{}}}}}),S=O.H.extend({addAttributes(){return{...this.parent?.(),style:{default:null,parseHTML:a=>a.getAttribute("style"),renderHTML:a=>a.style?{style:a.style}:{}}}}}),T=P.n.extend({addAttributes(){return{...this.parent?.(),style:{default:null,parseHTML:a=>a.getAttribute("style"),renderHTML:a=>a.style?{style:a.style}:{}},width:{default:null,parseHTML:a=>a.getAttribute("width"),renderHTML:a=>a.width?{width:a.width}:{}},colspan:{default:null,parseHTML:a=>a.getAttribute("colspan"),renderHTML:a=>a.colspan?{colspan:a.colspan}:{}},rowspan:{default:null,parseHTML:a=>a.getAttribute("rowspan"),renderHTML:a=>a.rowspan?{rowspan:a.rowspan}:{}},valign:{default:null,parseHTML:a=>a.getAttribute("valign"),renderHTML:a=>a.valign?{valign:a.valign}:{}},align:{default:null,parseHTML:a=>a.getAttribute("align"),renderHTML:a=>a.align?{align:a.align}:{}},bgcolor:{default:null,parseHTML:a=>a.getAttribute("bgcolor"),renderHTML:a=>a.bgcolor?{bgcolor:a.bgcolor}:{}}}}}),U=Q.A.extend({addAttributes(){return{...this.parent?.(),style:{default:null,parseHTML:a=>a.getAttribute("style"),renderHTML:a=>a.style?{style:a.style}:{}},width:{default:null,parseHTML:a=>a.getAttribute("width"),renderHTML:a=>a.width?{width:a.width}:{}},colspan:{default:null,parseHTML:a=>a.getAttribute("colspan"),renderHTML:a=>a.colspan?{colspan:a.colspan}:{}},rowspan:{default:null,parseHTML:a=>a.getAttribute("rowspan"),renderHTML:a=>a.rowspan?{rowspan:a.rowspan}:{}}}}});function V({onClick:a,isActive:b=!1,disabled:c=!1,title:e,children:f}){return(0,d.jsx)("button",{type:"button",onClick:a,disabled:c,title:e,className:`p-2 rounded-lg transition ${b?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100"} ${c?"opacity-50 cursor-not-allowed":""}`,children:f})}function W(){return(0,d.jsx)("div",{className:"w-px h-6 bg-slate-200 mx-1"})}function X({editor:a,onImageUpload:b,isHtmlMode:c,onToggleHtmlMode:f}){let g=(0,e.useCallback)(()=>{if(!a)return;let b=window.prompt("YouTube URL을 입력하세요:");b&&a.commands.setYoutubeVideo({src:b})},[a]),h=(0,e.useCallback)(()=>{if(!a)return;let b=a.getAttributes("link").href,c=window.prompt("링크 URL을 입력하세요:",b);if(null!==c){if(""===c)return void a.chain().focus().extendMarkRange("link").unsetLink().run();a.chain().focus().extendMarkRange("link").setLink({href:c}).run()}},[a]),i=(0,e.useCallback)(()=>{if(!a)return;let b=window.prompt("이미지 URL을 입력하세요:");b&&a.chain().focus().setImage({src:b}).run()},[a]);return a||c?(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-slate-200 bg-slate-50 rounded-t-xl",children:[!c&&a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleBold().run(),isActive:a.isActive("bold"),title:"굵게 (Ctrl+B)",children:(0,d.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z"})]})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleItalic().run(),isActive:a.isActive("italic"),title:"기울임 (Ctrl+I)",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 4h4m-2 0l-4 16m0 0h4"})})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleUnderline().run(),isActive:a.isActive("underline"),title:"밑줄 (Ctrl+U)",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v7a5 5 0 0010 0V4M5 20h14"})})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleStrike().run(),isActive:a.isActive("strike"),title:"취소선",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v4m0 4v8M4 12h16"})})}),(0,d.jsx)(W,{}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleHeading({level:1}).run(),isActive:a.isActive("heading",{level:1}),title:"제목 1 (H1)",children:(0,d.jsx)("span",{className:"text-sm font-bold",children:"H1"})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleHeading({level:2}).run(),isActive:a.isActive("heading",{level:2}),title:"제목 2 (H2)",children:(0,d.jsx)("span",{className:"text-sm font-bold",children:"H2"})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleHeading({level:3}).run(),isActive:a.isActive("heading",{level:3}),title:"제목 3 (H3)",children:(0,d.jsx)("span",{className:"text-sm font-bold",children:"H3"})}),(0,d.jsx)(W,{}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleBulletList().run(),isActive:a.isActive("bulletList"),title:"글머리 기호",children:(0,d.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"}),(0,d.jsx)("circle",{cx:"2",cy:"6",r:"1",fill:"currentColor"}),(0,d.jsx)("circle",{cx:"2",cy:"12",r:"1",fill:"currentColor"}),(0,d.jsx)("circle",{cx:"2",cy:"18",r:"1",fill:"currentColor"})]})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleOrderedList().run(),isActive:a.isActive("orderedList"),title:"번호 매기기",children:(0,d.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 6h13M7 12h13M7 18h13"}),(0,d.jsx)("text",{x:"1",y:"8",fontSize:"6",fill:"currentColor",children:"1"}),(0,d.jsx)("text",{x:"1",y:"14",fontSize:"6",fill:"currentColor",children:"2"}),(0,d.jsx)("text",{x:"1",y:"20",fontSize:"6",fill:"currentColor",children:"3"})]})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().toggleBlockquote().run(),isActive:a.isActive("blockquote"),title:"인용구",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4l-4 4z"})})}),(0,d.jsx)(W,{}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().setTextAlign("left").run(),isActive:a.isActive({textAlign:"left"}),title:"왼쪽 정렬",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h10M4 18h14"})})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().setTextAlign("center").run(),isActive:a.isActive({textAlign:"center"}),title:"가운데 정렬",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M7 12h10M5 18h14"})})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().setTextAlign("right").run(),isActive:a.isActive({textAlign:"right"}),title:"오른쪽 정렬",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M10 12h10M6 18h14"})})}),(0,d.jsx)(W,{}),(0,d.jsx)(V,{onClick:h,isActive:a.isActive("link"),title:"링크 추가",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),b&&(0,d.jsx)(V,{onClick:b,title:"이미지 업로드",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,d.jsx)(V,{onClick:i,title:"이미지 URL",children:(0,d.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})]})}),(0,d.jsx)(V,{onClick:g,title:"YouTube 영상",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})}),(0,d.jsx)(W,{}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().undo().run(),disabled:!a.can().undo(),title:"실행 취소 (Ctrl+Z)",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),(0,d.jsx)(V,{onClick:()=>a.chain().focus().redo().run(),disabled:!a.can().redo(),title:"다시 실행 (Ctrl+Y)",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10H11a8 8 0 00-8 8v2m18-10l-6 6m6-6l-6-6"})})}),(0,d.jsx)(W,{})]}),c&&(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-medium text-amber-700 bg-amber-100 rounded",children:"HTML 소스 편집 모드"}),(0,d.jsx)(V,{onClick:f,isActive:c,title:c?"에디터 보기":"HTML 소스 보기",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})})]}):null}function Y({content:a,onChange:b,placeholder:c="내용을 입력하세요...",onImageUpload:f}){let[g,h]=(0,e.useState)(()=>(function(a){if(!a)return!1;let b=/<table[\s>]/i.test(a),c=(a.match(/style\s*=/gi)||[]).length,d=(a.match(/<table[\s>]/gi)||[]).length;return b&&(c>5||d>1)})(a)),[i,j]=(0,e.useState)(a),k=(0,e.useRef)(!1),l=(0,e.useRef)(!1),m=(0,F.hG)({immediatelyRender:!1,extensions:[G.A.configure({heading:{levels:[1,2,3]}}),M.A,H.Ay.configure({HTMLAttributes:{class:"rounded-lg max-w-full h-auto my-4"}}),I.Ay.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline hover:text-blue-800"}}),J.A.configure({width:640,height:360,HTMLAttributes:{class:"rounded-lg my-4 mx-auto"}}),K.A.configure({placeholder:c}),L.A.configure({types:["heading","paragraph"]}),R.configure({resizable:!1}),S,U,T],content:g?"":a||"",editorProps:{attributes:{class:"prose prose-slate max-w-none min-h-[300px] p-4 focus:outline-none"}},onUpdate:({editor:a})=>{k.current=!0,b(a.getHTML())},onCreate:({editor:b})=>{if(g){l.current=!0;return}if(a&&!l.current)try{b.commands.setContent(a),l.current=!0}catch(a){console.error("초기 콘텐츠 설정 중 오류:",a),h(!0)}}});(0,e.useCallback)(a=>{m&&m.chain().focus().setImage({src:a}).run()},[m]);let n=(0,e.useCallback)(()=>{if(g){if(m)try{m.commands.setContent(i),b(i),h(!1)}catch(a){console.error("HTML을 에디터에 적용하는 중 오류 발생:",a),alert("이 HTML은 WYSIWYG 에디터에서 지원하지 않는 형식입니다. HTML 소스 모드에서 편집해주세요.")}}else m&&j(m.getHTML()),h(!0)},[g,i,m,b]),o=(0,e.useCallback)(a=>{let c=a.target.value;j(c),b(c)},[b]);return(0,d.jsxs)("div",{className:"border border-slate-200 rounded-xl overflow-hidden bg-white",children:[(0,d.jsx)(X,{editor:m,onImageUpload:f,isHtmlMode:g,onToggleHtmlMode:n}),g?(0,d.jsx)("textarea",{value:i,onChange:o,className:"w-full min-h-[300px] p-4 font-mono text-sm text-slate-800 bg-slate-50 focus:outline-none resize-none",placeholder:"HTML 코드를 입력하세요..."}):(0,d.jsx)(F.$Z,{editor:m})]})}let Z=[{value:"",label:"카테고리 선택"},{value:"lifestyle",label:"라이프스타일"},{value:"digital",label:"디지털/가전"},{value:"kitchen",label:"주방/쿠킹"},{value:"fashion",label:"패션/뷰티"},{value:"food",label:"식품"},{value:"baby",label:"유아/아동"},{value:"sports",label:"스포츠/레저"},{value:"etc",label:"기타"}],$=[{value:"draft",label:"초안"},{value:"needs_revision",label:"재검수 필요"},{value:"approved",label:"승인 완료"},{value:"published",label:"게시 완료"}];function _({isOpen:a,onClose:b,reviewId:c,onSaved:f}){let[i,j]=(0,e.useState)(""),[k,l]=(0,e.useState)(""),[m,n]=(0,e.useState)(""),[o,p]=(0,e.useState)(""),[q,r]=(0,e.useState)("draft"),[s,t]=(0,e.useState)([]),[u,v]=(0,e.useState)(!1),[w,B]=(0,e.useState)(null),[C,F]=(0,e.useState)(null),[G,H]=(0,e.useState)(0),I=(0,e.useRef)(null),J=!!c,{data:K,isLoading:L,error:M}=function(a){let{status:b}=(0,g.D)();return(0,x.I)({queryKey:A.detail(a??""),queryFn:async()=>a?(0,h.RV)(a):null,enabled:!!a&&"ready"===b,staleTime:6e4})}(a?c:null),N=function(){let a=(0,y.jE)();return(0,z.n)({mutationFn:async a=>await (0,h.bx)(a),onSuccess:()=>{a.invalidateQueries({queryKey:A.lists()})}})}(),O=function(){let a=(0,y.jE)();return(0,z.n)({mutationFn:async({reviewId:a,input:b})=>(await (0,h.Gm)(a,b),a),onSuccess:b=>{a.invalidateQueries({queryKey:A.lists()}),a.invalidateQueries({queryKey:A.detail(b)})}})}(),P=N.isPending||O.isPending,Q=(0,e.useCallback)(async a=>{if(!a||0===a.length)return;v(!0),B(null);let b=[];for(let c=0;c<a.length;c++){let d=a[c];if(F(`업로드 중... (${c+1}/${a.length})`),!["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","video/quicktime"].includes(d.type)){B(`지원하지 않는 파일 형식입니다: ${d.name}`);continue}if(!function(a,b=50){return a.size<=1024*b*1024}(d,50)){B(`파일 크기가 50MB를 초과합니다: ${d.name}`);continue}try{let a=await D(d,"reviews"),c={url:a.url,path:a.path,name:a.name,type:d.type.startsWith("video/")?"video":"image",size:a.size};b.push(c),c.type}catch(a){console.error("파일 업로드 실패:",a),B(`파일 업로드 실패: ${d.name}`)}}b.length>0&&t(a=>[...a,...b]),v(!1),F(null),I.current&&(I.current.value="")},[]),R=(0,e.useCallback)(async a=>{let b=s[a];if(b){try{await E(b.path)}catch(a){console.warn("Storage 파일 삭제 실패:",a)}t(b=>b.filter((b,c)=>c!==a))}},[s]),S=(0,e.useCallback)(a=>{},[]),T=(0,e.useCallback)(async()=>{if(!i.trim())return void B("상품명을 입력해주세요.");if(!k.trim()||"<p></p>"===k)return void B("리뷰 내용을 입력해주세요.");B(null);let a={productName:i.trim(),content:k.trim(),category:m,affiliateUrl:o.trim(),status:q,media:s};try{c?await O.mutateAsync({reviewId:c,input:a}):await N.mutateAsync(a),f?.(),b()}catch(a){console.error("저장 실패:",a),B("저장 중 오류가 발생했습니다.")}},[i,k,m,o,q,s,c,N,O,f,b]),U=(0,e.useCallback)(a=>{a.preventDefault(),Q(a.dataTransfer.files)},[Q]),V=(0,e.useCallback)(a=>{a.preventDefault()},[]),W=(0,e.useCallback)(()=>{I.current?.click()},[]);return a?(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:b}),(0,d.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:J?"리뷰 수정":"새 리뷰 작성"}),(0,d.jsx)("button",{type:"button",onClick:b,className:"p-2 rounded-full hover:bg-slate-100 transition",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:L?(0,d.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-slate-900"})}):(0,d.jsxs)("div",{className:"space-y-6",children:[w&&(0,d.jsx)("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700",children:w}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["상품명 ",(0,d.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),placeholder:"상품 이름을 입력하세요",className:"w-full rounded-xl border border-slate-200 px-4 py-3 text-slate-900 placeholder:text-slate-400 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"카테고리"}),(0,d.jsx)("select",{value:m,onChange:a=>n(a.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-3 text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200",children:Z.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"상태"}),(0,d.jsx)("select",{value:q,onChange:a=>r(a.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-3 text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200",children:$.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"쿠팡 파트너스 링크"}),(0,d.jsx)("input",{type:"url",value:o,onChange:a=>p(a.target.value),placeholder:"https://link.coupang.com/...",className:"w-full rounded-xl border border-slate-200 px-4 py-3 text-slate-900 placeholder:text-slate-400 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200"})]}),(0,d.jsx)("input",{ref:I,type:"file",accept:"image/*,video/*",multiple:!0,onChange:a=>Q(a.target.files),className:"hidden"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["리뷰 내용 ",(0,d.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,d.jsx)(Y,{content:k,onChange:l,placeholder:"상품에 대한 리뷰를 작성하세요...",onImageUpload:W},G),(0,d.jsxs)("p",{className:"mt-2 text-xs text-slate-500",children:["글자 수: ",k.replace(/<[^>]*>/g,"").length,"자 | 툴바에서 제목, 굵게, 이미지, 링크 등을 추가할 수 있습니다"]})]}),u&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-600"}),C]}),s.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["업로드된 미디어 (",s.length,"개)"]}),(0,d.jsxs)("div",{onDrop:U,onDragOver:V,className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 p-3 rounded-xl border-2 border-dashed border-slate-200 bg-slate-50/50",children:[s.map((a,b)=>(0,d.jsxs)("div",{className:"relative group rounded-xl overflow-hidden border border-slate-200 bg-white",children:["image"===a.type?(0,d.jsx)("img",{src:a.url,alt:a.name,className:"w-full h-24 object-cover"}):(0,d.jsx)("div",{className:"w-full h-24 flex items-center justify-center bg-slate-100",children:(0,d.jsxs)("svg",{className:"w-8 h-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),(0,d.jsxs)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition flex items-center justify-center gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>S(a),className:"p-1.5 rounded-full bg-white text-slate-700 hover:bg-slate-100",title:"본문에 삽입",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,d.jsx)("button",{type:"button",onClick:()=>R(b),className:"p-1.5 rounded-full bg-white text-rose-600 hover:bg-rose-50",title:"삭제",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,d.jsxs)("p",{className:"px-2 py-1 text-xs text-slate-500 truncate",children:[a.name," (",function(a){if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,b)).toFixed(2))+" "+["Bytes","KB","MB","GB"][b]}(a.size),")"]})]},a.path)),(0,d.jsxs)("label",{className:"flex flex-col items-center justify-center h-24 rounded-xl border-2 border-dashed border-slate-200 bg-white cursor-pointer hover:border-slate-300 hover:bg-slate-50 transition",children:[(0,d.jsx)("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:a=>Q(a.target.files),className:"hidden"}),(0,d.jsx)("svg",{className:"w-6 h-6 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,d.jsx)("span",{className:"mt-1 text-xs text-slate-400",children:"추가"})]})]})]})]})}),(0,d.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-200 bg-slate-50",children:[(0,d.jsx)("button",{type:"button",onClick:b,className:"px-5 py-2.5 rounded-xl border border-slate-200 text-sm font-semibold text-slate-700 hover:bg-white transition",children:"취소"}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[J&&(0,d.jsxs)("span",{className:"text-xs text-slate-500",children:["수정 중인 리뷰: ",c?.slice(0,8),"..."]}),(0,d.jsx)("button",{type:"button",onClick:T,disabled:P||u,className:"px-6 py-2.5 rounded-xl bg-slate-900 text-sm font-semibold text-white hover:bg-slate-800 transition disabled:opacity-50 disabled:cursor-not-allowed",children:P?"저장 중...":J?"수정 완료":"리뷰 등록"})]})]})]})]}):null}var aa=c(13328);function ab(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}${c}${d}`}function ac(a){let b=new Map;return a.forEach(a=>{b.has(a.date)||b.set(a.date,a)}),Array.from(b.values())}async function ad(a){let b=await fetch("/api/coupang/reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("리포트 조회 실패");let c=await b.json();if(!c.success)throw Error(c.message||"리포트 조회 실패");return c.data}function ae(a=30){let{settings:b}=(0,aa.C)(),{coupang:c}=b,d=ab(new Date),e=ab(function(a){let b=new Date;return b.setDate(b.getDate()-a),b}(a)),f=c.enabled&&!!c.accessKey&&!!c.secretKey,g=(0,x.I)({queryKey:["coupang-reports","clicks",e,d],queryFn:()=>ad({accessKey:c.accessKey,secretKey:c.secretKey,reportType:"clicks",startDate:e,endDate:d}),enabled:f,staleTime:9e5,gcTime:36e5,retry:1}),h=(0,x.I)({queryKey:["coupang-reports","orders",e,d],queryFn:()=>ad({accessKey:c.accessKey,secretKey:c.secretKey,reportType:"orders",startDate:e,endDate:d}),enabled:f,staleTime:9e5,gcTime:36e5,retry:1}),i=(0,x.I)({queryKey:["coupang-reports","cancels",e,d],queryFn:()=>ad({accessKey:c.accessKey,secretKey:c.secretKey,reportType:"cancels",startDate:e,endDate:d}),enabled:f,staleTime:9e5,gcTime:36e5,retry:1}),j=(0,x.I)({queryKey:["coupang-reports","commission",e,d],queryFn:()=>ad({accessKey:c.accessKey,secretKey:c.secretKey,reportType:"commission",startDate:e,endDate:d}),enabled:f,staleTime:9e5,gcTime:36e5,retry:1}),k=j.data&&i.data?{totalClicks:ac(j.data).reduce((a,b)=>a+(b.clicks??0),0),totalOrders:ac(j.data).reduce((a,b)=>a+(b.orders??0),0),totalGmv:ac(j.data).reduce((a,b)=>a+(b.gmv??0),0),totalCommission:ac(j.data).reduce((a,b)=>a+(b.commission??0),0),totalCancels:ac(i.data).reduce((a,b)=>a+(b.cancelCnt??0),0),period:{startDate:e,endDate:d}}:null,l=g.isLoading||h.isLoading||i.isLoading||j.isLoading,m=g.error||h.error||i.error||j.error;return{clicks:ac(g.data??[]),orders:ac(h.data??[]),cancels:ac(i.data??[]),commission:ac(j.data??[]),summary:k,isEnabled:f,isLoading:l,error:m instanceof Error?m.message:m?"리포트 조회 실패":null,refetch:()=>{g.refetch(),h.refetch(),i.refetch(),j.refetch()}}}function af(a){return`${a.toFixed(1)}%`}function ag(){let a=new Date,b=a.getDay(),c=new Date(a);c.setDate(a.getDate()+(0===b?-6:1-b)),c.setHours(0,0,0,0);let d=new Date(c);return d.setDate(c.getDate()+6),d.setHours(23,59,59,999),{start:c,end:d}}function ah(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}${c}${d}`}let ai={draft:"bg-sky-100 text-sky-700 border-sky-200",needs_revision:"bg-amber-100 text-amber-700 border-amber-200",approved:"bg-emerald-100 text-emerald-700 border-emerald-200",published:"bg-slate-100 text-slate-700 border-slate-200"},aj={draft:"초안",needs_revision:"재검수 필요",approved:"승인 완료",published:"게시 완료"},ak=["draft","needs_revision","approved","published"],al={info:"border-sky-200 bg-sky-50 text-sky-800",warn:"border-amber-200 bg-amber-50 text-amber-800",error:"border-rose-200 bg-rose-50 text-rose-800"},am=["info","warn","error"],an={draft:[{label:"승인",nextStatus:"approved",tone:"primary"},{label:"재검수 요청",nextStatus:"needs_revision",tone:"secondary"}],needs_revision:[{label:"재승인",nextStatus:"approved",tone:"primary"},{label:"임시 저장",nextStatus:"draft",tone:"secondary"}],approved:[{label:"게시",nextStatus:"published",tone:"primary"},{label:"재검수 요청",nextStatus:"needs_revision",tone:"secondary"}],published:[{label:"승인 단계로 되돌리기",nextStatus:"approved",tone:"secondary"}]},ao={primary:"bg-slate-900 text-white hover:bg-slate-800",secondary:"border border-slate-200 text-slate-700 hover:bg-slate-100",danger:"border border-rose-200 text-rose-600 hover:bg-rose-50"},ap=[{value:"all",label:"전체"},{value:"24h",label:"24시간"},{value:"7d",label:"7일"},{value:"30d",label:"30일"}],aq={"24h":864e5,"7d":6048e5,"30d":2592e6},ar={overview:{title:"쿠팡 파트너스 자동화 대시보드",description:"수집–생성–검수–발행까지 이어지는 AI 리뷰 파이프라인과 로그를 한 화면에서 점검하세요."},reviews:{title:"리뷰 승인 워크플로우",description:"상태, 검색, 기간 필터로 AI 리뷰 초안을 검토하고 단건/일괄 승인 흐름을 관리합니다."},logs:{title:"자동화 로그 탐색",description:"Cloud Functions, Firestore Trigger, Slack 알림 로그를 검색\xb7필터링하며 안정성을 모니터링합니다."}},as=[{time:"02:00",title:"상품 자동 수집",description:"쿠팡 API에서 신규 상품 메타 데이터를 가져옵니다."},{time:"02:10",title:"AI 후기 생성",description:"OpenAI를 호출해 초안을 만들고 품질 규칙을 통과한 것만 저장합니다."},{time:"09:10",title:"승인 즉시 게시",description:"관리자 승인이 떨어지면 ISR 페이지와 sitemap을 자동 갱신합니다."},{time:"18:00",title:"수익 통계 갱신",description:"클릭/주문 데이터를 Firestore에 집계하고 로그로 추적합니다."}],at=[{icon:"\uD83D\uDD04",label:"자동 수집 & 재시도 큐",description:"상품 수집 실패 시 자동으로 재시도합니다."},{icon:"\uD83E\uDD16",label:"OpenAI 품질 규칙",description:"톤 점수, 글자 수 검증을 통과한 리뷰만 저장됩니다."},{icon:"\uD83D\uDCCA",label:"수익 대시보드",description:"클릭, 주문, 커미션을 실시간으로 추적합니다."},{icon:"\uD83D\uDD14",label:"Slack 알림",description:"오류 발생 시 즉시 Slack으로 알림을 받습니다."}];function au(a){if(!a)return"-";let b=new Date(a);return Number.isNaN(b.getTime())?a:new Intl.DateTimeFormat("ko-KR",{dateStyle:"medium",timeStyle:"short"}).format(b)}function av({reviews:a,selectedReviewId:b,selectedReviewIds:c,isInteractive:f,pendingReviewId:g,onRowSelect:h,onToggleSelection:i,onSelectAll:j,onStatusChange:k,onEditReview:l}){let m=(0,e.useRef)(null),n=a.filter(a=>!!a.id),o=n.length>0&&n.every(a=>a.id&&c.includes(a.id));c.length;let p=(0,e.useCallback)(a=>{h(a)},[h]);return(0,d.jsx)("div",{className:"overflow-hidden rounded-2xl border border-slate-100",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 text-left text-sm text-slate-700",children:[(0,d.jsx)("thead",{className:"bg-slate-50 text-xs uppercase tracking-wide text-slate-500",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3",children:(0,d.jsx)("input",{ref:m,type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-slate-900 focus:ring-slate-500",checked:o,onChange:a=>j(a.target.checked)})}),(0,d.jsx)("th",{className:"px-4 py-3",children:"상품"}),(0,d.jsx)("th",{className:"px-4 py-3",children:"작성자"}),(0,d.jsx)("th",{className:"px-4 py-3",children:"상태"}),(0,d.jsx)("th",{className:"px-4 py-3",children:"업데이트"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right",children:"조치"})]})}),(0,d.jsxs)("tbody",{className:"divide-y divide-slate-100 bg-white",children:[a.map(a=>(0,d.jsxs)("tr",{className:`cursor-pointer transition hover:bg-slate-50/60 ${b===a.id?"bg-slate-100/80":""}`,onClick:()=>p(a),children:[(0,d.jsx)("td",{className:"px-4 py-3",children:a.id?(0,d.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-slate-900 focus:ring-slate-500",checked:c.includes(a.id),onChange:b=>i(a.id,b.target.checked),onClick:a=>a.stopPropagation()}):(0,d.jsx)("span",{className:"text-xs text-slate-400",children:"-"})}),(0,d.jsx)("td",{className:"px-4 py-3 font-medium text-slate-900",children:a.product}),(0,d.jsx)("td",{className:"px-4 py-3 text-sm text-slate-600",children:a.author}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("span",{className:`inline-flex rounded-full border px-3 py-1 text-xs font-semibold ${ai[a.status]}`,children:aj[a.status]??a.status})}),(0,d.jsx)("td",{className:"px-4 py-3 text-xs text-slate-500",children:au(a.updatedAt)}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsxs)("div",{className:"flex flex-wrap justify-end gap-2",children:[a.id&&(0,d.jsx)("button",{type:"button",className:"rounded-full border border-blue-200 px-3 py-1 text-xs font-semibold text-blue-600 transition hover:bg-blue-50",onClick:b=>{b.stopPropagation(),l(a.id)},children:"편집"}),an[a.status].map(b=>{let c=!f||g===a.id||!a.id;return(0,d.jsx)("button",{type:"button",className:`rounded-full px-3 py-1 text-xs font-semibold transition ${ao[b.tone]} ${c?"cursor-not-allowed opacity-50":""}`,disabled:c,onClick:c=>{c.stopPropagation(),k(a.id,a.product,b.nextStatus)},children:g===a.id?"처리 중…":b.label},`${a.product}-${b.nextStatus}`)})]})})]},a.id??`${a.product}-${a.updatedAt}`)),0===a.length&&(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:6,className:"px-4 py-6 text-center text-xs text-slate-500",children:"선택된 필터에 해당하는 리뷰가 없습니다."})})]})]})})}function aw({review:a}){return a?(0,d.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-5",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"선택한 리뷰 상세"}),(0,d.jsxs)("p",{className:"text-xs text-slate-500",children:["상품 ID: ",(0,d.jsx)("span",{className:"font-mono text-slate-700",children:a.productId??"-"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-600",children:[(0,d.jsx)("span",{children:"톤 점수"}),(0,d.jsx)("span",{className:"rounded-full bg-white px-3 py-1 font-semibold text-slate-900",children:a.toneScore??"-"}),(0,d.jsx)("span",{children:"글자 수"}),(0,d.jsx)("span",{className:"rounded-full bg-white px-3 py-1 font-semibold text-slate-900",children:a.charCount??"-"})]})]}),(0,d.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-700 shadow-sm review-content max-w-none overflow-auto",dangerouslySetInnerHTML:{__html:a.content??"<p>리뷰 본문이 없습니다.</p>"}}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-slate-500",children:[(0,d.jsxs)("span",{children:["생성: ",a.createdAt?au(a.createdAt):"-"]}),(0,d.jsxs)("span",{children:["최근 업데이트: ",a.updatedAt?au(a.updatedAt):"-"]})]})]})}):(0,d.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-5",children:(0,d.jsx)("p",{className:"text-sm text-slate-500",children:"테이블에서 행을 선택하면 리뷰 본문과 메타 정보를 확인할 수 있습니다."})})}function ax({logs:a}){return 0===a.length?(0,d.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50/60 px-4 py-6 text-center text-xs text-slate-500",children:"조건에 해당하는 로그가 없습니다. 필터를 조정하거나 검색어를 지워보세요."}):(0,d.jsx)("div",{className:"grid gap-3 lg:grid-cols-3",children:a.map(a=>(0,d.jsxs)("article",{className:`rounded-2xl border px-4 py-4 shadow-sm ${al[a.level]}`,children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-wide",children:[(0,d.jsx)("span",{children:a.level}),(0,d.jsx)("span",{className:"font-mono text-[11px] opacity-70",children:a.createdAt})]}),(0,d.jsx)("p",{className:"mt-2 text-sm font-semibold",children:a.message}),(0,d.jsx)("p",{className:"mt-1 text-xs opacity-80",children:a.context})]},`${a.createdAt}-${a.message}`))})}function ay({metrics:a}){return(0,d.jsx)("section",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(a=>(0,d.jsxs)("article",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",children:[(0,d.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:a.label}),(0,d.jsx)("p",{className:"mt-3 text-3xl font-bold text-slate-900",children:a.value}),a.trend?(0,d.jsx)("p",{className:"mt-2 text-xs text-emerald-600",children:a.trend}):null]},a.label??a.id))})}function az(){return(0,d.jsxs)("section",{className:"grid gap-6 lg:grid-cols-2",children:[(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"자동화 타임라인"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"일일 자동화 루틴 스케줄 (Asia/Seoul)"})]}),(0,d.jsx)("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-xs font-medium text-emerald-700",children:"활성화됨"})]}),(0,d.jsx)("ul",{className:"space-y-3",children:as.map(a=>(0,d.jsxs)("li",{className:"rounded-xl border border-slate-100 bg-slate-50/50 p-4",children:[(0,d.jsxs)("div",{className:"flex items-baseline gap-3",children:[(0,d.jsx)("span",{className:"rounded-full bg-slate-900 px-2.5 py-1 text-xs font-mono font-semibold text-white",children:a.time}),(0,d.jsx)("span",{className:"text-sm font-semibold text-slate-900",children:a.title})]}),(0,d.jsx)("p",{className:"mt-2 text-xs text-slate-600 pl-14",children:a.description})]},a.time))})]}),(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"시스템 기능"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"현재 활성화된 자동화 기능 목록"})]}),(0,d.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:at.map(a=>(0,d.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-slate-50/50 p-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)("span",{className:"text-lg",children:a.icon}),(0,d.jsx)("span",{className:"text-sm font-semibold text-slate-900",children:a.label})]}),(0,d.jsx)("p",{className:"text-xs text-slate-600",children:a.description})]},a.label))}),(0,d.jsxs)("div",{className:"mt-4 rounded-xl border border-dashed border-slate-200 bg-slate-50/30 p-4 text-center",children:[(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Firebase Console에서 Functions 상태와 Scheduler 로그를 확인하세요."}),(0,d.jsxs)("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-flex items-center gap-1 text-xs font-medium text-blue-600 hover:text-blue-700",children:["Firebase 콘솔 열기",(0,d.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})]})}var aA=c(41707);function aB(a){return"number"!=typeof a||isNaN(a)?"₩0":new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(a)}function aC(){let[a,b]=(0,e.useState)(7),{isLoading:c}=(0,aA.e6)(),{commission:f,clicks:g,orders:h,summary:i,isEnabled:j,isLoading:k,error:l,refetch:m}=ae(a),n=(0,e.useMemo)(()=>{let b=[],c=new Date;for(let d=a-1;d>=0;d--){let a=new Date(c);a.setDate(c.getDate()-d);let e=a.getFullYear(),f=String(a.getMonth()+1).padStart(2,"0"),g=String(a.getDate()).padStart(2,"0");b.push(`${e}${f}${g}`)}let d=new Map;f.forEach(a=>{d.set(a.date,a.commission)});let e=b.map(a=>({date:a,dateLabel:function(a){if(!a||8!==a.length)return a;let b=a.slice(4,6),c=a.slice(6,8);return`${b}/${c}`}(a),value:d.get(a)??0})),g=Math.max(...e.map(a=>a.value),1);return e.map(a=>({...a,percentage:a.value>0?a.value/g*100:0}))},[f,a]),o=(0,e.useMemo)(()=>{let a=i?.totalClicks??0,b=i?.totalCommission??0;return{avgCommission:n.length>0?b/n.length:0,revenuePerClick:a>0?b/a:0,totalOrders:i?.totalOrders??0,totalGmv:i?.totalGmv??0}},[n.length,i]);return j?c||k?(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"수익 추이"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"데이터를 불러오는 중..."})]})}),(0,d.jsx)("div",{className:"mt-6 h-40 animate-pulse rounded-2xl bg-slate-100"})]}):l?(0,d.jsx)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"수익 추이"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-red-500",children:l})]}),(0,d.jsx)("button",{type:"button",onClick:()=>m(),className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600 hover:bg-slate-200",children:"다시 시도"})]})}):(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"수익 추이"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"쿠팡 파트너스 실적 (매일 오후 15:00 업데이트)"})]}),(0,d.jsx)("div",{className:"flex items-center gap-2",children:[7,14,30].map(c=>(0,d.jsxs)("button",{type:"button",onClick:()=>b(c),className:`rounded-full px-3 py-1 text-xs font-medium transition ${a===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[c,"일"]},c))})]}),(0,d.jsxs)("div",{className:"mt-6 flex gap-4",children:[n.length>0&&(0,d.jsxs)("div",{className:"flex h-48 flex-col justify-between py-2 text-xs text-slate-500",children:[(0,d.jsx)("div",{className:"text-right",children:aB(Math.max(...n.map(a=>a.value)))}),(0,d.jsx)("div",{className:"text-right",children:aB(Math.max(...n.map(a=>a.value))/2)}),(0,d.jsx)("div",{className:"text-right",children:"₩0"})]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"h-48 rounded-2xl border border-slate-200 bg-gradient-to-b from-slate-50 to-white p-4",children:n.length>0?(0,d.jsx)("div",{className:"flex h-full items-end justify-center gap-2",children:n.map(a=>(0,d.jsxs)("div",{className:"group relative flex h-full flex-col justify-end",style:{width:`${100/n.length-2}%`,maxWidth:"40px"},children:[(0,d.jsx)("div",{style:{height:a.percentage>0?`${a.percentage}%`:"0"},className:"w-full rounded-t-md bg-sky-500 transition-all group-hover:bg-sky-600"}),(0,d.jsxs)("div",{className:"absolute bottom-full left-1/2 mb-2 hidden -translate-x-1/2 whitespace-nowrap rounded-lg bg-slate-900 px-3 py-1.5 text-xs text-white shadow-lg group-hover:block",children:[(0,d.jsx)("div",{className:"font-medium",children:a.dateLabel}),(0,d.jsx)("div",{className:"text-sky-200",children:aB(a.value)})]})]},a.date))}):(0,d.jsx)("div",{className:"flex h-full items-center justify-center text-sm text-slate-400",children:"데이터가 없습니다"})}),n.length>0&&(0,d.jsx)("div",{className:"mt-2 flex justify-center gap-2 text-[10px] text-slate-500",children:n.map((b,c)=>{let e=7===a||14===a&&c%2==0||30===a&&c%5==0;return(0,d.jsx)("div",{className:"text-center",style:{width:`${100/n.length-2}%`,maxWidth:"40px"},children:e?b.dateLabel:""},b.date)})})]})]}),(0,d.jsxs)("dl",{className:"mt-6 grid grid-cols-2 gap-4 text-xs text-slate-600 sm:grid-cols-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"font-semibold text-slate-500",children:"총 수익"}),(0,d.jsx)("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:aB(i?.totalCommission??0)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"font-semibold text-slate-500",children:"평균 수익/일"}),(0,d.jsx)("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:aB(o.avgCommission)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"font-semibold text-slate-500",children:"총 클릭"}),(0,d.jsxs)("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:[(i?.totalClicks??0).toLocaleString(),"회"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"font-semibold text-slate-500",children:"클릭당 수익"}),(0,d.jsx)("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:aB(o.revenuePerClick)})]})]}),(0,d.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t border-slate-100 pt-4 text-xs text-slate-500",children:[(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("span",{children:["주문: ",(0,d.jsxs)("strong",{className:"text-slate-700",children:[o.totalOrders.toLocaleString(),"건"]})]}),(0,d.jsxs)("span",{children:["매출: ",(0,d.jsx)("strong",{className:"text-slate-700",children:aB(o.totalGmv)})]})]}),(0,d.jsx)("button",{type:"button",onClick:()=>m(),className:"font-medium text-blue-600 hover:underline",children:"새로고침"})]})]}):(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"수익 추이"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"쿠팡 파트너스 API를 연동하면 실제 수익 데이터를 확인할 수 있습니다."})]})}),(0,d.jsx)("div",{className:"mt-6 flex h-40 items-center justify-center rounded-2xl bg-slate-50",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"text-sm text-slate-500",children:"쿠팡 API 연동 필요"}),(0,d.jsx)("a",{href:"/admin/settings",className:"mt-2 inline-block text-xs font-medium text-blue-600 hover:underline",children:"설정 페이지로 이동"})]})})]})}function aD({selectedCount:a,isPending:b,onBulkStatusChange:c,onClearSelection:e}){let f=0===a||b;return(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 text-xs text-slate-500",children:[(0,d.jsxs)("p",{children:["선택된 리뷰: ",a,"건"]}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,d.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 font-semibold text-slate-600 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-40",onClick:()=>c("approved"),disabled:f,children:"선택 승인"}),(0,d.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 font-semibold text-slate-600 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-40",onClick:()=>c("needs_revision"),disabled:f,children:"재검수 요청"}),(0,d.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 font-semibold text-slate-600 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-40",onClick:()=>c("published"),disabled:f,children:"선택 게시"}),(0,d.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 font-semibold text-slate-600 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-40",onClick:e,disabled:f,children:"선택 해제"})]})]})}function aE({pageIndex:a,hasNext:b,hasPrev:c,onNext:e,onPrev:f}){return(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 text-xs text-slate-500",children:[(0,d.jsxs)("span",{children:["페이지 ",(0,d.jsx)("span",{className:"font-semibold text-slate-700",children:a+1})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 font-semibold text-slate-600 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-40",onClick:f,disabled:!c,children:"이전"}),(0,d.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 font-semibold text-slate-600 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-40",onClick:e,disabled:!b,children:"다음"})]})]})}function aF(a){return"number"!=typeof a||isNaN(a)?"₩0":new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(a)}function aG(a){return"number"!=typeof a||isNaN(a)?"0":a.toLocaleString()}function aH(){let[a,b]=(0,e.useState)(7),{isLoading:c}=(0,aA.e6)(),{clicks:f,orders:g,cancels:h,commission:i,summary:j,isEnabled:k,isLoading:l,error:m,refetch:n}=ae(a),o=(0,e.useMemo)(()=>{if(!j)return{totalClicks:0,totalOrders:0,totalCancels:0,totalCommission:0,totalGmv:0,avgOrderValue:0,conversionRate:0,cancelRate:0};let a=j.totalClicks??0,b=j.totalOrders??0,c=j.totalCancels??0,d=j.totalCommission??0,e=j.totalGmv??0;return{totalClicks:a,totalOrders:b,totalCancels:c,totalCommission:d,totalGmv:e,avgOrderValue:b>0?e/b:0,conversionRate:a>0?b/a*100:0,cancelRate:b>0?c/b*100:0}},[j]),p=(0,e.useMemo)(()=>[...f].sort((a,b)=>b.date.localeCompare(a.date)),[f]);return k?c||l?(0,d.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"실적 리포트"}),(0,d.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(a=>(0,d.jsx)("div",{className:"h-24 animate-pulse rounded-lg bg-slate-100"},a))})]}):m?(0,d.jsx)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"실적 리포트"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m})]}),(0,d.jsx)("button",{type:"button",onClick:()=>n(),className:"rounded-lg bg-slate-100 px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-200",children:"다시 시도"})]})}):(0,d.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"실적 리포트"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"쿠팡 파트너스 실적 (매일 오후 15:00 업데이트)"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[[7,14,30].map(c=>(0,d.jsxs)("button",{type:"button",onClick:()=>b(c),className:`rounded-full px-3 py-1 text-xs font-medium transition ${a===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[c,"일"]},c)),(0,d.jsx)("button",{type:"button",onClick:()=>n(),className:"ml-2 rounded-lg border border-slate-200 px-3 py-1 text-xs font-medium text-slate-600 hover:bg-slate-50",children:"새로고침"})]})]}),(0,d.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,d.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-blue-50 to-white p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"총 클릭"}),(0,d.jsx)("svg",{className:"h-5 w-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})]}),(0,d.jsx)("p",{className:"mt-3 text-2xl font-bold text-slate-900",children:aG(o.totalClicks)}),(0,d.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["전환율: ",o.conversionRate.toFixed(2),"%"]})]}),(0,d.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-green-50 to-white p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"총 주문"}),(0,d.jsx)("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})]}),(0,d.jsx)("p",{className:"mt-3 text-2xl font-bold text-slate-900",children:aG(o.totalOrders)}),(0,d.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["평균: ",aF(o.avgOrderValue)]})]}),(0,d.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-red-50 to-white p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"총 취소"}),(0,d.jsx)("svg",{className:"h-5 w-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),(0,d.jsx)("p",{className:"mt-3 text-2xl font-bold text-slate-900",children:aG(o.totalCancels)}),(0,d.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["취소율: ",o.cancelRate.toFixed(2),"%"]})]}),(0,d.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-purple-50 to-white p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"총 수익"}),(0,d.jsx)("svg",{className:"h-5 w-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,d.jsx)("p",{className:"mt-3 text-2xl font-bold text-slate-900",children:aF(o.totalCommission)}),(0,d.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["GMV: ",aF(o.totalGmv)]})]})]}),(0,d.jsx)("div",{className:"mt-6 overflow-hidden rounded-lg border border-slate-200",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,d.jsx)("thead",{className:"bg-slate-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-600",children:"날짜"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"클릭"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"주문"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"취소"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"수익"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-slate-100 bg-white",children:p.slice(0,10).map((a,b)=>{let c=g.find(b=>b.date===a.date),e=h.find(b=>b.date===a.date),f=i.find(b=>b.date===a.date);return(0,d.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,d.jsxs)("td",{className:"px-4 py-3 text-sm text-slate-600",children:[a.date.slice(4,6),"/",a.date.slice(6,8)]}),(0,d.jsx)("td",{className:"px-4 py-3 text-right text-sm text-slate-900",children:aG(a.clicks??0)}),(0,d.jsx)("td",{className:"px-4 py-3 text-right text-sm text-slate-900",children:c?aG(c.orderCnt??0):"-"}),(0,d.jsx)("td",{className:"px-4 py-3 text-right text-sm text-red-600",children:e?aG(e.cancelCnt??0):"-"}),(0,d.jsx)("td",{className:"px-4 py-3 text-right text-sm font-medium text-slate-900",children:f?aF(f.commission??0):"-"})]},`${a.date}-${b}`)})})]})})]}):(0,d.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"실적 리포트"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"쿠팡 파트너스 API를 연동하면 실적 데이터를 확인할 수 있습니다."}),(0,d.jsx)("a",{href:"/admin/settings",className:"mt-4 inline-block text-sm font-medium text-blue-600 hover:underline",children:"설정 페이지로 이동 →"})]})}function aI(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}${c}${d}`}async function aJ(a,b,c,d){let e=new Date,f=new Date;f.setDate(e.getDate()-d+1);let g=await fetch("/api/coupang/ads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessKey:a,secretKey:b,endpoint:c,startDate:aI(f),endDate:aI(e)})});if(!g.ok)throw Error((await g.json()).message||"광고 리포트 조회 실패");let h=await g.json();if(!h.success)throw Error(h.message||"광고 리포트 조회 실패");return h.data}function aK(a=7){let{settings:b}=(0,aa.C)(),{coupang:c}=b,d=c.enabled&&!!c.accessKey&&!!c.secretKey,{data:e=[],isLoading:f,error:g,refetch:h}=(0,x.I)({queryKey:["coupang","ads","impression-click",a],queryFn:()=>aJ(c.accessKey,c.secretKey,"impression-click",a),enabled:d,staleTime:9e5,refetchOnWindowFocus:!1}),{data:i=[],isLoading:j,error:k,refetch:l}=(0,x.I)({queryKey:["coupang","ads","orders",a],queryFn:()=>aJ(c.accessKey,c.secretKey,"orders",a),enabled:d,staleTime:9e5,refetchOnWindowFocus:!1}),{data:m=[],isLoading:n,error:o,refetch:p}=(0,x.I)({queryKey:["coupang","ads","cancels",a],queryFn:()=>aJ(c.accessKey,c.secretKey,"cancels",a),enabled:d,staleTime:9e5,refetchOnWindowFocus:!1}),{data:q=[],isLoading:r,error:s,refetch:t}=(0,x.I)({queryKey:["coupang","ads","performance",a],queryFn:()=>aJ(c.accessKey,c.secretKey,"performance",a),enabled:d,staleTime:9e5,refetchOnWindowFocus:!1}),{data:u=[],isLoading:v,error:w,refetch:y}=(0,x.I)({queryKey:["coupang","ads","commission",a],queryFn:()=>aJ(c.accessKey,c.secretKey,"commission",a),enabled:d,staleTime:9e5,refetchOnWindowFocus:!1}),z={totalImpressions:e.reduce((a,b)=>a+(b.impression??0),0),totalClicks:e.reduce((a,b)=>a+(b.click??0),0),totalOrders:i.length,totalCancels:m.length,totalCommission:u.reduce((a,b)=>a+(b.commission??0),0),totalGmv:i.reduce((a,b)=>a+(b.gmv??0),0),avgEcpm:q.length>0?q.reduce((a,b)=>a+(b.ecpm??0),0)/q.length:0,ctr:e.reduce((a,b)=>a+(b.impression??0),0)>0?e.reduce((a,b)=>a+(b.click??0),0)/e.reduce((a,b)=>a+(b.impression??0),0)*100:0};return{impressionClick:e,orders:i,cancels:m,performance:q,commission:u,summary:z,isEnabled:d,isLoading:f||j||n||r||v,error:g?.message||k?.message||o?.message||s?.message||w?.message||null,refetch:()=>{h(),l(),p(),t(),y()}}}function aL(a){return new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(a)}function aM(a){return a.toLocaleString()}function aN(){let[a,b]=(0,e.useState)(7),{impressionClick:c,orders:f,cancels:g,performance:h,commission:i,summary:j,isEnabled:k,isLoading:l,error:m,refetch:n}=aK(a),o=(0,e.useMemo)(()=>{let a=new Map;return c.forEach(b=>{let c=a.get(b.date)||{impressions:0,clicks:0,orders:0,cancels:0,commission:0,ecpm:0};c.impressions+=b.impression??0,c.clicks+=b.click??0,a.set(b.date,c)}),f.forEach(b=>{let c=a.get(b.date)||{impressions:0,clicks:0,orders:0,cancels:0,commission:0,ecpm:0};c.orders+=1,a.set(b.date,c)}),g.forEach(b=>{let c=a.get(b.date)||{impressions:0,clicks:0,orders:0,cancels:0,commission:0,ecpm:0};c.cancels+=1,a.set(b.date,c)}),i.forEach(b=>{let c=a.get(b.date)||{impressions:0,clicks:0,orders:0,cancels:0,commission:0,ecpm:0};c.commission+=b.commission??0,a.set(b.date,c)}),h.forEach(b=>{let c=String(b.date),d=a.get(c)||{impressions:0,clicks:0,orders:0,cancels:0,commission:0,ecpm:0};d.ecpm=b.ecpm??0,a.set(c,d)}),Array.from(a.entries()).map(([a,b])=>({date:a,...b})).sort((a,b)=>b.date.localeCompare(a.date))},[c,f,g,i,h]);return k?l?(0,d.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"광고 배너 리포트"}),(0,d.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(a=>(0,d.jsx)("div",{className:"h-24 animate-pulse rounded-lg bg-slate-100"},a))})]}):m?(0,d.jsx)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"광고 배너 리포트"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m})]}),(0,d.jsx)("button",{type:"button",onClick:()=>n(),className:"rounded-lg bg-slate-100 px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-200",children:"다시 시도"})]})}):(0,d.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"광고 배너 리포트"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"카테고리 & 다이나믹 배너 (최대 14일 조회 가능)"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[[7,14].map(c=>(0,d.jsxs)("button",{type:"button",onClick:()=>b(c),className:`rounded-full px-3 py-1 text-xs font-medium transition ${a===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[c,"일"]},c)),(0,d.jsx)("button",{type:"button",onClick:()=>n(),className:"ml-2 rounded-lg border border-slate-200 px-3 py-1 text-xs font-medium text-slate-600 hover:bg-slate-50",children:"새로고침"})]})]}),(0,d.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,d.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-indigo-50 to-white p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"총 노출"}),(0,d.jsxs)("svg",{className:"h-5 w-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]}),(0,d.jsx)("p",{className:"mt-3 text-2xl font-bold text-slate-900",children:aM(j.totalImpressions)}),(0,d.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["클릭: ",aM(j.totalClicks)," (",j.ctr.toFixed(2),"%)"]})]}),(0,d.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-teal-50 to-white p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"광고 주문"}),(0,d.jsx)("svg",{className:"h-5 w-5 text-teal-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,d.jsx)("p",{className:"mt-3 text-2xl font-bold text-slate-900",children:aM(j.totalOrders)}),(0,d.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["취소: ",aM(j.totalCancels)]})]}),(0,d.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-amber-50 to-white p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"평균 eCPM"}),(0,d.jsx)("svg",{className:"h-5 w-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),(0,d.jsx)("p",{className:"mt-3 text-2xl font-bold text-slate-900",children:aL(j.avgEcpm)}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"노출 1,000회당 수익"})]}),(0,d.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-emerald-50 to-white p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"광고 수익"}),(0,d.jsx)("svg",{className:"h-5 w-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,d.jsx)("p",{className:"mt-3 text-2xl font-bold text-slate-900",children:aL(j.totalCommission)}),(0,d.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["GMV: ",aL(j.totalGmv)]})]})]}),(0,d.jsx)("div",{className:"mt-6 overflow-hidden rounded-lg border border-slate-200",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,d.jsx)("thead",{className:"bg-slate-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-600",children:"날짜"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"노출"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"클릭"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"주문"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"eCPM"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-600",children:"수익"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-slate-100 bg-white",children:o.slice(0,10).map(a=>{let b=a.impressions>0?a.clicks/a.impressions*100:0;return(0,d.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,d.jsxs)("td",{className:"px-4 py-3 text-sm text-slate-600",children:[a.date.slice(4,6),"/",a.date.slice(6,8)]}),(0,d.jsx)("td",{className:"px-4 py-3 text-right text-sm text-slate-900",children:aM(a.impressions)}),(0,d.jsxs)("td",{className:"px-4 py-3 text-right text-sm text-slate-900",children:[aM(a.clicks),(0,d.jsxs)("span",{className:"ml-1 text-xs text-slate-500",children:["(",b.toFixed(1),"%)"]})]}),(0,d.jsx)("td",{className:"px-4 py-3 text-right text-sm text-slate-900",children:aM(a.orders)}),(0,d.jsx)("td",{className:"px-4 py-3 text-right text-sm font-medium text-amber-600",children:a.ecpm>0?aL(a.ecpm):"-"}),(0,d.jsx)("td",{className:"px-4 py-3 text-right text-sm font-medium text-slate-900",children:a.commission>0?aL(a.commission):"-"})]},a.date)})})]})})]}):(0,d.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"광고 배너 리포트"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"쿠팡 파트너스 API를 연동하면 광고 배너 실적 데이터를 확인할 수 있습니다."}),(0,d.jsx)("a",{href:"/admin/settings",className:"mt-4 inline-block text-sm font-medium text-blue-600 hover:underline",children:"설정 페이지로 이동 →"})]})}function aO(a){return new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(a)}function aP(){let[a,b]=(0,e.useState)(7),{performance:c,commission:f,impressionClick:g,summary:h,isEnabled:i,isLoading:j,error:k,refetch:l}=aK(a),m=(0,e.useMemo)(()=>{let b=[],d=new Date;for(let c=a-1;c>=0;c--){let a=new Date(d);a.setDate(d.getDate()-c);let e=a.getFullYear(),f=String(a.getMonth()+1).padStart(2,"0"),g=String(a.getDate()).padStart(2,"0");b.push(`${e}${f}${g}`)}let e=new Map;c.forEach(a=>{let b=String(a.date);e.set(b,a.ecpm??0)});let f=b.map(a=>({date:a,dateLabel:function(a){if(!a||8!==a.length)return a;let b=a.slice(4,6),c=a.slice(6,8);return`${b}/${c}`}(a),value:e.get(a)??0})),g=Math.max(...f.map(a=>a.value),1);return f.map(a=>({...a,percentage:a.value>0?a.value/g*100:0}))},[c,a]),n=(0,e.useMemo)(()=>{let a=h?.totalImpressions??0,b=h?.totalClicks??0,c=h?.totalCommission??0;return{avgEcpm:h?.avgEcpm??0,totalImpressions:a,totalClicks:b,totalCommission:c,ctr:a>0?b/a*100:0}},[h]);return i?j?(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"eCPM 추이"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"데이터를 불러오는 중..."})]})}),(0,d.jsx)("div",{className:"mt-6 h-40 animate-pulse rounded-2xl bg-slate-100"})]}):k?(0,d.jsx)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"eCPM 추이"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-red-500",children:k})]}),(0,d.jsx)("button",{type:"button",onClick:()=>l(),className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600 hover:bg-slate-200",children:"다시 시도"})]})}):(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"eCPM 추이"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"광고 배너 실적 (매일 오후 15:00 업데이트)"})]}),(0,d.jsx)("div",{className:"flex items-center gap-2",children:[7,14].map(c=>(0,d.jsxs)("button",{type:"button",onClick:()=>b(c),className:`rounded-full px-3 py-1 text-xs font-medium transition ${a===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[c,"일"]},c))})]}),(0,d.jsxs)("div",{className:"mt-6 flex gap-4",children:[m.length>0&&(0,d.jsxs)("div",{className:"flex h-48 flex-col justify-between py-2 text-xs text-slate-500",children:[(0,d.jsx)("div",{className:"text-right",children:aO(Math.max(...m.map(a=>a.value)))}),(0,d.jsx)("div",{className:"text-right",children:aO(Math.max(...m.map(a=>a.value))/2)}),(0,d.jsx)("div",{className:"text-right",children:"₩0"})]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"h-48 rounded-2xl border border-slate-200 bg-gradient-to-b from-amber-50 to-white p-4",children:m.length>0?(0,d.jsx)("div",{className:"flex h-full items-end justify-center gap-2",children:m.map(a=>(0,d.jsxs)("div",{className:"group relative flex h-full flex-col justify-end",style:{width:`${100/m.length-2}%`,maxWidth:"40px"},children:[(0,d.jsx)("div",{style:{height:a.percentage>0?`${a.percentage}%`:"0"},className:"w-full rounded-t-md bg-amber-500 transition-all group-hover:bg-amber-600"}),(0,d.jsxs)("div",{className:"absolute bottom-full left-1/2 mb-2 hidden -translate-x-1/2 whitespace-nowrap rounded-lg bg-slate-900 px-3 py-1.5 text-xs text-white shadow-lg group-hover:block",children:[(0,d.jsx)("div",{className:"font-medium",children:a.dateLabel}),(0,d.jsx)("div",{className:"text-amber-200",children:aO(a.value)})]})]},a.date))}):(0,d.jsx)("div",{className:"flex h-full items-center justify-center text-sm text-slate-400",children:"데이터가 없습니다"})}),m.length>0&&(0,d.jsx)("div",{className:"mt-2 flex justify-center gap-2 text-[10px] text-slate-500",children:m.map((b,c)=>{let e=7===a||14===a&&c%2==0;return(0,d.jsx)("div",{className:"text-center",style:{width:`${100/m.length-2}%`,maxWidth:"40px"},children:e?b.dateLabel:""},b.date)})})]})]}),(0,d.jsxs)("dl",{className:"mt-6 grid grid-cols-2 gap-4 text-xs text-slate-600 sm:grid-cols-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"font-semibold text-slate-500",children:"평균 eCPM"}),(0,d.jsx)("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:aO(n.avgEcpm)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"font-semibold text-slate-500",children:"총 노출"}),(0,d.jsx)("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:n.totalImpressions.toLocaleString()})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"font-semibold text-slate-500",children:"총 클릭"}),(0,d.jsx)("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:n.totalClicks.toLocaleString()})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"font-semibold text-slate-500",children:"CTR"}),(0,d.jsxs)("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:[n.ctr.toFixed(2),"%"]})]})]}),(0,d.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t border-slate-100 pt-4 text-xs text-slate-500",children:[(0,d.jsx)("div",{className:"flex gap-4",children:(0,d.jsxs)("span",{children:["광고 수익:"," ",(0,d.jsx)("strong",{className:"text-slate-700",children:aO(n.totalCommission)})]})}),(0,d.jsx)("button",{type:"button",onClick:()=>l(),className:"font-medium text-blue-600 hover:underline",children:"새로고침"})]})]}):(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"eCPM 추이"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"쿠팡 파트너스 API를 연동하면 광고 eCPM 데이터를 확인할 수 있습니다."})]})}),(0,d.jsx)("div",{className:"mt-6 flex h-40 items-center justify-center rounded-2xl bg-slate-50",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"text-sm text-slate-500",children:"쿠팡 API 연동 필요"}),(0,d.jsx)("a",{href:"/admin/settings",className:"mt-2 inline-block text-xs font-medium text-blue-600 hover:underline",children:"설정 페이지로 이동"})]})})]})}function aQ({view:a="overview",title:b,description:c}){let{status:o,user:s}=(0,g.D)(),{reviewStatuses:t,reviewLimitFilter:u,reviewSearch:v,reviewDateFilter:x,selectedReviewId:y,logLevels:z,logSearch:A,logDateFilter:B,setReviewStatus:C,setReviewLimitFilter:D,setReviewSearch:E,setReviewDateFilter:F,setSelectedReview:G,setLogLevel:H,setLogLevels:I,setLogSearch:J,setLogDateFilter:K,setReviewPageIndex:L,setLogPageIndex:M}=w(),N=ar[a],O=b??N.title,P=c??N.description,Q="overview"===a||"reviews"===a,R=(0,f.useRouter)(),S=(0,f.usePathname)(),T=(0,f.useSearchParams)(),U=(0,e.useMemo)(()=>T.toString(),[T]);(0,e.useCallback)(a=>{let b=new URLSearchParams(U),c=!1;if(Object.entries(a).forEach(([a,d])=>{let e=d??"",f=b.get(a);e?f!==e&&(b.set(a,e),c=!0):null!==f&&(b.delete(a),c=!0)}),!c)return;let d=b.toString();R.replace(d?`${S}?${d}`:S,{scroll:!1})},[S,R,U]);let{metrics:V}=function(){let{commission:a,clicks:b,orders:c,isEnabled:d,isLoading:f,error:g}=ae(30);return{metrics:(0,e.useMemo)(()=>{if(!d)return[{id:"week-commission",label:"이번주 커미션",value:"-",trend:"API 미연동"},{id:"conversion",label:"클릭 → 주문 전환율",value:"-",trend:"API 미연동"},{id:"today-clicks",label:"금일 클릭 수",value:"-",trend:"API 미연동"}];if(f)return[{id:"week-commission",label:"이번주 커미션",value:"...",trend:"로딩 중"},{id:"conversion",label:"클릭 → 주문 전환율",value:"...",trend:"로딩 중"},{id:"today-clicks",label:"금일 클릭 수",value:"...",trend:"로딩 중"}];if(g||!a.length||!b.length||!c.length)return[{id:"week-commission",label:"이번주 커미션",value:"₩0"},{id:"conversion",label:"클릭 → 주문 전환율",value:"0.0%"},{id:"today-clicks",label:"금일 클릭 수",value:"0"}];let e=ah(new Date),h=ag(),i=function(){let a=new Date(ag().start);a.setDate(a.getDate()-1);let b=new Date(a);return b.setDate(a.getDate()-6),b.setHours(0,0,0,0),{start:b,end:a}}(),j=ah(h.start),k=ah(h.end),l=ah(i.start),m=ah(i.end),n=a.filter(a=>a.date>=j&&a.date<=k).reduce((a,b)=>a+b.commission,0),o=a.filter(a=>a.date>=l&&a.date<=m).reduce((a,b)=>a+b.commission,0),p=o>0?(n-o)/o*100:0,q=b.filter(a=>a.date===e).reduce((a,b)=>a+b.clicks,0),r=new Date;r.setDate(r.getDate()-1);let s=ah(r),t=b.filter(a=>a.date===s).reduce((a,b)=>a+b.clicks,0),u=t>0?(q-t)/t*100:0,v=new Date;v.setDate(v.getDate()-7);let w=ah(v),x=b.filter(a=>a.date>=w&&a.date<=e).reduce((a,b)=>a+b.clicks,0),y=c.filter(a=>a.date>=w&&a.date<=e).reduce((a,b)=>a+b.orderCnt,0),z=x>0?y/x*100:0,A=new Date;A.setDate(A.getDate()-14);let B=ah(A),C=b.filter(a=>a.date>=B&&a.date<w).reduce((a,b)=>a+b.clicks,0),D=c.filter(a=>a.date>=B&&a.date<w).reduce((a,b)=>a+b.orderCnt,0),E=z-(C>0?D/C*100:0);return[{id:"week-commission",label:"이번주 커미션",value:new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(n),trend:0!==p?`${p>0?"+":""}${af(p)} WoW`:void 0},{id:"conversion",label:"클릭 → 주문 전환율",value:af(z),trend:0!==E?`${E>0?"+":""}${E.toFixed(1)}pp`:void 0},{id:"today-clicks",label:"금일 클릭 수",value:q.toLocaleString(),trend:0!==u?`${u>0?"+":""}${af(u)} DoD`:void 0}]},[a,b,c,d,f,g]),isEnabled:d,isLoading:f,error:g}}(),{metrics:W,workflow:X,logs:Y,isLoading:Z,reviewLimit:$,setReviewLimit:aa,hasNextReviewPage:ab,hasPrevReviewPage:ac,goToNextReviewPage:ad,goToPrevReviewPage:ai,reviewPageIndex:al,totalReviewCount:an,hasNextLogPage:ao,hasPrevLogPage:as,goToNextLogPage:at,goToPrevLogPage:au,logPageIndex:aA,totalLogCount:aB,refreshReviews:aF}=function(a){let{status:b}=(0,g.D)(),c=a?.reviewStatusFilter,d=a?.reviewDateRange??"all",f=a?.logLevelFilter,o=a?.logDateRange??"all",s=(0,e.useMemo)(()=>r(c,l),[c]),t=(0,e.useMemo)(()=>r(f,m),[f]),[u,v]=(0,e.useState)(i),[w,x]=(0,e.useState)(j),[y,z]=(0,e.useState)(k),[A,B]=(0,e.useState)(!1),[C,D]=(0,e.useState)(a?.defaultReviewLimit??12),E=a?.onReviewPageChange,[F,G]=(0,e.useState)(null),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)(!1),[L,M]=(0,e.useState)(0),[N,O]=(0,e.useState)(null),[P,Q]=(0,e.useState)(!1),[R,S]=(0,e.useState)(!1),[T,U]=(0,e.useState)(0),V=a?.onLogPageChange,W=(0,e.useRef)([]),X=(0,e.useRef)(null),Y=(0,e.useRef)([]),Z=(0,e.useRef)(null),$=(0,e.useCallback)(a=>{D(b=>a===b?b:a)},[]),_=(0,e.useCallback)(async({cursor:a,resetStack:e=!1}={})=>{if("ready"!==b){x(j),I(!1),K(!1),M(0),E?.(0);return}e&&(W.current=[],X.current=null);let f=q(c,l);if(0===f.length){W.current=[],X.current=null,x([]),G(0),I(!1),K(!1),M(0),E?.(0);return}B(!0);try{let b=f.length===l.length?void 0:f,c=p(d),e=await (0,h.EZ)({limit:C,startAfterDoc:a??null,statuses:b,updatedAfter:c});x(e.documents.length?e.documents.map(a=>({id:a.id,productId:a.productId,product:a.productName??a.productId??"미상",author:a.author??"auto-bot",status:a.status??"draft",updatedAt:a.updatedAt??"",createdAt:a.createdAt,content:a.content,toneScore:a.toneScore,charCount:a.charCount})):j),G(e.totalCount??null),X.current=e.lastSnapshot,I(e.hasMore),K(W.current.length>0);let g=W.current.length;M(g),E?.(g)}catch(a){console.warn("[useAdminDashboardData] Failed to fetch review page",a),x(j),G(null),I(!1),K(W.current.length>0)}finally{B(!1)}},[b,C,c,s,d,E]),aa=(0,e.useCallback)(async()=>{X.current&&H&&(W.current=[...W.current,X.current],await _({cursor:X.current}))},[H,_]),ab=(0,e.useCallback)(async()=>{if(0===W.current.length)return;W.current=W.current.slice(0,-1);let a=W.current[W.current.length-1]??null;await _({cursor:a??null})},[_]),ac=(0,e.useCallback)(async({cursor:a,resetStack:c=!1}={})=>{if("ready"!==b){z(k),O(null),Q(!1),S(!1),U(0);return}c&&(Y.current=[],Z.current=null);try{let b=q(f,m);if(0===b.length){Y.current=[],Z.current=null,z([]),O(0),Q(!1),S(!1),U(0),V?.(0);return}let c=b.length===m.length?void 0:b,d=p(o),e=await (0,h.e_)({limit:12,startAfterDoc:a??null,levels:c,createdAfter:d});z(e.documents.length?e.documents.map(n):k),O(e.totalCount??null),Z.current=e.lastSnapshot,Q(e.hasMore),S(Y.current.length>0);let g=Y.current.length;U(g),V?.(g)}catch(a){console.warn("[useAdminDashboardData] Failed to fetch log page",a),z(k),Q(!1),S(Y.current.length>0)}},[b,f,t,o,V]),ad=(0,e.useCallback)(async()=>{Z.current&&P&&(Y.current=[...Y.current,Z.current],await ac({cursor:Z.current}))},[P,ac]),ae=(0,e.useCallback)(async()=>{if(0===Y.current.length)return;Y.current=Y.current.slice(0,-1);let a=Y.current[Y.current.length-1]??null;await ac({cursor:a})},[ac]),af=(0,e.useCallback)(async()=>{await _({cursor:null,resetStack:!0})},[_]),ag=(0,e.useCallback)(async()=>{await ac({cursor:null,resetStack:!0})},[ac]);return(0,e.useMemo)(()=>({metrics:u,workflow:w,logs:y,isLoading:A,reviewLimit:C,setReviewLimit:$,hasNextReviewPage:H,hasPrevReviewPage:J,goToNextReviewPage:aa,goToPrevReviewPage:ab,reviewPageIndex:L,totalReviewCount:F,hasNextLogPage:P,hasPrevLogPage:R,goToNextLogPage:ad,goToPrevLogPage:ae,logPageIndex:T,totalLogCount:N,refreshReviews:af,refreshLogs:ag}),[u,w,y,A,C,$,H,J,aa,ab,L,F,P,R,ad,ae,T,N,af,ag])}({defaultReviewLimit:u,onReviewPageChange:L,onLogPageChange:M,reviewStatusFilter:t,reviewDateRange:x,logLevelFilter:z,logDateRange:B}),[aG,aI]=(0,e.useState)(null),[aJ,aK]=(0,e.useState)(null),[aL,aM]=(0,e.useState)(null),[aO,aQ]=(0,e.useState)(null),[aR,aS]=(0,e.useState)([]),[aT,aU]=(0,e.useState)(!1),[aV,aW]=(0,e.useState)(!1),[aX,aY]=(0,e.useState)(null),aZ=(0,e.useMemo)(()=>"ready"===o&&s?`${s.email??"관리자"}님,`:"관리자님,",[o,s]),a$="ready"===o,a_=(0,e.useMemo)(()=>{let a=v.trim().toLowerCase(),b=Date.now();return X.filter(c=>{if(!c.status||!t[c.status]||a&&![c.product?.toLowerCase()??"",c.productId?.toLowerCase()??"",c.author?.toLowerCase()??"",c.content?.toLowerCase()??""].some(b=>b.includes(a)))return!1;if("all"!==x){let a=c.updatedAt??c.createdAt??"",d=a?new Date(a):null;if(!d||Number.isNaN(d.getTime())||b-d.getTime()>aq[x])return!1}return!0})},[x,v,t,X]),a0=(0,e.useMemo)(()=>a_.filter(a=>!!a.id),[a_]),a1=(0,e.useMemo)(()=>{let a=A.trim().toLowerCase(),b=Date.now();return Y.filter(c=>{if(!z[c.level])return!1;if("all"!==B){let a=c.createdAt?new Date(c.createdAt):null;if(!a||Number.isNaN(a.getTime())||b-a.getTime()>aq[B])return!1}if(!a)return!0;let d=c.message?.toLowerCase()??"",e=c.context?.toLowerCase()??"";return d.includes(a)||e.includes(a)})},[B,z,A,Y]),a2=(0,e.useCallback)(a=>E(a.target.value),[E]),a3=(0,e.useCallback)(()=>E(""),[E]),a4=(0,e.useCallback)(a=>F(a),[F]),a5=(0,e.useCallback)(a=>J(a.target.value),[J]),a6=(0,e.useCallback)(()=>J(""),[J]),a7=(0,e.useCallback)(a=>K(a),[K]),a8=(0,e.useCallback)(a=>{if(!a.id)return void aQ(a);G(a.id)},[G]),a9=(0,e.useCallback)((a,b)=>{aS(c=>b?c.includes(a)?c:[...c,a]:c.filter(b=>b!==a))},[]),ba=(0,e.useCallback)(a=>{a?aS(a0.map(a=>a.id).filter(Boolean)):aS([])},[a0]),bb=(0,e.useCallback)(async(a,b,c)=>{if(!a)return void aK("실제 리뷰 ID를 찾을 수 없어 변경할 수 없습니다.");aI(a),aK(null),aM(null);try{await (0,h.WD)(a,c),await (0,h.hc)("admin_actions",{reviewId:a,product:b,nextStatus:c,source:"dashboard",performedAt:new Date().toISOString()}),aS(b=>b.filter(b=>b!==a)),aM(`'${b}' 처리 결과: ${aj[c]??c}.`),await aF()}catch(a){aK(a instanceof Error?a.message:"리뷰 상태 변경 중 알 수 없는 오류가 발생했습니다.")}finally{aI(null)}},[aF]),bc=(0,e.useCallback)(()=>{aY(null),aW(!0)},[]),bd=(0,e.useCallback)(a=>{aY(a),aW(!0)},[]),be=(0,e.useCallback)(()=>{aW(!1),aY(null)},[]),bf=(0,e.useCallback)(async()=>{aM("리뷰가 저장되었습니다."),await aF()},[aF]),bg=(0,e.useCallback)(async a=>{if(!aR.length)return void aK("선택된 리뷰가 없습니다.");let b=a0.filter(a=>a.id&&aR.includes(a.id));aU(!0),aK(null),aM(null);try{await Promise.all(b.map(b=>(0,h.WD)(b.id,a))),await (0,h.hc)("admin_actions",{reviewIds:b.map(a=>a.id),products:b.map(a=>({id:a.id,product:a.product})),nextStatus:a,source:"dashboard-bulk",performedAt:new Date().toISOString()}),aM(`선택한 ${b.length}건을 '${aj[a]??a}' 상태로 변경했습니다.`),aS([]),await aF()}catch(a){aK(a instanceof Error?a.message:"일괄 상태 변경 중 알 수 없는 오류가 발생했습니다.")}finally{aU(!1)}},[a0,aR,aF]);return(0,d.jsxs)("div",{className:"bg-slate-50",children:[(0,d.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-col gap-12 px-6 py-12 sm:px-8",children:[(0,d.jsxs)("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-slate-500",children:aZ}),(0,d.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl",children:O}),(0,d.jsx)("p",{className:"mt-2 max-w-2xl text-sm text-slate-600",children:P})]}),(0,d.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3 text-xs text-slate-500 shadow-sm",children:[(0,d.jsx)("p",{className:"font-semibold text-slate-700",children:"현재 상태"}),(0,d.jsx)("p",{className:"mt-1 text-xs",children:"ready"===o?"Firebase 연결 완료":"Firebase 초기화 중"})]})]}),Z&&(0,d.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 text-sm text-slate-500 shadow-sm",children:"최신 데이터를 불러오는 중입니다…"}),"overview"===a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ay,{metrics:V}),(0,d.jsx)(az,{}),(0,d.jsx)(aH,{}),(0,d.jsx)(aN,{}),(0,d.jsx)(aP,{})]}),Q&&(0,d.jsxs)(d.Fragment,{children:[aJ&&(0,d.jsx)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700 shadow-sm",children:aJ}),aL&&(0,d.jsx)("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700 shadow-sm",children:aL})]}),Q&&(0,d.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[1.5fr_1fr]",children:[(0,d.jsxs)("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"후기 승인 워크플로"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"`reviews` 컬렉션의 상태 값(draft → needs_revision → approved → published)을 가이드합니다."})]}),(0,d.jsx)("button",{type:"button",onClick:bc,className:"rounded-full bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:bg-slate-800",children:"+ 새 리뷰 작성"})]}),(0,d.jsx)("div",{className:"mt-5 flex flex-wrap gap-2",children:ak.map(a=>{let b=t[a];return(0,d.jsx)("button",{type:"button",className:`rounded-full px-3 py-1 text-xs font-semibold transition ${b?"bg-slate-900 text-white":"border border-slate-200 text-slate-600 hover:bg-slate-100"}`,onClick:()=>C(a,!b),children:a.replace("_"," ")},a)})}),(0,d.jsxs)("div",{className:"mt-4 flex flex-col gap-3 text-xs text-slate-500 lg:flex-row lg:items-end lg:justify-between",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-2 lg:max-w-sm",children:[(0,d.jsx)("span",{className:"font-semibold text-slate-600",children:"상품/작성자 검색"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"search",value:v,onChange:a2,placeholder:"상품명, 작성자, 본문 키워드",className:"flex-1 rounded-full border border-slate-200 bg-white px-3 py-2 text-xs text-slate-700 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-300/40"}),v&&(0,d.jsx)("button",{type:"button",onClick:a3,className:"rounded-full border border-slate-200 px-3 py-2 font-semibold text-slate-600 transition hover:bg-slate-100",children:"지우기"})]})]}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,d.jsx)("span",{className:"font-semibold text-slate-600",children:"기간"}),ap.map(a=>(0,d.jsx)("button",{type:"button",className:`rounded-full px-3 py-1 font-semibold transition ${x===a.value?"bg-slate-900 text-white shadow-sm":"border border-slate-200 text-slate-600 hover:bg-slate-100"}`,onClick:()=>a4(a.value),children:a.label},a.value))]})]}),(0,d.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3 text-xs text-slate-500",children:[(0,d.jsxs)("p",{children:["총",(0,d.jsxs)("span",{className:"font-semibold text-slate-600",children:[" ",an??X.length]}),"건 중 현재",(0,d.jsxs)("span",{className:"font-semibold text-slate-600",children:[" ",a_.length]}),"건을 표시합니다."]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{children:"표시 개수"}),[12,24,48].map(a=>(0,d.jsx)("button",{type:"button",className:`rounded-full px-3 py-1 font-semibold transition ${$===a?"bg-slate-900 text-white":"border border-slate-200 text-slate-600 hover:bg-slate-100"}`,onClick:()=>D(a),children:a},a))]})]}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)(aD,{selectedCount:aR.length,isPending:aT,onBulkStatusChange:bg,onClearSelection:()=>aS([])})}),(0,d.jsx)("div",{className:"mt-5",children:(0,d.jsx)(av,{reviews:a_,selectedReviewId:y,selectedReviewIds:aR,isInteractive:a$,pendingReviewId:aG,onRowSelect:a8,onToggleSelection:a9,onSelectAll:ba,onStatusChange:bb,onEditReview:bd})}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)(aE,{pageIndex:al,hasNext:ab,hasPrev:ac,onNext:ad,onPrev:ai})}),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)(aw,{review:aO})})]}),(0,d.jsx)(aC,{})]}),("overview"===a||"logs"===a)&&(0,d.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"자동화 로그 스트림"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Cloud Functions, Firestore Trigger, Slack 알림 결과를 요약합니다."})]}),(0,d.jsx)("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:am.map(a=>(0,d.jsx)("button",{type:"button",className:`rounded-full px-3 py-1 font-semibold transition ${z[a]?"bg-slate-900 text-white":"border border-slate-200 text-slate-600 hover:bg-slate-100"}`,onClick:()=>H(a,!z[a]),children:a},a))})]}),(0,d.jsxs)("div",{className:"mt-4 flex flex-col gap-3 text-xs text-slate-500 xl:flex-row xl:items-end xl:justify-between",children:[(0,d.jsxs)("p",{children:["총",(0,d.jsxs)("span",{className:"font-semibold text-slate-600",children:[" ",aB??Y.length]}),"건 중",(0,d.jsxs)("span",{className:"font-semibold text-slate-600",children:[" ",a1.length]}),"건을 표시합니다."]}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"search",value:A,onChange:a5,placeholder:"메시지 또는 컨텍스트 검색",className:"rounded-full border border-slate-200 bg-white px-3 py-2 text-xs text-slate-700 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-300/60"}),A&&(0,d.jsx)("button",{type:"button",onClick:a6,className:"rounded-full border border-slate-200 px-3 py-2 font-semibold text-slate-600 transition hover:bg-slate-100",children:"지우기"})]}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,d.jsx)("span",{className:"font-semibold text-slate-600",children:"기간"}),ap.map(a=>(0,d.jsx)("button",{type:"button",className:`rounded-full px-3 py-1 font-semibold transition ${B===a.value?"bg-slate-900 text-white shadow-sm":"border border-slate-200 text-slate-600 hover:bg-slate-100"}`,onClick:()=>a7(a.value),children:a.label},a.value))]})]})]}),(0,d.jsx)("div",{className:"mt-5",children:(0,d.jsx)(ax,{logs:a1})}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)(aE,{pageIndex:aA,hasNext:ao,hasPrev:as,onNext:at,onPrev:au})})]})]}),(0,d.jsx)(_,{isOpen:aV,onClose:be,reviewId:aX,onSaved:bf})]})}function aR(){return(0,d.jsx)("div",{className:"bg-slate-50 min-h-screen",children:(0,d.jsx)("div",{className:"mx-auto max-w-6xl px-6 py-12 sm:px-8",children:(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"h-8 bg-slate-200 rounded w-64 mb-4"}),(0,d.jsx)("div",{className:"h-4 bg-slate-100 rounded w-96 mb-8"}),(0,d.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>(0,d.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 h-32"},a))})]})})})}function aS(a){return(0,d.jsx)(e.Suspense,{fallback:(0,d.jsx)(aR,{}),children:(0,d.jsx)(aQ,{...a})})}ap.map(a=>a.value)}};