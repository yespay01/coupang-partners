# 한글 코딩 가이드

AI 코딩 도구(Claude, Codex, GitHub Copilot 등)에서 한글을 올바르게 사용하기 위한 가이드입니다.

## 문제 상황

Codex나 GitHub Copilot 같은 AI 도구들은 기본적으로 영어 중심으로 학습되어,
한글 주석이나 문자열을 생성할 때 인코딩 문제나 부자연스러운 표현이 발생할 수 있습니다.

## 해결 방법

### 1. 파일 인코딩 설정

모든 텍스트 파일은 **UTF-8 인코딩**을 사용합니다.

#### Python 파일
파일 상단에 인코딩 선언을 추가합니다:

```python
# -*- coding: utf-8 -*-
"""
모듈 설명을 여기에 작성합니다.
"""
from __future__ import annotations

# 코드...
```

#### JavaScript/TypeScript 파일
별도 선언 없이 UTF-8로 저장하면 됩니다.

### 2. 에디터 설정

#### VSCode
`.vscode/settings.json`에 다음 설정 추가:

```json
{
  "files.encoding": "utf8",
  "files.autoGuessEncoding": false,
  "terminal.integrated.env.windows": {
    "PYTHONIOENCODING": "utf-8"
  }
}
```

#### .editorconfig
프로젝트 루트에 `.editorconfig` 파일 생성:

```ini
root = true

[*]
charset = utf-8
```

### 3. AI 도구 설정

#### .cursorrules 파일
Cursor 및 기타 AI 도구를 위한 규칙 파일을 프로젝트 루트에 생성합니다.

주요 내용:
- 한글 사용 정책
- 코딩 스타일
- 네이밍 규칙
- 프로젝트별 컨텍스트

자세한 내용은 프로젝트 루트의 `.cursorrules` 파일을 참고하세요.

## 한글 사용 규칙

### 사용해야 하는 곳
✅ **주석**: 코드 설명
```python
# 사용자 인증을 처리하는 함수
def authenticate_user():
    pass
```

✅ **Docstring**: 함수/클래스 문서화
```python
def process_data(data: str) -> dict:
    """
    데이터를 처리하고 결과를 반환합니다.

    Args:
        data: 처리할 입력 데이터

    Returns:
        처리된 결과 딕셔너리
    """
    pass
```

✅ **사용자 메시지**: UI 텍스트, 로그, 에러 메시지
```python
logger.info("파일 처리가 완료되었습니다")
st.success("대본이 성공적으로 생성되었습니다")
raise ValueError("입력값이 올바르지 않습니다")
```

✅ **문서**: README, 기획서 등
```markdown
# 프로젝트 설명
이 프로젝트는...
```

### 사용하지 않는 곳
❌ **변수명**: 영문 사용
```python
# 좋음
product_name = "상품명"

# 나쁨
상품명 = "상품명"
```

❌ **함수명**: 영문 사용
```python
# 좋음
def generate_script():
    pass

# 나쁨
def 대본생성():
    pass
```

❌ **클래스명**: 영문 사용
```python
# 좋음
class ScriptGenerator:
    pass

# 나쁨
class 대본생성기:
    pass
```

## 실전 예제

### 올바른 예제

```python
# -*- coding: utf-8 -*-
"""
쇼핑 쇼츠 대본 생성 모듈.

이 모듈은 상품 정보를 기반으로 30초 분량의 쇼츠 대본을 자동 생성합니다.
"""
from __future__ import annotations

from dataclasses import dataclass
from typing import Optional

import openai


@dataclass
class Product:
    """상품 정보를 담는 데이터 클래스."""

    name: str
    description: str
    price: int
    target_audience: Optional[str] = None


def generate_script(product: Product) -> str:
    """
    상품 정보를 바탕으로 쇼츠 대본을 생성합니다.

    Args:
        product: 대본을 생성할 상품 정보

    Returns:
        생성된 대본 텍스트

    Raises:
        ValueError: 상품명이 비어있는 경우
        openai.APIError: API 호출 실패 시
    """
    if not product.name:
        raise ValueError("상품명은 필수 항목입니다")

    try:
        # GPT API를 호출하여 대본 생성
        response = openai.ChatCompletion.create(
            model="gpt-4o-mini",
            messages=[
                {"role": "system", "content": "당신은 전문 카피라이터입니다."},
                {"role": "user", "content": f"{product.name}에 대한 30초 대본을 작성해주세요."}
            ]
        )

        script = response.choices[0].message.content
        print(f"대본 생성 완료: {len(script)}자")

        return script

    except openai.APIError as e:
        print(f"API 호출 중 오류 발생: {e}")
        raise
```

### 잘못된 예제

```python
# 인코딩 선언 없음
# docstring 없음
# 변수명에 한글 사용
# 에러 메시지 영어로 작성

def generate_script(상품):
    if not 상품.name:
        raise ValueError("Product name is required")  # ❌ 영어 메시지

    # ❌ 주석도 영어
    # Call GPT API
    response = call_api(상품.name)  # ❌ 변수명 한글

    return response
```

## AI 도구별 팁

### Claude
- 한글 지원이 우수하여 별도 설정 불필요
- Prompt에 "한글로 작성"이라고 명시하면 더 정확

### GitHub Copilot
- `.cursorrules` 파일 참고
- 주석을 한글로 작성하면 더 나은 제안 받음
- 예: `# 사용자 인증 처리` → 관련 코드 제안

### Cursor
- `.cursorrules` 파일을 자동으로 인식
- 프로젝트 컨텍스트를 잘 이해하여 한글 주석/메시지 생성

### Codex
- 영어 중심이므로 추가 Prompt 필요
- "Write comments in Korean" 같은 지시 추가
- 생성된 영어 메시지를 한글로 수동 변환 권장

## 파일 읽기/쓰기 시 주의사항

### Python

```python
# 항상 encoding 지정
with open("file.txt", "r", encoding="utf-8") as f:
    content = f.read()

with open("output.txt", "w", encoding="utf-8") as f:
    f.write("한글 텍스트")
```

### Pandas

```python
import pandas as pd

# CSV 읽기
df = pd.read_csv("data.csv", encoding="utf-8")

# CSV 쓰기
df.to_csv("output.csv", encoding="utf-8", index=False)
```

### JSON

```python
import json

# JSON 쓰기 (한글 유지)
with open("data.json", "w", encoding="utf-8") as f:
    json.dump(data, f, ensure_ascii=False, indent=2)
```

## 정규표현식 한글 처리

```python
import re

# 한글만 추출
pattern = re.compile(r'[가-힣]+')
result = pattern.findall("Hello 안녕하세요 123")
# ['안녕하세요']

# 한글 제거
text = re.sub(r'[가-힣]', '', "Hello 안녕하세요")
# 'Hello '

# 한글 포함 여부 확인
has_korean = bool(re.search(r'[가-힣]', text))
```

## 트러블슈팅

### 문제 1: Python 파일에서 한글이 깨짐
**원인**: 파일 인코딩이 UTF-8이 아님

**해결**:
1. 파일을 UTF-8로 저장
2. 파일 상단에 `# -*- coding: utf-8 -*-` 추가

### 문제 2: 터미널에서 한글 출력이 깨짐
**원인**: 터미널 인코딩 설정 문제

**해결** (Windows):
```bash
# PowerShell
$env:PYTHONIOENCODING="utf-8"

# CMD
set PYTHONIOENCODING=utf-8

# Git Bash는 기본적으로 UTF-8 지원
```

### 문제 3: AI 도구가 계속 영어로 제안함
**해결**:
1. `.cursorrules` 파일이 프로젝트 루트에 있는지 확인
2. 주석을 한글로 먼저 작성
3. Prompt에 "한글로 작성" 명시

### 문제 4: JSON 파일에서 한글이 \uXXXX로 저장됨
**해결**:
```python
json.dump(data, f, ensure_ascii=False)  # ensure_ascii=False 추가
```

## 체크리스트

새 프로젝트 시작 시:
- [ ] `.editorconfig` 파일 생성
- [ ] `.cursorrules` 파일 생성
- [ ] `.vscode/settings.json` 설정
- [ ] Python 파일에 인코딩 선언 추가
- [ ] README에 한글 사용 정책 명시

코드 작성 시:
- [ ] 변수/함수명은 영문
- [ ] 주석과 docstring은 한글
- [ ] 사용자 메시지는 한글
- [ ] 파일 읽기/쓰기 시 `encoding="utf-8"` 명시

코드 리뷰 시:
- [ ] 인코딩 선언이 있는가?
- [ ] 한글 메시지가 자연스러운가?
- [ ] 파일 인코딩이 UTF-8인가?
- [ ] 주석이 충분한가?

## 참고 자료

- [PEP 263 - Defining Python Source Code Encodings](https://peps.python.org/pep-0263/)
- [EditorConfig 공식 문서](https://editorconfig.org/)
- [VSCode 한글 설정 가이드](https://code.visualstudio.com/docs/editor/codebasics#_file-encoding-support)

---

**작성일**: 2025-10-31
**버전**: 1.0
