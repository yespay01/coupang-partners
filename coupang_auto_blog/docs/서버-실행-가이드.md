# ì›¹ ì„œë²„ ì‹¤í–‰ ê°€ì´ë“œ

## ë¹ ë¥¸ ì‹œì‘

### 1. Firebase ì„¤ì • í™•ì¸
`web/.env.local` íŒŒì¼ì— Firebase ì„¤ì •ì´ ìˆëŠ”ì§€ í™•ì¸:

```env
NEXT_PUBLIC_FIREBASE_API_KEY=your-api-key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project.firebasestorage.app
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your-sender-id
NEXT_PUBLIC_FIREBASE_APP_ID=your-app-id
```

### 2. ì„œë²„ ì‹¤í–‰
```bash
cd web
npm run dev
```

ì„œë²„ê°€ ì‹¤í–‰ë˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 (ë˜ëŠ” í‘œì‹œëœ í¬íŠ¸) ì ‘ì†

---

## ë¡œê·¸ì¸ ë°©ë²•

### ë°©ë²• 1: ë°”ì´íŒ¨ìŠ¤ ë¡œê·¸ì¸ (ê°œë°œìš© - ê¶Œì¥)

1. í™ˆí˜ì´ì§€ì—ì„œ "ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë³´ê¸°" í´ë¦­
2. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ìë™ ì´ë™
3. **"ë¡œì»¬ ê°œë°œìš© ì„¸ì…˜ ë°œê¸‰ (ADMIN_GUARD_BYPASS)"** ë²„íŠ¼ í´ë¦­
4. ëŒ€ì‹œë³´ë“œë¡œ ìë™ ì´ë™

### ë°©ë²• 2: Firebase ê³„ì • ë¡œê·¸ì¸

1. Firebase Consoleì—ì„œ ê³„ì • ìƒì„± í•„ìš”
2. Custom Claim `admin=true` ì„¤ì • í•„ìš”
3. ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥

### ë°©ë²• 3: í™˜ê²½ë³€ìˆ˜ë¡œ ë°”ì´íŒ¨ìŠ¤ (ì„ íƒì‚¬í•­)

`web/.env.local`ì— ì¶”ê°€:
```env
ADMIN_GUARD_BYPASS=true
```

ì„œë²„ ì¬ì‹œì‘ í›„ ë¡œê·¸ì¸ ì—†ì´ ë°”ë¡œ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ ê°€ëŠ¥

---

## Firestore ì„¤ì •

### ë³´ì•ˆ ê·œì¹™ ì„¤ì • (í•„ìˆ˜)

1. Firebase Console ì ‘ì†: https://console.firebase.google.com
2. í”„ë¡œì íŠ¸ ì„ íƒ
3. **Firestore Database** â†’ **ê·œì¹™(Rules)** íƒ­
4. ë‹¤ìŒ ê·œì¹™ìœ¼ë¡œ ë³€ê²½:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;  // ê°œë°œìš©
    }
  }
}
```

5. **ê²Œì‹œ** ë²„íŠ¼ í´ë¦­

---

## ë¬¸ì œ í•´ê²°

### Firebase ì´ˆê¸°í™” ì‹¤íŒ¨
**ì¦ìƒ**: `Missing App configuration value: "projectId"`
**í•´ê²°**: `.env.local`ì— Firebase ì„¤ì • ì¶”ê°€ (ìœ„ ì°¸ì¡°)

### limit is not a function ì˜¤ë¥˜
**ì¦ìƒ**: `TypeError: limit is not a function`
**í•´ê²°**: ì´ë¯¸ ìˆ˜ì •ë¨ (`web/lib/firestore.ts`ì˜ limit â†’ limitQuery)

### Firestore ê¶Œí•œ ì˜¤ë¥˜
**ì¦ìƒ**: `Missing or insufficient permissions`
**í•´ê²°**: Firebase Consoleì—ì„œ Firestore ë³´ì•ˆ ê·œì¹™ ì„¤ì • (ìœ„ ì°¸ì¡°)

### Next.js ìºì‹œ ì˜¤ë¥˜
**ì¦ìƒ**: `Invariant: Expected clientReferenceManifest to be defined`
**í•´ê²°**:
```bash
cd web
rm -rf .next
npm run dev
```

### í¬íŠ¸ ì¶©ëŒ
**ì¦ìƒ**: `Port 3000 is in use`
**í•´ê²°**:
- ìë™ìœ¼ë¡œ ë‹¤ë¥¸ í¬íŠ¸(3001, 3002 ë“±) ì‚¬ìš©
- ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ í›„ ì¬ì‹¤í–‰

---

## ì£¼ìš” í˜ì´ì§€

- í™ˆ: http://localhost:3000
- ë¡œê·¸ì¸: http://localhost:3000/admin/login
- ëŒ€ì‹œë³´ë“œ: http://localhost:3000/admin
- ë¦¬ë·° ê´€ë¦¬: http://localhost:3000/admin/reviews

---

## ê°œë°œ íŒ

### ì„œë²„ ì¬ì‹œì‘ì´ í•„ìš”í•œ ê²½ìš°
- `.env.local` íŒŒì¼ ìˆ˜ì • ì‹œ
- middleware.ts íŒŒì¼ ìˆ˜ì • ì‹œ
- next.config.ts íŒŒì¼ ìˆ˜ì • ì‹œ

### ì„œë²„ ì¬ì‹œì‘ ë°©ë²•
1. í„°ë¯¸ë„ì—ì„œ `Ctrl + C`
2. `npm run dev` ë‹¤ì‹œ ì‹¤í–‰

### ìºì‹œ ë¬¸ì œ ë°œìƒ ì‹œ
```bash
# Next.js ìºì‹œ ì‚­ì œ
rm -rf .next

# ë¸Œë¼ìš°ì € ê°•ì œ ìƒˆë¡œê³ ì¹¨
Ctrl + Shift + R  (Windows/Linux)
Cmd + Shift + R   (Mac)
```

---

## ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

âš ï¸ **ê°œë°œ í™˜ê²½ ì „ìš© ì„¤ì •**

í˜„ì¬ ì„¤ì •ì€ ê°œë°œ í™˜ê²½ìš©ì…ë‹ˆë‹¤:
- Firestore ê·œì¹™: ëª¨ë“  ì½ê¸°/ì“°ê¸° í—ˆìš©
- ë°”ì´íŒ¨ìŠ¤ ë¡œê·¸ì¸: ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥

ğŸ”’ **í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ í•„ìˆ˜ ì‘ì—…**
1. Firestore ë³´ì•ˆ ê·œì¹™ ê°•í™”
2. `ADMIN_GUARD_BYPASS` ì œê±° ë˜ëŠ” false ì„¤ì •
3. Firebase Admin SDK ì„¤ì •
4. í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ Git ì œì™¸ í™•ì¸ (`.gitignore`ì— `.env.local` í¬í•¨)

---

## ì°¸ê³  ë§í¬

- [Firebase Console](https://console.firebase.google.com)
- [Next.js ë¬¸ì„œ](https://nextjs.org/docs)
- [Firestore ë³´ì•ˆ ê·œì¹™ ê°€ì´ë“œ](https://firebase.google.com/docs/firestore/security/get-started)
