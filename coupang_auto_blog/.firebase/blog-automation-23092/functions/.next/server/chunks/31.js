exports.id=31,exports.ids=[31],exports.modules={240:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,65169,23))},9968:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,3991,23))},13328:(a,b,c)=>{"use strict";c.d(b,{C:()=>f});var d=c(11453),e=c(93384);let f=(0,d.v)(a=>({settings:e.a$,isLoading:!0,isSaving:!1,error:null,activeTab:"automation",hasUnsavedChanges:!1,setSettings:b=>a({settings:b,hasUnsavedChanges:!1}),setLoading:b=>a({isLoading:b}),setSaving:b=>a({isSaving:b}),setError:b=>a({error:b}),setActiveTab:b=>a({activeTab:b}),setHasUnsavedChanges:b=>a({hasUnsavedChanges:b}),setAutomationEnabled:b=>a(a=>({settings:{...a.settings,automation:{...a.settings.automation,enabled:b}},hasUnsavedChanges:!0})),setCollectSchedule:b=>a(a=>({settings:{...a.settings,automation:{...a.settings.automation,collectSchedule:b}},hasUnsavedChanges:!0})),setMaxProductsPerRun:b=>a(a=>({settings:{...a.settings,automation:{...a.settings.automation,maxProductsPerRun:b}},hasUnsavedChanges:!0})),setCategories:b=>a(a=>({settings:{...a.settings,topics:{...a.settings.topics,categories:b}},hasUnsavedChanges:!0})),toggleCategory:b=>a(a=>({settings:{...a.settings,topics:{...a.settings.topics,categories:a.settings.topics.categories.map(a=>a.id===b?{...a,enabled:!a.enabled}:a)}},hasUnsavedChanges:!0})),setKeywords:b=>a(a=>({settings:{...a.settings,topics:{...a.settings.topics,keywords:b}},hasUnsavedChanges:!0})),addKeyword:b=>a(a=>{let c=b.trim();return!c||a.settings.topics.keywords.includes(c)?a:{settings:{...a.settings,topics:{...a.settings.topics,keywords:[...a.settings.topics.keywords,c]}},hasUnsavedChanges:!0}}),removeKeyword:b=>a(a=>({settings:{...a.settings,topics:{...a.settings.topics,keywords:a.settings.topics.keywords.filter(a=>a!==b)}},hasUnsavedChanges:!0})),setGoldboxEnabled:b=>a(a=>({settings:{...a.settings,topics:{...a.settings.topics,goldboxEnabled:b}},hasUnsavedChanges:!0})),setCoupangPLBrands:b=>a(a=>({settings:{...a.settings,topics:{...a.settings.topics,coupangPLBrands:b}},hasUnsavedChanges:!0})),toggleCoupangPLBrand:b=>a(a=>{let c=a.settings.topics.coupangPLBrands||[],d=c.includes(b)?c.filter(a=>a!==b):[...c,b];return{settings:{...a.settings,topics:{...a.settings.topics,coupangPLBrands:d}},hasUnsavedChanges:!0}}),setDefaultProvider:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,defaultProvider:b}},hasUnsavedChanges:!0})),setOpenAIApiKey:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,openai:{...a.settings.ai.openai,apiKey:b}}},hasUnsavedChanges:!0})),setOpenAIModel:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,openai:{...a.settings.ai.openai,model:b}}},hasUnsavedChanges:!0})),setAnthropicApiKey:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,anthropic:{...a.settings.ai.anthropic,apiKey:b}}},hasUnsavedChanges:!0})),setAnthropicModel:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,anthropic:{...a.settings.ai.anthropic,model:b}}},hasUnsavedChanges:!0})),setGoogleApiKey:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,google:{...a.settings.ai.google,apiKey:b}}},hasUnsavedChanges:!0})),setGoogleModel:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,google:{...a.settings.ai.google,model:b}}},hasUnsavedChanges:!0})),setTemperature:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,temperature:b}},hasUnsavedChanges:!0})),setMaxTokens:b=>a(a=>({settings:{...a.settings,ai:{...a.settings.ai,maxTokens:b}},hasUnsavedChanges:!0})),setSystemPrompt:b=>a(a=>({settings:{...a.settings,prompt:{...a.settings.prompt,systemPrompt:b}},hasUnsavedChanges:!0})),setReviewTemplate:b=>a(a=>({settings:{...a.settings,prompt:{...a.settings.prompt,reviewTemplate:b}},hasUnsavedChanges:!0})),setMinLength:b=>a(a=>({settings:{...a.settings,prompt:{...a.settings.prompt,minLength:b}},hasUnsavedChanges:!0})),setMaxLength:b=>a(a=>({settings:{...a.settings,prompt:{...a.settings.prompt,maxLength:b}},hasUnsavedChanges:!0})),setToneScoreThreshold:b=>a(a=>({settings:{...a.settings,prompt:{...a.settings.prompt,toneScoreThreshold:b}},hasUnsavedChanges:!0})),setCoupangEnabled:b=>a(a=>({settings:{...a.settings,coupang:{...a.settings.coupang,enabled:b}},hasUnsavedChanges:!0})),setCoupangAccessKey:b=>a(a=>({settings:{...a.settings,coupang:{...a.settings.coupang,accessKey:b}},hasUnsavedChanges:!0})),setCoupangSecretKey:b=>a(a=>({settings:{...a.settings,coupang:{...a.settings.coupang,secretKey:b}},hasUnsavedChanges:!0})),setCoupangPartnerId:b=>a(a=>({settings:{...a.settings,coupang:{...a.settings.coupang,partnerId:b}},hasUnsavedChanges:!0})),setCoupangSubId:b=>a(a=>({settings:{...a.settings,coupang:{...a.settings.coupang,subId:b}},hasUnsavedChanges:!0})),resetToDefaults:()=>a({settings:e.a$,hasUnsavedChanges:!0})}))},41707:(a,b,c)=>{"use strict";c.d(b,{RG:()=>u,wU:()=>t,e6:()=>s});var d=c(38301),e=c(96610),f=c(21393),g=c(72124),h=c(60262),i=c(67402),j=c(90642),k=c(93384);let l="system_settings",m="global";async function n(){var a;let b=await (0,j.Lf)(),c=(0,i.H9)(b,l,m),d=await (0,i.x7)(c);return d.exists()?(a=d.data(),{automation:{...k.a$.automation,...a.automation},topics:{...k.a$.topics,...a.topics},ai:{...k.a$.ai,openai:{...k.a$.ai.openai,...a.ai?.openai??{}},anthropic:{...k.a$.ai.anthropic,...a.ai?.anthropic??{}},google:{...k.a$.ai.google,...a.ai?.google??{}},defaultProvider:a.ai?.defaultProvider??k.a$.ai.defaultProvider,temperature:a.ai?.temperature??k.a$.ai.temperature,maxTokens:a.ai?.maxTokens??k.a$.ai.maxTokens},prompt:{...k.a$.prompt,...a.prompt},coupang:{...k.a$.coupang,...a.coupang},updatedAt:a.updatedAt,updatedBy:a.updatedBy}):(await o(),k.a$)}async function o(){let a=await (0,j.Lf)(),b=(0,i.H9)(a,l,m);await (0,i.BN)(b,{...k.a$,updatedAt:(0,i.O5)(),updatedBy:"system"})}async function p(a,b="admin"){let c=await (0,j.Lf)(),d=(0,i.H9)(c,l,m);if(!(await (0,i.x7)(d)).exists())return void await (0,i.BN)(d,{...k.a$,...a,updatedAt:(0,i.O5)(),updatedBy:b});let e={updatedAt:(0,i.O5)(),updatedBy:b};a.automation&&Object.entries(a.automation).forEach(([a,b])=>{e[`automation.${a}`]=b}),a.topics&&Object.entries(a.topics).forEach(([a,b])=>{e[`topics.${a}`]=b}),a.ai&&(void 0!==a.ai.defaultProvider&&(e["ai.defaultProvider"]=a.ai.defaultProvider),void 0!==a.ai.temperature&&(e["ai.temperature"]=a.ai.temperature),void 0!==a.ai.maxTokens&&(e["ai.maxTokens"]=a.ai.maxTokens),a.ai.openai&&Object.entries(a.ai.openai).forEach(([a,b])=>{e[`ai.openai.${a}`]=b}),a.ai.anthropic&&Object.entries(a.ai.anthropic).forEach(([a,b])=>{e[`ai.anthropic.${a}`]=b}),a.ai.google&&Object.entries(a.ai.google).forEach(([a,b])=>{e[`ai.google.${a}`]=b})),a.prompt&&Object.entries(a.prompt).forEach(([a,b])=>{e[`prompt.${a}`]=b}),a.coupang&&Object.entries(a.coupang).forEach(([a,b])=>{e[`coupang.${a}`]=b}),await (0,i.mZ)(d,e)}var q=c(13328);let r=["system-settings"];function s(){let{status:a}=(0,h.D)(),b=(0,e.jE)(),{settings:c,setSettings:i,setLoading:j,setSaving:k,setError:l,isLoading:m,isSaving:o,error:s,hasUnsavedChanges:t,setHasUnsavedChanges:u}=(0,q.C)(),{data:v,isLoading:w,error:x,refetch:y}=(0,f.I)({queryKey:r,queryFn:n,enabled:"ready"===a,staleTime:3e5,gcTime:18e5}),z=(0,g.n)({mutationFn:a=>p(a),onMutate:()=>{k(!0),l(null)},onSuccess:()=>{u(!1),b.invalidateQueries({queryKey:r})},onError:a=>{l(a instanceof Error?a.message:"설정 저장 실패")},onSettled:()=>{k(!1)}}),A=(0,d.useCallback)(async()=>{await z.mutateAsync(c)},[z,c]),B=(0,d.useCallback)(async a=>{let b=c[a];b&&await z.mutateAsync({[a]:b})},[z,c]),C=(0,d.useCallback)(()=>{v&&i(v)},[v,i]);return{settings:c,remoteSettings:v,isLoading:m||w,isSaving:o,error:s,hasUnsavedChanges:t,saveSettings:A,saveSection:B,discardChanges:C,refetch:y}}function t(){let{settings:a}=(0,q.C)(),b=(0,d.useCallback)(()=>{let b=[],{automation:c}=a;return(c.maxProductsPerRun<1||c.maxProductsPerRun>100)&&b.push("1회 최대 수집 상품 수는 1~100 사이여야 합니다."),/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(c.collectSchedule)||b.push("수집 스케줄 형식이 올바르지 않습니다. (HH:mm)"),b},[a]),c=(0,d.useCallback)(()=>{let b=[],{ai:c}=a;return(c.temperature<0||c.temperature>2)&&b.push("Temperature는 0~2 사이여야 합니다."),(c.maxTokens<100||c.maxTokens>8192)&&b.push("Max Tokens는 100~8192 사이여야 합니다."),c[c.defaultProvider].apiKey||b.push(`(권장) ${c.defaultProvider} API 키가 설정되지 않았습니다.`),b},[a]),e=(0,d.useCallback)(()=>{let b=[],{prompt:c}=a;return(c.minLength<10||c.minLength>500)&&b.push("최소 글자 수는 10~500 사이여야 합니다."),(c.maxLength<c.minLength||c.maxLength>2e3)&&b.push("최대 글자 수는 최소값보다 크고 2000 이하여야 합니다."),(c.toneScoreThreshold<0||c.toneScoreThreshold>1)&&b.push("톤 점수 임계값은 0~1 사이여야 합니다."),c.systemPrompt.trim()||b.push("시스템 프롬프트를 입력해주세요."),c.reviewTemplate.trim()||b.push("리뷰 템플릿을 입력해주세요."),b},[a]),f=(0,d.useCallback)(()=>{let b=[],{coupang:c}=a;return c.enabled&&(c.accessKey||b.push("(권장) 쿠팡 Access Key를 입력해주세요."),c.secretKey||b.push("(권장) 쿠팡 Secret Key를 입력해주세요."),c.partnerId||b.push("(권장) 쿠팡 Partner ID를 입력해주세요.")),b},[a]),g=(0,d.useCallback)(()=>[...b(),...c(),...e(),...f()],[b,c,e,f]);return{validateAutomation:b,validateAI:c,validatePrompt:e,validateCoupang:f,validateAll:g}}function u(){let{settings:a}=(0,q.C)(),b=(0,g.n)({mutationFn:async()=>{let b=await fetch("/api/settings/coupang/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessKey:a.coupang.accessKey,secretKey:a.coupang.secretKey,partnerId:a.coupang.partnerId})});if(!b.ok)throw Error("연결 테스트 실패");return b.json()}});return{testConnection:b.mutate,isTestingConnection:b.isPending,testResult:b.data,testError:b.error,resetTest:b.reset}}},86457:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>g});var d=c(75338),e=c(65169),f=c.n(e);let g={title:"관리자 대시보드 | 쿠팡 자동 블로그"};function h({children:a}){return(0,d.jsxs)("div",{className:"min-h-screen bg-slate-900 text-slate-100",children:[(0,d.jsx)("header",{className:"border-b border-white/10 bg-slate-900/80 backdrop-blur",children:(0,d.jsxs)("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-6 py-4 sm:px-8",children:[(0,d.jsx)(f(),{href:"/",className:"text-sm font-semibold tracking-tight text-white",children:"쿠팡 자동 블로그"}),(0,d.jsxs)("nav",{className:"flex items-center gap-4 text-xs font-medium text-slate-300 sm:text-sm",children:[(0,d.jsx)(f(),{href:"/admin",className:"hover:text-white",children:"대시보드"}),(0,d.jsx)(f(),{href:"/admin/reviews",className:"hover:text-white",children:"후기 승인"}),(0,d.jsx)(f(),{href:"/admin/logs",className:"hover:text-white",children:"로그 뷰어"}),(0,d.jsx)(f(),{href:"/admin/settings",className:"hover:text-white",children:"설정"})]})]})}),(0,d.jsx)("main",{className:"bg-slate-50 text-slate-900",children:a})]})}},93384:(a,b,c)=>{"use strict";c.d(b,{R_:()=>e,a$:()=>g,uZ:()=>d,yV:()=>f});let d=[{id:"1001",name:"탐사"},{id:"1002",name:"코멧"},{id:"1003",name:"Gomgom"},{id:"1004",name:"줌"},{id:"1006",name:"곰곰"},{id:"1007",name:"꼬리별"},{id:"1008",name:"베이스알파에센셜"},{id:"1010",name:"비타할로"},{id:"1011",name:"비지엔젤"}],e=`당신은 전문적인 상품 리뷰 작성자입니다.
실제 사용 경험을 바탕으로 생생하고 신뢰감 있는 리뷰를 작성해주세요.
광고성 문구나 과장된 표현은 피하고, 솔직하고 도움이 되는 내용을 담아주세요.`,f=`{productName} ({category}) 상품에 대한 후기를 생생하게 작성해주세요.
{minLength}~{maxLength}자 분량으로, 실제 사용 경험처럼 묘사하고 광고성 문구는 삼가주세요.
예: "배송이 빨라서 원하는 날에 도착했고, 품질도 만족스러워 인테리어에도 잘 어울려요."`,g={automation:{enabled:!1,collectSchedule:"02:00",maxProductsPerRun:10},topics:{categories:[{id:"1",name:"패션의류/잡화",enabled:!1},{id:"2",name:"뷰티",enabled:!1},{id:"3",name:"출산/유아동",enabled:!1},{id:"4",name:"식품",enabled:!1},{id:"5",name:"주방용품",enabled:!1},{id:"6",name:"생활용품",enabled:!1},{id:"7",name:"홈인테리어",enabled:!1},{id:"8",name:"가전디지털",enabled:!1},{id:"9",name:"스포츠/레저",enabled:!1},{id:"10",name:"자동차용품",enabled:!1},{id:"11",name:"도서/음반/DVD",enabled:!1},{id:"12",name:"완구/취미",enabled:!1},{id:"13",name:"문구/오피스",enabled:!1},{id:"14",name:"반려동물용품",enabled:!1},{id:"15",name:"헬스/건강식품",enabled:!1}],keywords:[],goldboxEnabled:!0,coupangPLBrands:[]},ai:{defaultProvider:"openai",openai:{apiKey:"",model:"gpt-4o-mini"},anthropic:{apiKey:"",model:"claude-3-5-sonnet-20241022"},google:{apiKey:"",model:"gemini-1.5-flash"},temperature:.7,maxTokens:1024},prompt:{systemPrompt:e,reviewTemplate:f,minLength:90,maxLength:170,toneScoreThreshold:.4},coupang:{enabled:!1,accessKey:"",secretKey:"",partnerId:"",subId:""}}}};