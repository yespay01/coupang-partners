(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},372:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),r=a(2115),l=a(63),n=a(2619),i=a.n(n),o=a(6436),c=a(9708);async function d(e,t){var a;let s=await (0,o.Lf)(),r=(0,c.P)((0,c.rJ)(s,"reviews"),(0,c._M)("status","==","published"),(0,c.My)("createdAt","desc"),(0,c.AB)(e+1));t&&(r=(0,c.P)((0,c.rJ)(s,"reviews"),(0,c._M)("status","==","published"),(0,c.My)("createdAt","desc"),(0,c.HM)(t),(0,c.AB)(e+1)));let l=(await (0,c.GG)(r)).docs.slice(0,e);return{reviews:l.map(e=>{var t;let a=e.data();return{id:e.id,productId:a.productId,productName:a.productName,author:a.author,status:a.status,content:a.content,category:a.category,createdAt:(0,o.st)(a.createdAt),updatedAt:(0,o.st)(null!=(t=a.updatedAt)?t:a.createdAt),toneScore:a.toneScore,charCount:a.charCount}}),lastDoc:null!=(a=l[l.length-1])?a:null}}function u(e){let{review:t}=e;return(0,s.jsx)(i(),{href:"/review/".concat(t.id),children:(0,s.jsxs)("article",{className:"group h-full rounded-2xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-lg cursor-pointer",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[t.category&&(0,s.jsx)("span",{className:"inline-block rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-700 mb-2",children:t.category}),(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-600 transition line-clamp-2",children:t.productName||"상품 리뷰 #".concat(t.id.slice(0,6))}),(0,s.jsx)("p",{className:"mt-2 text-sm text-slate-600 line-clamp-3",children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120;if(!e)return"";let a=e?e.replace(/<!--[\s\S]*?-->/g,"").replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/\s+/g," ").trim():"";return a.length<=t?a:a.slice(0,t)+"..."}(t.content||"",150)})]})}),(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-slate-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),t.author||"AI 리뷰어"]}),(0,s.jsx)("span",{children:function(e){if(!e)return"";let t=new Date(e);return Number.isNaN(t.getTime())?e:new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"long",day:"numeric"}).format(t)}(t.createdAt||"")})]}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 font-medium text-blue-600 group-hover:text-blue-700 transition",children:["자세히 보기",(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})}function m(){return(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-slate-200 rounded w-16 mb-3"}),(0,s.jsx)("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-3"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-slate-100 rounded w-full"}),(0,s.jsx)("div",{className:"h-4 bg-slate-100 rounded w-5/6"})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"h-3 bg-slate-100 rounded w-24"}),(0,s.jsx)("div",{className:"h-3 bg-slate-100 rounded w-16"})]})]})}function x(){return(0,s.jsxs)("div",{className:"rounded-3xl border-2 border-dashed border-slate-200 bg-slate-50/50 p-12 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"아직 게시된 리뷰가 없습니다"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 mb-6",children:"관리자가 리뷰를 승인하면 여기에 표시됩니다."}),(0,s.jsx)(i(),{href:"/",className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white hover:bg-slate-800 transition",children:"홈으로 돌아가기"})]})}let h=[{name:"전체",slug:"all"},{name:"라이프스타일",slug:"lifestyle"},{name:"디지털/가전",slug:"digital"},{name:"주방/쿠킹",slug:"kitchen"},{name:"패션/뷰티",slug:"fashion"}];function p(){let e=(0,l.useSearchParams)().get("sort")||"latest",[t,a]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[c,p]=(0,r.useState)(null),[f,g]=(0,r.useState)("all"),[b,v]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{!async function(){try{o(!0),p(null);let e=await d(12);a(e.reviews),y(e.lastDoc),v(12===e.reviews.length)}catch(e){console.error("리뷰 로딩 실패:",e),p("리뷰를 불러오는 중 오류가 발생했습니다.")}finally{o(!1)}}()},[]);let A=async()=>{if(N&&!w)try{j(!0);let e=await d(12,N);a(t=>[...t,...e.reviews]),y(e.lastDoc),v(12===e.reviews.length)}catch(e){console.error("추가 로딩 실패:",e)}finally{j(!1)}},k="all"===f?t:t.filter(e=>e.category===f);return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-white via-slate-50/50 to-white",children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/80 backdrop-blur-lg",children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6",children:(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,s.jsxs)(i(),{href:"/",className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"C"})}),(0,s.jsx)("span",{className:"font-bold text-slate-900",children:"쿠팡 리뷰"})]}),(0,s.jsx)(i(),{href:"/admin",className:"rounded-full bg-slate-900 px-4 py-2 text-xs font-semibold text-white hover:bg-slate-800 transition",children:"관리자"})]})})}),(0,s.jsx)("div",{className:"bg-white border-b border-slate-100",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6",children:[(0,s.jsxs)("nav",{className:"flex items-center gap-2 text-sm text-slate-500 mb-4",children:[(0,s.jsx)(i(),{href:"/",className:"hover:text-slate-700 transition",children:"홈"}),(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"text-slate-900 font-medium",children:"리뷰 목록"})]}),(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"popular"===e?"인기 리뷰":"모든 리뷰"}),(0,s.jsx)("p",{className:"mt-2 text-slate-600",children:"AI가 분석하고 정리한 쿠팡 파트너스 상품 리뷰를 확인하세요."})]})}),(0,s.jsx)("div",{className:"border-b border-slate-100 bg-white",children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl px-4 py-3 sm:px-6",children:(0,s.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:h.map(e=>(0,s.jsx)("button",{onClick:()=>g(e.slug),className:"flex-shrink-0 rounded-full px-4 py-1.5 text-sm font-medium transition ".concat(f===e.slug?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:e.name},e.slug))})})}),(0,s.jsxs)("main",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 sm:py-12",children:[c&&(0,s.jsx)("div",{className:"mb-8 rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700",children:c}),n?(0,s.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,t)=>(0,s.jsx)(m,{},t))}):k.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4 text-sm text-slate-500",children:["총 ",k.length,"개의 리뷰"]}),(0,s.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:k.map(e=>(0,s.jsx)(u,{review:e},e.id))}),b&&"all"===f&&(0,s.jsx)("div",{className:"mt-10 text-center",children:(0,s.jsx)("button",{onClick:A,disabled:w,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50 transition disabled:opacity-50",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-600"}),"로딩 중..."]}):(0,s.jsxs)(s.Fragment,{children:["더 보기",(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})})]}):(0,s.jsx)(x,{})]}),(0,s.jsx)("footer",{className:"border-t border-slate-200 bg-white mt-12",children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-slate-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-xs",children:"C"})}),(0,s.jsx)("span",{children:"쿠팡 파트너스 자동화 블로그"})]}),(0,s.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Coupang Partners Auto Blog"]})]})})})]})}function f(){return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-white via-slate-50/50 to-white",children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl px-4 py-12 sm:px-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-slate-200 rounded w-48 mb-4"}),(0,s.jsx)("div",{className:"h-4 bg-slate-100 rounded w-64"})]})})})}function g(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(f,{}),children:(0,s.jsx)(p,{})})}},1615:(e,t,a)=>{Promise.resolve().then(a.bind(a,372))},6436:(e,t,a)=>{"use strict";a.d(t,{EZ:()=>x,Gm:()=>f,Lf:()=>i,RV:()=>h,WD:()=>u,bx:()=>p,e_:()=>n,hc:()=>d,st:()=>m,xN:()=>c});var s=a(9708),r=a(8789);let l=null;async function n(e){var t,a;let{limit:r,startAfterDoc:l,levels:n,createdAfter:o}=e,c=await i(),d=[(0,s.My)("createdAt","desc"),(0,s.AB)(r+1)],u=null==n?void 0:n.filter(Boolean);u&&u.length&&u.length<3&&d.push((0,s._M)("level","in",u)),o&&d.push((0,s._M)("createdAt",">=",o)),l&&d.push((0,s.HM)(l));let x=await (0,s.GG)((0,s.P)((0,s.rJ)(c,"logs"),...d)),h=x.docs.slice(0,r),p=x.docs.length>r,f=await (0,s.d_)((0,s.rJ)(c,"logs"));return{documents:h.map(e=>{var t,a,s;let r=e.data();return{id:e.id,level:r.level,message:null!=(t=r.message)?t:r.type,type:r.type,createdAt:m(r.createdAt),context:null!=(s=r.context)?s:JSON.stringify(null!=(a=r.payload)?a:{}),payload:r.payload}}),firstSnapshot:null!=(t=h[0])?t:null,lastSnapshot:null!=(a=h[h.length-1])?a:null,hasMore:p,totalCount:f.data().count}}async function i(){if(l)return l;let{app:e}=await (0,r.w)();return l=(0,s.aU)(e)}async function o(e,t){let a=await i();return(0,s.P)((0,s.rJ)(a,e),(0,s.My)("createdAt","desc"),(0,s.AB)(t))}async function c(e,t,a){try{let r=await o(e,t);return(0,s.aQ)(r,e=>{let t=e.docs.map(e=>{let t=e.data();return{id:e.id,...t}});a(t)},t=>{console.warn("[firestore] subscribe failed for ".concat(e,":"),t),a([])})}catch(t){return console.warn("[firestore] subscribe setup failed for ".concat(e,":"),t),a([]),()=>{}}}async function d(e,t){let a=await i();await (0,s.gS)((0,s.rJ)(a,e),{...t,createdAt:(0,s.O5)()})}async function u(e,t){let a=await i(),r=(0,s.H9)(a,"reviews",e);await (0,s.mZ)(r,{status:t,updatedAt:(0,s.O5)()})}function m(e){return e?"string"==typeof e?e:e instanceof Date?e.toISOString():"function"==typeof e.toDate?e.toDate().toISOString():"":""}async function x(e){var t,a;let{limit:r,startAfterDoc:l,statuses:n,updatedAfter:o}=e,c=await i(),d=[(0,s.My)("updatedAt","desc"),(0,s.AB)(r+1)],u=null==n?void 0:n.filter(Boolean);u&&u.length&&u.length<4&&d.push((0,s._M)("status","in",u)),o&&d.push((0,s._M)("updatedAt",">=",o)),l&&d.push((0,s.HM)(l));let x=await (0,s.GG)((0,s.P)((0,s.rJ)(c,"reviews"),...d)),h=x.docs.slice(0,r),p=x.docs.length>r,f=await (0,s.d_)((0,s.rJ)(c,"reviews"));return{documents:h.map(e=>{var t;let a=e.data();return{id:e.id,productId:a.productId,productName:a.productName,author:a.author,status:a.status,updatedAt:m(null!=(t=a.updatedAt)?t:a.createdAt),createdAt:m(a.createdAt),content:a.content,toneScore:a.toneScore,charCount:a.charCount}}),firstSnapshot:null!=(t=h[0])?t:null,lastSnapshot:null!=(a=h[h.length-1])?a:null,hasMore:p,totalCount:f.data().count}}async function h(e){var t;let a=await i(),r=(0,s.H9)(a,"reviews",e),l=await (0,s.x7)(r);if(!l.exists())return null;let n=l.data();return{id:l.id,productId:n.productId,productName:n.productName,author:n.author,status:n.status,updatedAt:m(null!=(t=n.updatedAt)?t:n.createdAt),createdAt:m(n.createdAt),content:n.content,toneScore:n.toneScore,charCount:n.charCount,category:n.category,affiliateUrl:n.affiliateUrl,media:n.media}}async function p(e){var t,a,r,l,n;let o=await i();return(await (0,s.gS)((0,s.rJ)(o,"reviews"),{productName:e.productName,content:e.content,category:null!=(t=e.category)?t:"",affiliateUrl:null!=(a=e.affiliateUrl)?a:"",author:null!=(r=e.author)?r:"관리자",status:null!=(l=e.status)?l:"draft",media:null!=(n=e.media)?n:[],charCount:e.content.length,toneScore:.7,createdAt:(0,s.O5)(),updatedAt:(0,s.O5)()})).id}async function f(e,t){let a=await i(),r=(0,s.H9)(a,"reviews",e),l={updatedAt:(0,s.O5)()};void 0!==t.productName&&(l.productName=t.productName),void 0!==t.content&&(l.content=t.content,l.charCount=t.content.length),void 0!==t.category&&(l.category=t.category),void 0!==t.affiliateUrl&&(l.affiliateUrl=t.affiliateUrl),void 0!==t.author&&(l.author=t.author),void 0!==t.status&&(l.status=t.status),void 0!==t.media&&(l.media=t.media),await (0,s.mZ)(r,l)}},8789:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var s=a(2078),r=a(8871);let l=null;async function n(){if(l)return l;let e=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)(function(){return{apiKey:"AIzaSyCPI1msAqKlbF83upcdEClY9xlAMhJs-3I",authDomain:"blog-automation-23092.firebaseapp.com",projectId:"blog-automation-23092",storageBucket:"blog-automation-23092.firebasestorage.app",messagingSenderId:"944342575434",appId:"1:944342575434:web:f9ee17d38296ffe0aaf9b3",measurementId:""}}()),t=null;return t=await (0,r.TT)()?(0,r.P5)(e):null,l={app:e,analytics:t}}}},e=>{e.O(0,[992,200,659,619,441,255,358],()=>e(e.s=1615)),_N_E=e.O()}]);