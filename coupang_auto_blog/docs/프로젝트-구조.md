# í”„ë¡œì íŠ¸ êµ¬ì¡°

> ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ìë™ ë¸”ë¡œê·¸ í”„ë¡œì íŠ¸ ì „ì²´ êµ¬ì¡°

---

## ğŸ“ ì „ì²´ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
coupang_auto_blog/
â”œâ”€â”€ web/                      # Next.js ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ functions/                # Firebase Functions (ìë™í™”)
â”œâ”€â”€ docs/                     # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”œâ”€â”€ .firebase/                # Firebase ë°°í¬ ì„¤ì •
â”œâ”€â”€ firebase.json             # Firebase ì„¤ì •
â”œâ”€â”€ .firebaserc              # Firebase í”„ë¡œì íŠ¸ ì •ë³´
â””â”€â”€ README.md                # í”„ë¡œì íŠ¸ ì†Œê°œ
```

---

## ğŸŒ web/ - Next.js ì›¹ ì•±

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
web/
â”œâ”€â”€ app/                      # Next.js 15 App Router
â”‚   â”œâ”€â”€ (dashboard)/          # ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒ ê·¸ë£¹
â”‚   â”‚   â”œâ”€â”€ admin/            # ê´€ë¦¬ì í˜ì´ì§€
â”‚   â”‚   â”‚   â”œâ”€â”€ login/        # ë¡œê·¸ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ reviews/      # ë¦¬ë·° ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ products/     # ìƒí’ˆ ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ settings/     # ì„¤ì •
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # ëŒ€ì‹œë³´ë“œ ë©”ì¸
â”‚   â”‚   â””â”€â”€ layout.tsx        # ëŒ€ì‹œë³´ë“œ ê³µí†µ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ api/                  # API Routes
â”‚   â”‚   â”œâ”€â”€ admin/            # ê´€ë¦¬ì API
â”‚   â”‚   â”‚   â”œâ”€â”€ session/      # ì„¸ì…˜ ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ collect/      # ìƒí’ˆ ìˆ˜ì§‘
â”‚   â”‚   â”‚   â””â”€â”€ generate-review/ # ë¦¬ë·° ìƒì„±
â”‚   â”‚   â”œâ”€â”€ ai/               # AI ê´€ë ¨ API
â”‚   â”‚   â””â”€â”€ coupang/          # ì¿ íŒ¡ API
â”‚   â”œâ”€â”€ reviews/              # ê³µê°œ ë¦¬ë·° í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ [slug]/           # ê°œë³„ ë¦¬ë·°
â”‚   â”‚   â””â”€â”€ page.tsx          # ë¦¬ë·° ëª©ë¡
â”‚   â”œâ”€â”€ layout.tsx            # ì „ì—­ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ page.tsx              # í™ˆí˜ì´ì§€
â”‚   â””â”€â”€ globals.css           # ì „ì—­ ìŠ¤íƒ€ì¼
â”œâ”€â”€ components/               # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ admin/                # ê´€ë¦¬ì ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ AdminDashboardView.tsx
â”‚   â”œâ”€â”€ FirebaseProvider.tsx
â”‚   â”œâ”€â”€ FirebaseStatusBanner.tsx
â”‚   â”œâ”€â”€ Providers.tsx
â”‚   â”œâ”€â”€ QueryProvider.tsx
â”‚   â”œâ”€â”€ ReviewEditorModal.tsx
â”‚   â””â”€â”€ ReviewPost.tsx
â”œâ”€â”€ hooks/                    # Custom React Hooks
â”‚   â”œâ”€â”€ useAdminDashboardData.ts
â”‚   â”œâ”€â”€ useCoupangAds.ts
â”‚   â”œâ”€â”€ useCoupangReports.ts
â”‚   â”œâ”€â”€ useProducts.ts
â”‚   â”œâ”€â”€ useReviews.ts
â”‚   â””â”€â”€ useSystemSettings.ts
â”œâ”€â”€ stores/                   # ìƒíƒœ ê´€ë¦¬ (Zustand)
â”‚   â”œâ”€â”€ adminDashboardStore.ts
â”‚   â””â”€â”€ settingsStore.ts
â”œâ”€â”€ types/                    # TypeScript íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ lib/                      # ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ firebase.ts           # Firebase í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ firebaseAdmin.ts      # Firebase Admin SDK
â”‚   â””â”€â”€ firebaseClient.ts
â”œâ”€â”€ public/                   # ì •ì  íŒŒì¼
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ Dockerfile                # Docker ì´ë¯¸ì§€ ì •ì˜
â”œâ”€â”€ docker-compose.yml        # Docker Compose ì„¤ì •
â”œâ”€â”€ .dockerignore             # Docker ë¹Œë“œ ì œì™¸
â”œâ”€â”€ .env.local                # ë¡œì»¬ ê°œë°œ í™˜ê²½ë³€ìˆ˜
â”œâ”€â”€ .env.production           # í”„ë¡œë•ì…˜ í™˜ê²½ë³€ìˆ˜
â”œâ”€â”€ next.config.ts            # Next.js ì„¤ì •
â”œâ”€â”€ tailwind.config.ts        # Tailwind CSS ì„¤ì •
â”œâ”€â”€ tsconfig.json             # TypeScript ì„¤ì •
â”œâ”€â”€ package.json              # ì˜ì¡´ì„±
â””â”€â”€ package-lock.json         # ì˜ì¡´ì„± ì ê¸ˆ
```

### ì£¼ìš” íŒŒì¼ ì„¤ëª…

#### next.config.ts
```typescript
// Next.js ì„¤ì •
{
  output: "standalone",        // Docker ë°°í¬ìš©
  eslint: {
    ignoreDuringBuilds: true   // ë¹Œë“œ ì‹œ ESLint ë¬´ì‹œ
  },
  typescript: {
    ignoreBuildErrors: true     // ë¹Œë“œ ì‹œ íƒ€ì… ì—ëŸ¬ ë¬´ì‹œ
  }
}
```

#### package.json
- Next.js 15
- React 19
- Firebase SDK
- Tailwind CSS
- TypeScript
- Zustand (ìƒíƒœ ê´€ë¦¬)
- TanStack Query (ë°ì´í„° í˜ì¹­)

---

## âš¡ functions/ - Firebase Functions

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
functions/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ adminActions.js       # ê´€ë¦¬ì ì‘ì—…
â”‚   â”œâ”€â”€ generateReview.js     # ë¦¬ë·° ìë™ ìƒì„±
â”‚   â”œâ”€â”€ publishReview.js      # ë¦¬ë·° ê²Œì‹œ
â”‚   â”œâ”€â”€ collectProducts.js    # ìƒí’ˆ ìˆ˜ì§‘
â”‚   â”œâ”€â”€ cleanupLogs.js        # ë¡œê·¸ ì •ë¦¬
â”‚   â”œâ”€â”€ imageUtils.js         # ì´ë¯¸ì§€ ì²˜ë¦¬
â”‚   â”œâ”€â”€ coupangApi.js         # ì¿ íŒ¡ API
â”‚   â”œâ”€â”€ aiProviders.js        # AI ì œê³µì (OpenAI, Gemini)
â”‚   â”œâ”€â”€ reviewUtils.js        # ë¦¬ë·° ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ slack.js              # Slack ì•Œë¦¼
â”‚   â”œâ”€â”€ index.js              # Functions ì§„ì…ì 
â”‚   â””â”€â”€ services/             # ì„œë¹„ìŠ¤ ë ˆì´ì–´
â”‚       â””â”€â”€ coupang/          # ì¿ íŒ¡ ì„œë¹„ìŠ¤
â”œâ”€â”€ .env                      # Firebase Functions í™˜ê²½ë³€ìˆ˜
â”œâ”€â”€ package.json              # ì˜ì¡´ì„±
â””â”€â”€ package-lock.json
```

### Exportëœ Functions

```javascript
// Scheduled Functions
- collectProductsScheduler    // ì •ê¸° ìƒí’ˆ ìˆ˜ì§‘

// HTTP Functions
- generateReview              // ë¦¬ë·° ìƒì„± (ìë™)
- manualGenerateReview        // ë¦¬ë·° ìƒì„± (ìˆ˜ë™)
- manualCollectProducts       // ìƒí’ˆ ìˆ˜ì§‘ (ìˆ˜ë™)
- publishReview               // ë¦¬ë·° ê²Œì‹œ
- cleanupOldLogs              // ë¡œê·¸ ì •ë¦¬
- testImageCollection         // ì´ë¯¸ì§€ ìˆ˜ì§‘ í…ŒìŠ¤íŠ¸
- handleAdminActions          // ê´€ë¦¬ì ì‘ì—…
```

---

## ğŸ“š docs/ - ë¬¸ì„œ

```
docs/
â”œâ”€â”€ ì„œë²„-ë°°í¬-ê°€ì´ë“œ.md        # ì„œë²„ ë°°í¬ ì „ì²´ ê°€ì´ë“œ
â”œâ”€â”€ ì„œë²„-ìš´ì˜-ì§€ì¹¨.md          # ì„œë²„ ì¸¡ ì‘ì—… ì§€ì¹¨
â”œâ”€â”€ ê°œë°œ-ë°°í¬-ê°€ì´ë“œ.md        # ê°œë°œ â†’ ë°°í¬ í”Œë¡œìš°
â”œâ”€â”€ í”„ë¡œì íŠ¸-êµ¬ì¡°.md          # ì´ ë¬¸ì„œ
â”œâ”€â”€ í™˜ê²½ë³€ìˆ˜-ê°€ì´ë“œ.md        # í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬
â”œâ”€â”€ ë¬¸ì œí•´ê²°-ê°€ì´ë“œ.md        # íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
â”œâ”€â”€ Firebase-ê°€ì´ë“œ.md        # Firebase ì‚¬ìš©ë²•
â””â”€â”€ architecture/             # ì•„í‚¤í…ì²˜ ë¬¸ì„œ
```

---

## ğŸ”§ ì„¤ì • íŒŒì¼

### Firebase ì„¤ì •

**firebase.json**
```json
{
  "functions": { "source": "functions" },
  "firestore": {
    "indexes": "firestore.indexes.json",
    "rules": "firestore.rules"
  },
  "storage": { "rules": "storage.rules" },
  "hosting": [{
    "site": "blog-automation-23092",
    "source": "web",
    "frameworksBackend": {
      "region": "asia-northeast3"
    }
  }]
}
```

**.firebaserc**
```json
{
  "projects": {
    "default": "blog-automation-23092"
  }
}
```

---

## ğŸ—„ï¸ ë°ì´í„° êµ¬ì¡° (Firestore)

### Collections

```
firestore/
â”œâ”€â”€ reviews/                  # ë¦¬ë·°
â”‚   â”œâ”€â”€ {reviewId}
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ slug: string
â”‚   â”‚   â”œâ”€â”€ title: string
â”‚   â”‚   â”œâ”€â”€ content: string
â”‚   â”‚   â”œâ”€â”€ productId: string
â”‚   â”‚   â”œâ”€â”€ productName: string
â”‚   â”‚   â”œâ”€â”€ productPrice: number
â”‚   â”‚   â”œâ”€â”€ productImage: string
â”‚   â”‚   â”œâ”€â”€ affiliateUrl: string
â”‚   â”‚   â”œâ”€â”€ category: string
â”‚   â”‚   â”œâ”€â”€ status: 'draft' | 'published'
â”‚   â”‚   â”œâ”€â”€ viewCount: number
â”‚   â”‚   â”œâ”€â”€ createdAt: timestamp
â”‚   â”‚   â”œâ”€â”€ publishedAt: timestamp
â”‚   â”‚   â””â”€â”€ seoMeta: object
â”‚
â”œâ”€â”€ products/                 # ìˆ˜ì§‘ëœ ìƒí’ˆ
â”‚   â”œâ”€â”€ {productId}
â”‚   â”‚   â”œâ”€â”€ productId: string
â”‚   â”‚   â”œâ”€â”€ productName: string
â”‚   â”‚   â”œâ”€â”€ productPrice: number
â”‚   â”‚   â”œâ”€â”€ productImage: string
â”‚   â”‚   â”œâ”€â”€ category: string
â”‚   â”‚   â”œâ”€â”€ isAdult: boolean
â”‚   â”‚   â”œâ”€â”€ soldCount: number
â”‚   â”‚   â””â”€â”€ collectedAt: timestamp
â”‚
â”œâ”€â”€ settings/                 # ì‹œìŠ¤í…œ ì„¤ì •
â”‚   â””â”€â”€ system
â”‚       â”œâ”€â”€ aiProvider: 'openai' | 'gemini'
â”‚       â”œâ”€â”€ reviewsPerDay: number
â”‚       â””â”€â”€ autoPublish: boolean
â”‚
â””â”€â”€ logs/                     # ì‘ì—… ë¡œê·¸
    â””â”€â”€ {logId}
        â”œâ”€â”€ level: string
        â”œâ”€â”€ message: string
        â”œâ”€â”€ timestamp: timestamp
        â””â”€â”€ metadata: object
```

---

## ğŸ¨ ìŠ¤íƒ€ì¼ë§

### Tailwind CSS

**tailwind.config.ts**
```typescript
{
  content: [
    './app/**/*.{js,ts,jsx,tsx}',
    './components/**/*.{js,ts,jsx,tsx}'
  ],
  theme: {
    extend: {
      // ì»¤ìŠ¤í…€ ìƒ‰ìƒ, í°íŠ¸ ë“±
    }
  }
}
```

### ì „ì—­ ìŠ¤íƒ€ì¼

**app/globals.css**
- Tailwind CSS imports
- ì»¤ìŠ¤í…€ CSS ë³€ìˆ˜
- ì „ì—­ ìŠ¤íƒ€ì¼

---

## ğŸ” í™˜ê²½ë³€ìˆ˜

### ë¡œì»¬ (.env.local)

```env
# Firebase Web SDK
NEXT_PUBLIC_FIREBASE_API_KEY=...
NEXT_PUBLIC_FIREBASE_PROJECT_ID=...

# Admin
ADMIN_GUARD_BYPASS=true
NODE_ENV=development
```

### í”„ë¡œë•ì…˜ (.env.production)

```env
# Firebase Web SDK
NEXT_PUBLIC_FIREBASE_API_KEY=...
NEXT_PUBLIC_FIREBASE_PROJECT_ID=...

# Firebase Admin SDK
FIREBASE_ADMIN_PROJECT_ID=...
FIREBASE_ADMIN_CLIENT_EMAIL=...
FIREBASE_ADMIN_PRIVATE_KEY=...

# Admin
ADMIN_GUARD_BYPASS=false
NODE_ENV=production
NEXT_PUBLIC_SITE_URL=https://semolink.store
```

### Functions (.env)

```env
# Coupang API
COUPANG_ACCESS_KEY=...
COUPANG_SECRET_KEY=...

# AI Providers
OPENAI_API_KEY=...
GEMINI_API_KEY=...

# Slack
SLACK_WEBHOOK_URL=...
```

---

## ğŸš€ ë°°í¬ êµ¬ì¡°

### ê°œë°œ í™˜ê²½

```
ë¡œì»¬ ê°œë°œ ë¨¸ì‹ 
â”œâ”€â”€ Web ì•± (localhost:3000)
â”œâ”€â”€ Firebase Emulator
â””â”€â”€ Git ì €ì¥ì†Œ
```

### í”„ë¡œë•ì…˜ í™˜ê²½

```
ì„œë²„ (106.241.31.230)
â”œâ”€â”€ Docker Container (coupang-blog)
â”‚   â””â”€â”€ Next.js App (port 3000)
â”œâ”€â”€ Nginx (port 80, 443)
â”‚   â””â”€â”€ Reverse Proxy â†’ Docker
â””â”€â”€ ë„ë©”ì¸: semolink.store

Firebase (Google Cloud)
â”œâ”€â”€ Functions (ìë™í™” ë¡œì§)
â”œâ”€â”€ Firestore (ë°ì´í„°ë² ì´ìŠ¤)
â”œâ”€â”€ Storage (ì´ë¯¸ì§€)
â””â”€â”€ Authentication (ì¸ì¦)
```

---

## ğŸ“¦ ì˜ì¡´ì„± ê´€ë¦¬

### Web (Next.js)

**ì£¼ìš” ì˜ì¡´ì„±:**
- next: ^15.5.7
- react: ^19.2.3
- firebase: ^11.0.2
- @tanstack/react-query: ^5.90.19
- zustand: ^5.0.8
- tailwindcss: 3.4.14

### Functions (Node.js)

**ì£¼ìš” ì˜ì¡´ì„±:**
- firebase-admin: ^13.5.0
- firebase-functions: ^6.2.0
- openai: ^4.77.3
- @google/generative-ai: ^0.24.1

---

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

### ë¦¬ë·° ìƒì„± í”Œë¡œìš°

```
1. collectProductsScheduler (Functions)
   â†“ ì¿ íŒ¡ APIì—ì„œ ìƒí’ˆ ìˆ˜ì§‘
   â†“ Firestore products/ ì €ì¥

2. generateReview (Functions)
   â†“ products/ì—ì„œ ìƒí’ˆ ì„ íƒ
   â†“ AIë¡œ ë¦¬ë·° ìƒì„±
   â†“ Firestore reviews/ ì €ì¥ (status: draft)

3. ê´€ë¦¬ì ìŠ¹ì¸ (Web)
   â†“ /adminì—ì„œ ë¦¬ë·° í™•ì¸
   â†“ ìˆ˜ì • í›„ ê²Œì‹œ

4. publishReview (Functions)
   â†“ status â†’ published
   â†“ slug ìƒì„±

5. ê³µê°œ í˜ì´ì§€ (Web)
   â†“ /reviews/[slug] ì ‘ê·¼ ê°€ëŠ¥
```

---

## ğŸ› ï¸ ê°œë°œ ë„êµ¬

### ë¡œì»¬ ê°œë°œ

```bash
# Web ê°œë°œ ì„œë²„
npm run dev

# Firebase Emulator
firebase emulators:start

# TypeScript íƒ€ì… ì²´í¬
npx tsc --noEmit

# ESLint
npm run lint
```

### ë¹Œë“œ

```bash
# Web ë¹Œë“œ
npm run build

# Functions ë°°í¬
firebase deploy --only functions
```

---

## ğŸ“Š ì—­í•  ë¶„ë‹´

### ë¡œì»¬ (ê°œë°œ)

- âœ… ì½”ë“œ ì‘ì„± ë° ìˆ˜ì •
- âœ… í…ŒìŠ¤íŠ¸
- âœ… Git ë²„ì „ ê´€ë¦¬
- âœ… Firebase Functions ë°°í¬
- âœ… ë¬¸ì„œ ì‘ì„±

### ì„œë²„ (ë°°í¬)

- âœ… Docker ë¹Œë“œ ë° ì‹¤í–‰
- âœ… Nginx í”„ë¡ì‹œ
- âœ… ëª¨ë‹ˆí„°ë§
- âœ… ë¡œê·¸ í™•ì¸
- âŒ ì½”ë“œ ìˆ˜ì • ê¸ˆì§€

### Firebase (í´ë¼ìš°ë“œ)

- âœ… Functions ì‹¤í–‰
- âœ… Firestore ë°ì´í„° ì €ì¥
- âœ… Storage íŒŒì¼ ì €ì¥
- âœ… Authentication ì¸ì¦

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2026-02-03
