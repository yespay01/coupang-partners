# 설치형 환경변수 / 설치 점검 체크리스트 (초안)

## 1. 목적
설치형 고객 납품 시 `코드 수정` 대신 `ENV + 관리자 설정(DB)`으로 고객별 차이를 처리하기 위한 체크리스트.

원칙:
- 도메인/인프라 연결값: `ENV`
- 사이트명/푸터/로고/파비콘/OG 이미지 등 브랜딩: `관리자 설정 > 사이트 정보`
- 고객별 코드 분기 금지 (No Forking)

## 2. 서버 사양 (단일 사이트 기준)
### 최소
- CPU: 2 vCPU
- RAM: 4GB
- Disk: SSD 80GB

### 권장
- CPU: 4 vCPU
- RAM: 8GB
- Disk: SSD 100~200GB

## 3. 고객 준비물
- 도메인 (예: `example.com`)
- DNS 수정 권한
- SSL 발급 가능 환경 (또는 프록시 서버 접근 권한)
- 쿠팡 파트너스 API 키
- AI API 키(OpenAI/Anthropic/Gemini 중 선택)
- 관리자 이메일 / 초기 비밀번호
- 브랜딩 자산
  - 로고 PNG/SVG
  - 파비콘 (`.png` 또는 `.ico`)
  - OG 기본 이미지 (권장 1200x630)
- 법적/운영 문구
  - 푸터 카피라이트
  - 제휴(광고) 고지 문구
  - 연락처 이메일

## 4. ENV 설정 (web)
파일: `web/.env` (실제 운영값)
참고 예시: `web/.env.example`

필수:
- `AUTOMATION_SERVER_URL`
- `NEXT_PUBLIC_SITE_URL`

권장:
- `ADMIN_GUARD_BYPASS=false`

## 5. ENV 설정 (automation-server)
파일: `automation-server/.env` (실제 운영값)
참고 예시: `automation-server/.env.example`

필수:
- `DATABASE_URL`
- `MINIO_*`
- `COUPANG_*`
- `JWT_SECRET`
- `ADMIN_EMAIL`
- `ADMIN_PASSWORD`
- 최소 1개 AI API 키 (`OPENAI_API_KEY` 등)

선택:
- `SLACK_WEBHOOK_URL`
- `HEALTH_CHECK_URL`
- `CRON_REVIEW_GENERATION_LIMIT`
- `CRON_SCHEDULE_SYNC_MS`
- `IMAGE_SERVER_URL`

## 6. 설치 순서 (요약)
1. 서버 준비 (Docker / Docker Compose)
2. 저장소 배치
3. `web/.env`, `automation-server/.env` 작성
4. 필요 시 `docker-compose.override.yml` 작성 (예시: `docker-compose.override.example.yml`)
5. 도메인/DNS 연결
6. 리버스 프록시 + SSL 설정
7. 컨테이너 실행
8. 관리자 로그인 확인 (`/admin`)
9. 설정 > 사이트 정보 입력
10. 쿠팡 API / AI / 자동화 설정 입력
11. 수동 수집/리뷰 생성 테스트
12. 크론 로그 확인

## 7. 설치 직후 점검 체크리스트
### 서비스 기동
- [ ] `web` 컨테이너 정상 기동
- [ ] `automation-server` 컨테이너 정상 기동
- [ ] `postgres` / `minio` healthy

### 접속/보안
- [ ] `https://도메인` 접속 가능
- [ ] `/admin` 접속 시 로그인 화면 표시
- [ ] 로그인 성공 후 관리자 대시보드 진입
- [ ] 로그인 실패 횟수 제한 동작 확인 (선택)

### 브랜딩/SEO
- [ ] 기본 법적 페이지 템플릿 확인 (`/privacy`, `/terms`, `/disclosure`)
- [ ] 헤더 로고 표시
- [ ] 푸터 사이트명/카피라이트/제휴고지 표시
- [ ] 파비콘 표시 (브라우저 탭)
- [ ] OG 기본 이미지 설정 반영 (상세/공유 미리보기)
- [ ] sitemap/robots/canonical 도메인이 고객 도메인으로 표시

### 기능
- [ ] 상품 수집 수동 테스트 성공
- [ ] 리뷰 생성 수동 테스트 성공
- [ ] 자동 수집/자동 리뷰 생성 스케줄 저장
- [ ] 크론 로그에 설정 시간 반영

## 8. 운영 변경 원칙 (관리형 포함)
- 코드 공통 버전 유지 (릴리즈 태그 기준)
- 고객별 차이는 `ENV + DB 설정`으로만 처리
- 고객 요구 커스터마이징은 우선 설정화 가능 여부 검토 후 진행

## 9. 보안/비밀값 관리 원칙
- `.env.example`는 예시 문서만 제공
- 실제 `.env`는 고객 서버에만 보관
- 비밀값(쿠팡/API/JWT)은 메신저로 전달하지 않고 안전 채널 사용 권장
- 저장소 커밋 금지 (`.env`, 키 파일)
