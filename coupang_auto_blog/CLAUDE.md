# ì¿ íŒ¡ ìë™ ë¸”ë¡œê·¸ í”„ë¡œì íŠ¸ - Claude ì‘ì—… ì§€ì¹¨

> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-11
> **í•µì‹¬ ì›ì¹™**: Git ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°

---

## ğŸš¨ ì¤‘ìš”: ì‘ì—… í™˜ê²½ êµ¬ë¶„

ì´ í”„ë¡œì íŠ¸ëŠ” **ë‘ ëŒ€ì˜ ì»´í“¨í„°**ì—ì„œ ì‘ì—…í•©ë‹ˆë‹¤:

### ê°œë°œ ì»´í“¨í„° (Development)
- **ì—­í• **: ëª¨ë“  ì½”ë“œ ì‘ì—…
- **ìœ„ì¹˜**: `C:\Users\sakai\OneDrive\ë°”íƒ• í™”ë©´\Coupang partnner\coupang_auto_blog`
- **í—ˆìš©ëœ ì‘ì—…**:
  - âœ… ì½”ë“œ ìˆ˜ì • (web/, automation-server/, ëª¨ë“  íŒŒì¼)
  - âœ… ë¡œì»¬ í…ŒìŠ¤íŠ¸
  - âœ… Git ì»¤ë°‹ & í‘¸ì‹œ
  - âœ… ë¬¸ì„œ ì‘ì„±

### ì„œë²„ ì»´í“¨í„° (Production Server)
- **ì—­í• **: ë°°í¬ ë° ì‹¤í–‰ë§Œ
- **ìœ„ì¹˜**: `/home/insuk/blog` (ë¦¬ëˆ…ìŠ¤ ì„œë²„)
- **í—ˆìš©ëœ ì‘ì—…**:
  - âœ… `git pull` (ì½”ë“œ ë°›ê¸°ë§Œ)
  - âœ… `docker-compose build` (ë„ì»¤ ì´ë¯¸ì§€ ë¹Œë“œ)
  - âœ… `docker-compose up` (ì„œë¹„ìŠ¤ ì‹¤í–‰)
  - âœ… ëª¨ë‹ˆí„°ë§ (ë¡œê·¸ í™•ì¸, ìƒíƒœ ì²´í¬)
  - âœ… í™˜ê²½ë³€ìˆ˜ ìˆ˜ì • (`.env.production`ë§Œ)
- **ê¸ˆì§€ëœ ì‘ì—…**:
  - âŒ ì½”ë“œ íŒŒì¼ ìˆ˜ì • (ì ˆëŒ€ ê¸ˆì§€!)
  - âŒ Git ì»¤ë°‹
  - âŒ `Dockerfile`, `docker-compose.yml` ìˆ˜ì •
  - âŒ ì†ŒìŠ¤ ì½”ë“œ í¸ì§‘

---

## ğŸ“‹ ì–´ëŠ ì»´í“¨í„°ì— ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•

**í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬ í™•ì¸:**
```bash
pwd
```

- **ê°œë°œ ì»´í“¨í„°**: `/c/Users/sakai/OneDrive/ë°”íƒ• í™”ë©´/Coupang partnner/coupang_auto_blog`
- **ì„œë²„ ì»´í“¨í„°**: `/home/insuk/blog`

**ë˜ëŠ” OS í™•ì¸:**
```bash
uname -a
```
- **ê°œë°œ ì»´í“¨í„°**: Windows (MINGW64_NT)
- **ì„œë²„ ì»´í“¨í„°**: Linux (Ubuntu)

---

## ğŸ”„ Git ì›Œí¬í”Œë¡œìš°

### ê°œë°œ ì»´í“¨í„°ì—ì„œ (ì½”ë“œ ì‘ì—… í›„):
```bash
# 1. ë³€ê²½ì‚¬í•­ í™•ì¸
git status

# 2. ì›ê²© ìµœì‹  ì½”ë“œ ë°›ê¸° (ì‘ì—… ì‹œì‘ ì „ í•„ìˆ˜!)
git fetch
git pull

# 3. ì‘ì—… ì™„ë£Œ í›„ ìŠ¤í…Œì´ì§•
git add .

# 4. ì»¤ë°‹
git commit -m "ì‘ì—… ë‚´ìš©"

# 5. í‘¸ì‹œ
git push
```

### ì„œë²„ ì»´í“¨í„°ì—ì„œ (ë°°í¬ë§Œ):
```bash
# 1. ìµœì‹  ì½”ë“œ ë°›ê¸°
git fetch
git pull

# 2. ë„ì»¤ ì´ë¯¸ì§€ ì¬ë¹Œë“œ
docker-compose down
docker-compose build --no-cache

# 3. ì„œë¹„ìŠ¤ ì‹¤í–‰
docker-compose up -d

# 4. ë¡œê·¸ í™•ì¸
docker-compose logs -f

# ë! ì ˆëŒ€ ì½”ë“œ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ!
```

---

## âš ï¸ ì„œë²„ ì»´í“¨í„° Claudeì—ê²Œ (ì¤‘ìš”!)

**ë‹¹ì‹ ì´ ì„œë²„ ì»´í“¨í„°ì— ìˆë‹¤ë©´:**

1. **ì½”ë“œë¥¼ ì ˆëŒ€ ìˆ˜ì •í•˜ì§€ ë§ˆì„¸ìš”**
   - ì‚¬ìš©ìê°€ "ì´ íŒŒì¼ ìˆ˜ì •í•´ì¤˜"ë¼ê³  ìš”ì²­í•˜ë©´:
     - âŒ ë°”ë¡œ ìˆ˜ì •í•˜ì§€ ë§ê³ 
     - âœ… "ì´ ì‘ì—…ì€ ê°œë°œ ì»´í“¨í„°ì—ì„œ í•´ì•¼ í•©ë‹ˆë‹¤"ë¼ê³  ì•ˆë‚´

2. **ë°°í¬ë§Œ ë‹´ë‹¹í•©ë‹ˆë‹¤**
   - `git pull` â†’ `docker-compose build` â†’ `docker-compose up`
   - ì´ ì™¸ì˜ ì‘ì—…ì€ ê¸ˆì§€

3. **ë¬¸ì œê°€ ìƒê¸°ë©´**
   - ë¡œê·¸ë¥¼ í™•ì¸í•˜ê³  ì‚¬ìš©ìì—ê²Œ ë³´ê³ 
   - ê°œë°œ ì»´í“¨í„°ì—ì„œ ìˆ˜ì •í•˜ë„ë¡ ì•ˆë‚´

---

## ğŸ–¥ï¸ ê°œë°œ ì»´í“¨í„° Claudeì—ê²Œ

**ë‹¹ì‹ ì´ ê°œë°œ ì»´í“¨í„°ì— ìˆë‹¤ë©´:**

1. **ëª¨ë“  ì½”ë“œ ì‘ì—…ì„ ì—¬ê¸°ì„œ í•©ë‹ˆë‹¤**
   - web ì½”ë“œ, automation-server ì½”ë“œ ëª¨ë‘

2. **ì‘ì—… ì „ ë°˜ë“œì‹œ git pull**
   - ì„œë²„ì—ì„œ ì‘ì—…í•œ ë‚´ìš©ì´ ìˆì„ ìˆ˜ ìˆìŒ (ì—†ì–´ì•¼ ì •ìƒì´ì§€ë§Œ)

3. **ì‘ì—… ì™„ë£Œ í›„ ë°˜ë“œì‹œ git push**
   - ì„œë²„ì—ì„œ pull ë°›ì„ ìˆ˜ ìˆë„ë¡

4. **ì„œë²„ ë°°í¬ëŠ” ì§ì ‘ í•˜ì§€ ì•ŠìŒ**
   - ì‚¬ìš©ìê°€ ì„œë²„ ì»´í“¨í„°ì—ì„œ pull ë°›ë„ë¡ ì•ˆë‚´

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
coupang_auto_blog/
â”œâ”€â”€ web/                       # Next.js ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ app/                   # Next.js App Router
â”‚   â”œâ”€â”€ components/            # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ hooks/                 # Custom Hooks
â”‚   â”œâ”€â”€ lib/                   # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ ...
â”œâ”€â”€ automation-server/         # ë°±ê·¸ë¼ìš´ë“œ ìë™í™” ì„œë²„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/           # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ services/         # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ utils/            # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docs/                      # ë¬¸ì„œ
â”œâ”€â”€ docker-compose.yml         # Docker ì„¤ì •
â”œâ”€â”€ CLAUDE.md                  # ì´ íŒŒì¼
â””â”€â”€ README.md
```

---

## ğŸš¨ ê¸´ê¸‰ ìƒí™© ëŒ€ì‘

### ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆì„ ë•Œ
**ì„œë²„ ì»´í“¨í„°ì—ì„œ:**
```bash
# 1. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker ps -a

# 2. ë¡œê·¸ í™•ì¸
docker-compose logs

# 3. ì¬ì‹œì‘
docker-compose restart

# 4. ì•ˆë˜ë©´ ì¬ë¹Œë“œ
docker-compose down
docker-compose up -d --build
```

### ì‘ì—… ë‚´ìš©ì´ ì¶©ëŒí•  ë•Œ
**ê°œë°œ ì»´í“¨í„°ì—ì„œ:**
```bash
# 1. í˜„ì¬ ë³€ê²½ì‚¬í•­ ìŠ¤íƒœì‹œ
git stash

# 2. ìµœì‹  ì½”ë“œ ë°›ê¸°
git pull

# 3. ìŠ¤íƒœì‹œ ì ìš©
git stash pop

# 4. ì¶©ëŒ í•´ê²° í›„ ì»¤ë°‹
git add .
git commit -m "ì¶©ëŒ í•´ê²°"
git push
```

---

## ğŸ“– ì¶”ê°€ ë¬¸ì„œ

- `docs/ì„œë²„-ìš´ì˜-ì§€ì¹¨.md` - ì„œë²„ ìš´ì˜ ìƒì„¸ ê°€ì´ë“œ
- `docs/ê°œë°œ-ë°°í¬-ê°€ì´ë“œ.md` - ê°œë°œ ë° ë°°í¬ ì ˆì°¨
- `docs/í”„ë¡œì íŠ¸-êµ¬ì¡°.md` - í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ëª…
- `README.md` - í”„ë¡œì íŠ¸ ê°œìš”

---

## ğŸ” ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

1. **í™˜ê²½ë³€ìˆ˜ ë…¸ì¶œ ê¸ˆì§€**
   - `.env.production` ë‚´ìš©ì„ ë¡œê·¸ë‚˜ ì‘ë‹µì— í¬í•¨í•˜ì§€ ë§ ê²ƒ
   - API í‚¤ ì ˆëŒ€ ë…¸ì¶œ ê¸ˆì§€

2. **í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ë””ë²„ê¹… ê¸ˆì§€**
   - `ADMIN_GUARD_BYPASS=false` ìœ ì§€
   - `NODE_ENV=production` ìœ ì§€

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
ë¸Œë¼ìš°ì € â†’ Web(Next.js :3000) â†’ API Routes(í”„ë¡ì‹œ) â†’ Automation-Server(Express :4000) â†’ PostgreSQL / MinIO
```

- **Web**: Next.js App Router. í”„ë¡ íŠ¸ì—”ë“œ + API ë¼ìš°íŠ¸(í”„ë¡ì‹œ ì—­í• )
- **Automation-Server**: Express.js. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, DB ì ‘ê·¼, í¬ë¡ ì¡
- **PostgreSQL**: ëª¨ë“  ë°ì´í„° ì €ì¥ (products, reviews, logs, settings)
- **MinIO**: ì´ë¯¸ì§€/íŒŒì¼ ì €ì¥ì†Œ

---

## ğŸ”Œ API ë¼ìš°íŠ¸ íŒ¨í„´

**ëª¨ë“  admin API ë¼ìš°íŠ¸ëŠ” ë™ì¼í•œ íŒ¨í„´ì„ ë”°ë¦…ë‹ˆë‹¤:**

```typescript
const AUTOMATION_SERVER_URL =
  process.env.AUTOMATION_SERVER_URL || "http://automation-server:4000";

// 1. admin_session ì¿ í‚¤ë¡œ ì¸ì¦ í™•ì¸
const cookieStore = await cookies();
const sessionCookie = cookieStore.get("admin_session");
if (!sessionCookie) return 401;

// 2. automation-serverë¡œ í”„ë¡ì‹œ
const response = await fetch(`${AUTOMATION_SERVER_URL}/api/...`, {
  headers: { Cookie: `admin_session=${sessionCookie.value}` },
});

// 3. ì‘ë‹µ ì „ë‹¬
return NextResponse.json(await response.json());
```

**ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ:**
- âŒ `API_URL` í™˜ê²½ë³€ìˆ˜ ì‚¬ìš© (â†’ `AUTOMATION_SERVER_URL` ì‚¬ìš©)
- âŒ `Authorization` í—¤ë”ë¡œ ì¸ì¦ (â†’ `admin_session` ì¿ í‚¤ ì‚¬ìš©)
- âŒ Webì—ì„œ ì§ì ‘ DB/Firebase ì ‘ê·¼ (â†’ automation-server í”„ë¡ì‹œ)

---

## ğŸš« Firebase ê¸ˆì§€

ì´ í”„ë¡œì íŠ¸ëŠ” **Firebaseë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

- âŒ `firebase`, `firebase-admin` íŒ¨í‚¤ì§€ ì„¤ì¹˜ ê¸ˆì§€
- âŒ Firestore, Firebase Functions, Firebase Auth ì‚¬ìš© ê¸ˆì§€
- âŒ `@/lib/firebase*` íŒŒì¼ ìƒì„± ê¸ˆì§€
- âœ… ëª¨ë“  ë°ì´í„°ëŠ” PostgreSQL + automation-server APIë¥¼ í†µí•´ ì ‘ê·¼

---

## ğŸ³ ë°°í¬ ê·œì¹™

ì½”ë“œ ë³€ê²½ í›„ ë°˜ë“œì‹œ **ì´ë¯¸ì§€ë¥¼ ì¬ë¹Œë“œ**í•´ì•¼ í•©ë‹ˆë‹¤:

```bash
# âŒ ì˜ëª»ëœ ë°©ë²• (ì½”ë“œ ë³€ê²½ì´ ë°˜ì˜ë˜ì§€ ì•ŠìŒ)
docker-compose restart

# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

---

## ğŸ“ ì£¼ìš” íŒŒì¼ ì°¸ì¡°

| ì—­í•  | íŒŒì¼ ê²½ë¡œ |
|------|----------|
| Web API ë¼ìš°íŠ¸ | `web/app/api/admin/*/route.ts` |
| ì¸ì¦ (JWT) | `automation-server/src/config/auth.js` |
| DB ì„¤ì • | `automation-server/src/config/database.js` |
| Admin ì—”ë“œí¬ì¸íŠ¸ | `automation-server/src/routes/admin.js` |
| ë¦¬ë·° ì—”ë“œí¬ì¸íŠ¸ | `automation-server/src/routes/review.js` |
| ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸ | `automation-server/src/routes/auth.js` |
| API í´ë¼ì´ì–¸íŠ¸ (í”„ë¡ íŠ¸) | `web/lib/apiClient.ts` |
| Firestore ëŒ€ì²´ ëª¨ë“ˆ | `web/lib/firestore.ts` (API í´ë¼ì´ì–¸íŠ¸ ë˜í¼) |
| Docker ì„¤ì • | `docker-compose.yml` |

---

## âœ… í•µì‹¬ ê·œì¹™ ìš”ì•½

| ì»´í“¨í„° | ì½”ë“œ ìˆ˜ì • | Git ì»¤ë°‹ | Git í‘¸ì‹œ | Git Pull | ë„ì»¤ ë¹Œë“œ | ë°°í¬ |
|--------|----------|---------|---------|---------|----------|-----|
| ê°œë°œ   | âœ…       | âœ…      | âœ…      | âœ…      | âœ…       | âŒ  |
| ì„œë²„   | âŒ       | âŒ      | âŒ      | âœ…      | âœ…       | âœ…  |

**ê¸°ì–µí•˜ì„¸ìš”:**
- ê°œë°œ = ì½”ë“œ ì‘ì—… + í‘¸ì‹œ
- ì„œë²„ = í’€ + ë¹Œë“œ + ì‹¤í–‰ (ì½”ë“œ ìˆ˜ì • ì ˆëŒ€ ê¸ˆì§€!)

---

**í˜„ì¬ ìƒíƒœ**: Firebase ì™„ì „ ì œê±°, PostgreSQL/MinIO ê¸°ë°˜ (2026-02-11)
**ë‹¤ìŒ ì‘ì—…**: ì´ ì§€ì¹¨ì„ ë”°ë¼ ì‘ì—… ë¶„ë¦¬ ìœ ì§€
